var Ns=Object.defineProperty,ws=Object.defineProperties;var _s=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable;var Qe=(s,t,r)=>t in s?Ns(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,g=(s,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&Qe(s,r,t[r]);if(xe)for(var r of xe(t))es.call(t,r)&&Qe(s,r,t[r]);return s},j=(s,t)=>ws(s,_s(t));var ue=(s,t)=>{var r={};for(var n in s)Ze.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&xe)for(var n of xe(s))t.indexOf(n)<0&&es.call(s,n)&&(r[n]=s[n]);return r};var m=(s,t,r)=>new Promise((n,l)=>{var c=N=>{try{x(r.next(N))}catch(p){l(p)}},u=N=>{try{x(r.throw(N))}catch(p){l(p)}},x=N=>N.done?n(N.value):Promise.resolve(N.value).then(c,u);x((r=r.apply(s,t)).next())});import{j as e,R as Z,E as ks,a as Ss,r as w,X as Cs,b as ge,P as re,A as ms,B as Ps,C as Ts,D as As,c as _e,S as ps,d as Es,Z as ke,e as fe,f as Os,F as Se,M as ss,U as ye,g as ts,T as Ce,h as Ds,k as je,l as Is,m as qs,n as zs,o as Ms,p as Us}from"./react-vendor-BnMxgzCM.js";import{c as $s}from"./vendor-C9A41NUf.js";let de=[];const Pe=new Set,Bs=5,Ls=s=>s.length<=2e3?s:`${s.slice(0,2e3)}â€¦`,be=s=>{if(typeof s=="string")return Ls(s);if(Array.isArray(s))return s.map(be);if(s&&typeof s=="object"){const t=Object.entries(s).slice(0,50).map(([r,n])=>[r,be(n)]);return Object.fromEntries(t)}return s},rs=s=>{var r;de=[{id:s.id||((r=crypto.randomUUID)==null?void 0:r.call(crypto))||`ai-log-${Date.now()}`,timestamp:s.timestamp||Date.now(),endpoint:s.endpoint,status:s.status,model:s.model,requestBody:be(s.requestBody),responseBody:be(s.responseBody),error:s.error},...de].slice(0,Bs),Pe.forEach(n=>n(de))},at=()=>de,nt=s=>(Pe.add(s),s(de),()=>{Pe.delete(s)}),Fs="https://andorabrand.me/api",Gs=s=>{if(!s)return[];if(Array.isArray(s))return s;if(typeof s=="string")try{const t=JSON.parse(s);return Array.isArray(t)?t:[]}catch(t){return console.warn("Failed to parse channels JSON:",t),[]}return[]},ce=s=>{var r,n,l,c,u,x,N,p,v,_,C,P,h,E,q,R,$,W,Y,H,V,y,U,z,F,o,k,i,b,M,B,I,ne,X,L,me,ie;console.log("ðŸ”„ transformBrandResponse: Raw brand from API:",s),console.log("ðŸ”„ transformBrandResponse: brand.narrative_perfect_fields:",s.narrative_perfect_fields);const t={brand_id:(r=s.id)!=null?r:s.brand_id,id:(n=s.id)!=null?n:s.brand_id,user_id:s.user_id,brand_name:(c=(l=s.name)!=null?l:s.brand_name)!=null?c:"",brand_type:(u=s.brand_type)!=null?u:"organization",reverse_positioning:(x=s.reverse_positioning)!=null?x:!1,taglines:(p=(N=s.tagline)!=null?N:s.taglines)!=null?p:"",about:(v=s.about)!=null?v:"",vision:(_=s.vision)!=null?_:"",mission:(C=s.mission)!=null?C:"",products:(P=s.products)!=null?P:"",persona:(E=(h=s.personality)!=null?h:s.persona)!=null?E:"",buyer_profile:(R=(q=s.buyer_profile)!=null?q:s.target_audience)!=null?R:"",colors:($=s.colors)!=null?$:"",brand_hq_location:(Y=(W=s.brand_hq_location)!=null?W:s.location)!=null?Y:"",timezone:(H=s.timezone)!=null?H:"UTC",channels:Gs(s.channels),channel_schedule:(V=s.channel_schedule)!=null?V:{},posting_frequency:(y=s.posting_frequency)!=null?y:3,preferred_posting_days:Array.isArray(s.preferred_posting_days)?s.preferred_posting_days:[],narrative_why:(z=(U=s.narrative_why)!=null?U:s.why_it_matters)!=null?z:"",narrative_problem:(F=s.narrative_problem)!=null?F:"",narrative_solution:(o=s.narrative_solution)!=null?o:"",narrative_cta:(k=s.narrative_cta)!=null?k:"",narrative_failure:(i=s.narrative_failure)!=null?i:"",narrative_success:(b=s.narrative_success)!=null?b:"",narrative_perfect_fields:(M=s.narrative_perfect_fields)!=null?M:{},season_plans:(B=s.season_plans)!=null?B:{},monthly_themes:(I=s.monthly_themes)!=null?I:{},weekly_subplots:(ne=s.weekly_subplots)!=null?ne:{},monthly_calendars:(X=s.monthly_calendars)!=null?X:{},cast_management:(L=s.cast_management)!=null?L:[],team_members:(me=s.team_members)!=null?me:[],archived_at:(ie=s.archived_at)!=null?ie:null};return console.log("ðŸ”„ transformBrandResponse: Transformed narrative_perfect_fields:",t.narrative_perfect_fields),t},as=s=>{var x,N,p,v,_;const t={},r=(x=s==null?void 0:s.brand_name)!=null?x:s==null?void 0:s.name;r!=null&&(t.name=r);const n=(N=s==null?void 0:s.taglines)!=null?N:s==null?void 0:s.tagline;n!==void 0&&(t.tagline=n),(s==null?void 0:s.industry)!==void 0&&(t.industry=s.industry);const l=(p=s==null?void 0:s.buyer_profile)!=null?p:s==null?void 0:s.target_audience;l!==void 0&&(t.target_audience=l,t.buyer_profile=l),(s==null?void 0:s.core_message)!==void 0&&(t.core_message=s.core_message),(s==null?void 0:s.what_you_do)!==void 0&&(t.what_you_do=s.what_you_do),(s==null?void 0:s.how_you_do_it)!==void 0&&(t.how_you_do_it=s.how_you_do_it);const c=(v=s==null?void 0:s.narrative_why)!=null?v:s==null?void 0:s.why_it_matters;c!==void 0&&(t.why_it_matters=c);const u=(_=s==null?void 0:s.persona)!=null?_:s==null?void 0:s.personality;return u!==void 0&&(t.personality=u),(s==null?void 0:s.channels)!==void 0&&(t.channels=s.channels),(s==null?void 0:s.brand_type)!==void 0&&(t.brand_type=s.brand_type),(s==null?void 0:s.reverse_positioning)!==void 0&&(t.reverse_positioning=s.reverse_positioning),(s==null?void 0:s.about)!==void 0&&(t.about=s.about),(s==null?void 0:s.vision)!==void 0&&(t.vision=s.vision),(s==null?void 0:s.mission)!==void 0&&(t.mission=s.mission),(s==null?void 0:s.products)!==void 0&&(t.products=s.products),(s==null?void 0:s.colors)!==void 0&&(t.colors=s.colors),(s==null?void 0:s.brand_hq_location)!==void 0&&(t.brand_hq_location=s.brand_hq_location),(s==null?void 0:s.timezone)!==void 0&&(t.timezone=s.timezone),(s==null?void 0:s.posting_frequency)!==void 0&&(t.posting_frequency=s.posting_frequency),(s==null?void 0:s.preferred_posting_days)!==void 0&&(t.preferred_posting_days=s.preferred_posting_days),(s==null?void 0:s.channel_schedule)!==void 0&&(t.channel_schedule=s.channel_schedule),(s==null?void 0:s.narrative_problem)!==void 0&&(t.narrative_problem=s.narrative_problem),(s==null?void 0:s.narrative_solution)!==void 0&&(t.narrative_solution=s.narrative_solution),(s==null?void 0:s.narrative_cta)!==void 0&&(t.narrative_cta=s.narrative_cta),(s==null?void 0:s.narrative_failure)!==void 0&&(t.narrative_failure=s.narrative_failure),(s==null?void 0:s.narrative_success)!==void 0&&(t.narrative_success=s.narrative_success),(s==null?void 0:s.narrative_why)!==void 0&&(t.narrative_why=s.narrative_why),(s==null?void 0:s.narrative_perfect_fields)!==void 0&&(console.log("ðŸ”§ prepareBrandPayload: narrative_perfect_fields detected:",s.narrative_perfect_fields),t.narrative_perfect_fields=s.narrative_perfect_fields),(s==null?void 0:s.season_plans)!==void 0&&(t.season_plans=s.season_plans),(s==null?void 0:s.monthly_themes)!==void 0&&(t.monthly_themes=s.monthly_themes),(s==null?void 0:s.weekly_subplots)!==void 0&&(t.weekly_subplots=s.weekly_subplots),(s==null?void 0:s.monthly_calendars)!==void 0&&(t.monthly_calendars=s.monthly_calendars),t},ns=s=>{var n,l,c,u,x,N,p;const t=(n=s==null?void 0:s.start_date)!=null?n:s==null?void 0:s.event_date,r={brand_id:s==null?void 0:s.brand_id,title:(l=s==null?void 0:s.title)!=null?l:"Event",event_type:(c=s==null?void 0:s.event_type)!=null?c:"custom",start_date:t,end_date:(u=s==null?void 0:s.end_date)!=null?u:null,description:(x=s==null?void 0:s.description)!=null?x:"",relevance_tag:(N=s==null?void 0:s.relevance_tag)!=null?N:"custom",remind_andora:(p=s==null?void 0:s.remind_andora)!=null?p:!0};return Object.keys(r).forEach(v=>{r[v]===void 0&&delete r[v]}),r},Ne=s=>{var t,r;return j(g({},s),{event_date:(r=(t=s==null?void 0:s.event_date)!=null?t:s==null?void 0:s.start_date)!=null?r:null})},J=s=>{if(!s)return[];if(Array.isArray(s))return s;if(typeof s=="string")try{const t=JSON.parse(s);return J(t)}catch(t){return console.warn("Failed to parse characters payload string:",t),[]}if(typeof s=="object"){const t=s;if(Array.isArray(t.characters)||typeof t.characters=="string")return J(t.characters);if(Array.isArray(t.cast)||typeof t.cast=="string")return J(t.cast);if(t.result!==void 0)return J(t.result);if(t.data!==void 0)return J(t.data);if(Array.isArray(t.items))return J(t.items);const r=Object.values(t).filter(n=>n&&typeof n=="object");for(const n of r){const l=J(n);if(l.length>0)return l}}return[]},Te=(s,t)=>{if(s==null)return t;if(typeof s=="string")try{const r=JSON.parse(s);return r!=null?r:t}catch(r){return console.warn("Failed to parse JSON field from API:",r),t}return typeof s=="object"?s:t},Js=s=>Te(s,{}),we=s=>{var t,r,n,l,c,u,x,N,p,v,_,C,P;return{id:s.id,name:(t=s.name)!=null?t:"",character_name:(r=s.character_name)!=null?r:"",role:(n=s.role)!=null?n:"",about:(l=s.about)!=null?l:"",personality:(c=s.personality)!=null?c:"",age_range:(u=s.age_range)!=null?u:void 0,work_mode:(x=s.work_mode)!=null?x:void 0,persona:(N=s.persona)!=null?N:"",backstory:(p=s.backstory)!=null?p:"",voice:(v=s.voice)!=null?v:"",emotional_range:Te(s.emotional_range,[]),perfect_fields:Js(s.perfect_fields),isPerfect:(_=s.is_perfect)!=null?_:!1,is_muted:(C=s.is_muted)!=null?C:!1,description:(P=s.description)!=null?P:"",personality_tags:Te(s.personality_tags,[])}};class Rs{constructor(){this.token=null,this.token=localStorage.getItem("auth_token")}request(n){return m(this,arguments,function*(t,r={}){var v;const l=g({"Content-Type":"application/json"},r.headers);this.token&&(l.Authorization=`Bearer ${this.token}`);const c=t.startsWith("/ai/");let u;if(r.body&&typeof r.body=="string")try{u=JSON.parse(r.body)}catch(_){u=r.body}let x;try{x=yield fetch(`${Fs}${t}`,j(g({},r),{headers:l}))}catch(_){throw c&&rs({endpoint:t,status:0,requestBody:u,responseBody:null,error:_ instanceof Error?_.message:"Network error"}),_}const N=yield x.text();let p=null;if(N)try{p=JSON.parse(N)}catch(_){console.warn("API response was not valid JSON",{endpoint:t,method:r.method||"GET",error:_})}if(c&&rs({endpoint:t,status:x.status,requestBody:u,responseBody:p!=null?p:N,model:(v=p==null?void 0:p.metadata)==null?void 0:v.model,error:x.ok?void 0:(p==null?void 0:p.error)||(p==null?void 0:p.message)||N||x.statusText}),!x.ok){const _=(p==null?void 0:p.error)||(p==null?void 0:p.message)||N||x.statusText||"Request failed";throw new Error(_)}return p!=null?p:N||null})}register(t,r,n){return m(this,null,function*(){const l=yield this.request("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:r,full_name:n,terms:"true"})});return this.token=l.token,localStorage.setItem("auth_token",l.token),l.user})}login(t,r){return m(this,null,function*(){const n=yield this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:r})});return this.token=n.token,localStorage.setItem("auth_token",n.token),n.user})}getCurrentUser(){return m(this,null,function*(){if(!this.token)return null;try{return yield this.request("/auth/me")}catch(t){return this.logout(),null}})}updatePreferences(t){return m(this,null,function*(){return this.request("/auth/preferences",{method:"PATCH",body:JSON.stringify(t)})})}logout(){this.token=null,localStorage.removeItem("auth_token")}get(t){return m(this,null,function*(){return this.request(t,{method:"GET"})})}post(t,r){return m(this,null,function*(){return this.request(t,{method:"POST",body:r?JSON.stringify(r):void 0})})}put(t,r){return m(this,null,function*(){return this.request(t,{method:"PUT",body:r?JSON.stringify(r):void 0})})}delete(t){return m(this,null,function*(){return this.request(t,{method:"DELETE"})})}getBrands(){return m(this,null,function*(){const t=yield this.request("/brands");return Array.isArray(t==null?void 0:t.brands)?t.brands.map(ce):[]})}createBrand(t){return m(this,null,function*(){var l;const r=as(t),n=yield this.request("/brands",{method:"POST",body:JSON.stringify(r)});return ce((l=n==null?void 0:n.brand)!=null?l:n)})}updateBrand(t,r){return m(this,null,function*(){var c;console.log("ðŸ”§ updateBrand called with updates:",r);const n=as(r);if(console.log("ðŸ”§ updateBrand prepared payload:",n),Object.keys(n).length===0)return console.warn("âš ï¸  updateBrand: No fields in payload, skipping API call"),null;const l=yield this.request(`/brands/${t}`,{method:"PUT",body:JSON.stringify(n)});return console.log("ðŸ”§ updateBrand API response:",l),ce((c=l==null?void 0:l.brand)!=null?c:l)})}getBrandTokenUsage(t,r){return m(this,null,function*(){const n=new URLSearchParams;r&&n.set("month",r);const l=n.toString()?`?${n.toString()}`:"";return this.request(`/brands/${t}/token-usage${l}`)})}archiveBrand(t){return m(this,null,function*(){var n;const r=yield this.request(`/brands/${t}/archive`,{method:"PUT"});return ce((n=r==null?void 0:r.brand)!=null?n:r)})}unarchiveBrand(t){return m(this,null,function*(){var n;const r=yield this.request(`/brands/${t}/unarchive`,{method:"PUT"});return ce((n=r==null?void 0:r.brand)!=null?n:r)})}getEvents(t){return m(this,null,function*(){const r=yield this.request(`/events/brand/${t}`);return Array.isArray(r)?r.map(Ne):[]})}createEvent(t){return m(this,null,function*(){const r=ns(t),n=yield this.request("/events",{method:"POST",body:JSON.stringify(r)});return Ne(n)})}updateEvent(t,r){return m(this,null,function*(){const n=ns(r),l=yield this.request(`/events/${t}`,{method:"PUT",body:JSON.stringify(n)});return Ne(l)})}deleteEvent(t){return m(this,null,function*(){return this.request(`/events/${t}`,{method:"DELETE"})})}getContent(t,r){return m(this,null,function*(){const n=r?`?month=${r}`:"";return this.request(`/content/${t}${n}`)})}createContent(t){return m(this,null,function*(){return this.request("/content",{method:"POST",body:JSON.stringify(t)})})}updateContent(t,r){return m(this,null,function*(){return this.request(`/content/${t}`,{method:"PUT",body:JSON.stringify(r)})})}deductTokens(t){return m(this,null,function*(){return this.request("/tokens/deduct",{method:"POST",body:JSON.stringify({amount:t})})})}generateCharacters(t,r,n,l){return m(this,null,function*(){return this.request("/ai/generate-characters",{method:"POST",body:JSON.stringify({brandContext:t,characterCount:r,existingCharacters:n,model:l})})})}resolveCast(t,r,n){return m(this,null,function*(){return this.request("/ai/resolve-cast",{method:"POST",body:JSON.stringify({brandContext:t,userCharacters:r,model:n})})})}prefillNarrative(t,r){return m(this,null,function*(){return this.request("/ai/prefill-narrative",{method:"POST",body:JSON.stringify({brandContext:t,preferredModel:r})})})}generateMonthlyTheme(t,r,n,l,c,u){return m(this,null,function*(){return this.request("/ai/generate-monthly-theme",{method:"POST",body:JSON.stringify({brandContext:t,month:r,events:n,model:l,brandId:c,themePrompt:u})})})}generateMonthlyPlot(t,r,n,l,c,u,x){return m(this,null,function*(){return this.request("/ai/generate-monthly-plot",{method:"POST",body:JSON.stringify({brandContext:t,theme:r,month:n,events:l,themePrompt:c,model:u,brandId:x})})})}generateWeeklySubplot(t){return m(this,null,function*(){return this.request("/ai/generate-weekly-subplot",{method:"POST",body:JSON.stringify(t)})})}generateCalendarEntry(t,r,n,l){return m(this,null,function*(){return this.request("/ai/generate-calendar-entry",{method:"POST",body:JSON.stringify({brandContext:t,date:r,context:n,model:l})})})}refineCharacterField(t,r,n,l,c){return m(this,null,function*(){return this.request("/ai/refine-character-field",{method:"POST",body:JSON.stringify({brandContext:t,field:r,character:n,characters:l,model:c})})})}expandBriefRequest(t){return m(this,null,function*(){return this.request("/ai/expand-brief",{method:"POST",body:JSON.stringify(t)})})}refineContentRequest(t){return m(this,null,function*(){return this.request("/ai/refine-content",{method:"POST",body:JSON.stringify(t)})})}chatWithAndora(t,r,n,l){return m(this,null,function*(){return this.request("/ai/chat",{method:"POST",body:JSON.stringify({brandContext:t,message:r,characters:n,model:l})})})}createCharacter(t){return m(this,null,function*(){const r=yield this.request("/characters",{method:"POST",body:JSON.stringify(t)});return we(r.character)})}updateCharacter(t,r){return m(this,null,function*(){console.log("ðŸ” apiClient.updateCharacter SENDING:",{characterId:t,hasCharacterName:"character_name"in r,characterNameValue:r.character_name,updateKeys:Object.keys(r)});const n=yield this.request(`/characters/${t}`,{method:"PUT",body:JSON.stringify(r)});return console.log("ðŸ” apiClient.updateCharacter RECEIVED:",{hasCharacterName:"character_name"in n.character,characterNameValue:n.character.character_name}),we(n.character)})}toggleCharacterMute(t){return m(this,null,function*(){return(yield this.request(`/characters/${t}/mute`,{method:"PUT"})).character})}deleteCharacter(t){return m(this,null,function*(){return this.request(`/characters/${t}`,{method:"DELETE"})})}getCharacters(t){return m(this,null,function*(){const r=yield this.request(`/characters/brand/${t}`);return(Array.isArray(r==null?void 0:r.characters)?r.characters:[]).map(we)})}generateCastWithAI(t,r,n){return m(this,null,function*(){var u,x,N,p;const l=yield this.request("/ai/resolve-cast",{method:"POST",body:JSON.stringify({brandContext:t,userCharacters:r,model:n})}),c=J((x=(u=l==null?void 0:l.characters)!=null?u:l==null?void 0:l.cast)!=null?x:l);return j(g({},typeof l=="object"?l:{}),{characters:c,rawCharacters:(p=(N=l==null?void 0:l.characters)!=null?N:l==null?void 0:l.cast)!=null?p:l})})}getUnembeddedEvents(t,r,n){return m(this,null,function*(){return this.request(`/events/brand/${t}/unembedded/${r}/${n}`)})}embedEventsIntoWeek(t,r,n,l,c=!1){return m(this,null,function*(){return this.request(`/embed-events/${t}/${r}/${n}/${l}`,{method:"POST",body:JSON.stringify({forceReflow:c})})})}undoEmbedEvents(t,r,n,l){return m(this,null,function*(){return this.request(`/undo-embed-events/${t}/${r}/${n}/${l}`,{method:"POST"})})}sendContentBrief(t,r,n){return m(this,null,function*(){return this.request("/email/send-brief",{method:"POST",body:JSON.stringify({teamMemberEmails:t,contentData:r,brandName:n})})})}observeNarrative(t){return m(this,null,function*(){return this.request("/ai/observe-narrative",{method:"POST",body:JSON.stringify(t)})})}observeCharacters(t){return m(this,null,function*(){return this.request("/ai/observe-characters",{method:"POST",body:JSON.stringify(t)})})}}const ee=new Rs,it=Object.freeze(Object.defineProperty({__proto__:null,apiClient:ee},Symbol.toStringTag,{value:"Module"}));function ae(...s){return $s(s)}const T=x=>{var N=x,{variant:s="primary",size:t="md",loading:r=!1,className:n,disabled:l,children:c}=N,u=ue(N,["variant","size","loading","className","disabled","children"]);const p="font-medium rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",v={primary:"bg-slate-900 text-white hover:bg-slate-700 focus:ring-slate-400",secondary:"bg-accent-400 text-slate-900 hover:bg-accent-300 focus:ring-accent-200",outline:"border border-slate-300 text-slate-900 hover:bg-slate-100 focus:ring-slate-200",ghost:"text-slate-600 hover:bg-slate-100 focus:ring-slate-200",danger:"bg-red-600 text-white hover:bg-red-500 focus:ring-red-400"},_={sm:"px-3 py-1.5 text-sm",md:"px-5 py-2.5 text-sm",lg:"px-6 py-3 text-base"};return e.jsx("button",j(g({className:ae(p,v[s],_[t],r&&"cursor-wait",n),disabled:l||r},u),{children:r?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2 opacity-80"}),"Processing..."]}):c}))},D=p=>{var v=p,{label:s,error:t,helperText:r,maxLength:n,showCharCount:l=!1,className:c,value:u,type:x}=v,N=ue(v,["label","error","helperText","maxLength","showCharCount","className","value","type"]);const _=typeof u=="string"?u.length:0,[C,P]=Z.useState(!1),h=x==="password";return e.jsxs("div",{className:"space-y-1",children:[s&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:s}),l&&n&&e.jsxs("span",{className:ae("text-xs",_>n*.9?"text-accent-400":"text-slate-500"),children:[_,"/",n]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",g({className:ae("w-full px-3 py-2 glass-effect rounded-lg","focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-300","disabled:bg-white/60 disabled:text-slate-400","text-primary-900 placeholder-slate-400","transition-all duration-300",t&&"border-red-400/50 focus:ring-red-500",h&&"pr-10",c),type:h&&C?"text":x,value:u,maxLength:n},N)),h&&e.jsx("button",{type:"button",onClick:()=>P(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-500 hover:text-primary-500 transition-colors",children:C?e.jsx(ks,{size:16}):e.jsx(Ss,{size:16})})]}),t&&e.jsx("p",{className:"text-sm text-red-400",children:t}),r&&!t&&e.jsx("p",{className:"text-sm text-slate-500",children:r})]})},he=N=>{var p=N,{label:s,error:t,helperText:r,maxLength:n,showCharCount:l=!1,className:c,value:u}=p,x=ue(p,["label","error","helperText","maxLength","showCharCount","className","value"]);const v=typeof u=="string"?u.length:0;return e.jsxs("div",{className:"space-y-1",children:[s&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:s}),l&&n&&e.jsxs("span",{className:ae("text-xs",v>n*.9?"text-accent-400":"text-slate-500"),children:[v,"/",n]})]}),e.jsx("textarea",g({className:ae("w-full px-3 py-2 glass-effect rounded-lg","focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-300","disabled:bg-white/60 disabled:text-slate-400","text-primary-900 placeholder-slate-400","resize-vertical min-h-[100px]","transition-all duration-300",t&&"border-red-400/50 focus:ring-red-500",c),value:u,maxLength:n},x)),t&&e.jsx("p",{className:"text-sm text-red-400",children:t}),r&&!t&&e.jsx("p",{className:"text-sm text-slate-500",children:r})]})},te=1500,Q=s=>s===0?0:Math.max(1,Math.round(s/te)),ve=[{id:"free",name:"Free",price_ngn:0,price_usd:0,tokens:2500,max_brands:1,features:["AI-assisted idea prompts","Community templates","Single brand workspace"]},{id:"starter",name:"Starter",price_ngn:5e3,price_usd:Q(5e3),tokens:15e3,max_brands:1,features:["Automated content calendar","AI content generation","Email support"]},{id:"basic",name:"Basic",price_ngn:1e4,price_usd:Q(1e4),tokens:34e3,max_brands:1,features:["Advanced AI workflows","Content calendar insights","Team collaboration (2 seats)"]},{id:"pro",name:"Pro",price_ngn:25e3,price_usd:Q(25e3),tokens:9e4,max_brands:3,features:["AI chat copilot","Up to 3 brands","Priority support"],is_popular:!0},{id:"standard",name:"Standard",price_ngn:5e4,price_usd:Q(5e4),tokens:2e5,max_brands:3,features:["Advanced analytics","Campaign performance reports","Priority support"],is_popular:!0},{id:"premium",name:"Premium",price_ngn:125e3,price_usd:Q(125e3),tokens:6e5,max_brands:-1,features:["Unlimited brands","Full AI suite","Premium success manager"]},{id:"ultimate",name:"Ultimate",price_ngn:25e4,price_usd:Q(25e4),tokens:13e5,max_brands:-1,features:["Unlimited brands","Advanced AI automations","Agency-focused tooling"]},{id:"enterprise",name:"Enterprise",price_ngn:5e5,price_usd:Q(5e5),tokens:28e5,max_brands:-1,features:["Unlimited everything","Custom AI models","Dedicated enterprise support"]}];ve.reduce((s,t)=>(s[t.id]=t,s),{});const lt={taglines:300,about:1e3,vision:600,mission:600,products:2e3,persona:1e3,buyer_profile:1e3,colors:250,brand_hq_location:150,narrative_why:800,narrative_problem:800,narrative_solution:800,narrative_cta:400,narrative_failure:600,narrative_success:600},ot=["Facebook","Instagram","X","LinkedIn","TikTok","YouTube","Pinterest","Blog","Email","WhatsApp"],ct=["Graphic Design","Image Carousel","Reel (Interview)","Reel (Short Play)","Blog Post","Infographic","Text & Image","Video","Story","Article","Poll","Live Stream"],Ae=({isOpen:s,onClose:t,title:r,children:n,size:l="md"})=>{const c=w.useRef(null),u=w.useRef(!1);if(w.useEffect(()=>(s&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[s]),w.useEffect(()=>{if(typeof window=="undefined")return;if(!s){c.current=null,u.current=!1;return}const N=`modal-${Date.now()}`;c.current=N;try{window.history.pushState(j(g({},window.history.state),{__modalId:N}),"")}catch(_){console.warn("Failed to push modal history state",_)}const p=()=>{c.current&&(c.current=null,u.current||(u.current=!0,t()))},v=_=>{if(_.key==="Escape"){if(_.preventDefault(),u.current)return;if(u.current=!0,c.current)try{window.history.back();return}catch(C){console.warn("Failed to navigate back from modal history state",C)}t()}};return window.addEventListener("popstate",p),window.addEventListener("keydown",v),()=>{if(window.removeEventListener("popstate",p),window.removeEventListener("keydown",v),c.current&&!u.current)try{u.current=!0,window.history.back()}catch(_){console.warn("Failed to clean up modal history state",_),t()}c.current=null,u.current=!1}},[s,t]),!s)return null;const x={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-dark-900/80 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:ae("relative inline-block w-full p-6 my-8 overflow-hidden text-left align-middle transition-all transform glass-effect shadow-2xl rounded-2xl border border-primary-500/20",x[l]),children:[r&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 shimmer-text",children:r}),e.jsx("button",{onClick:t,className:"p-1 text-slate-500 hover:text-primary-500 transition-colors rounded-lg hover:bg-white/70",children:e.jsx(Cs,{size:20})})]}),e.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:n})]})]})})},Ws="https://andorabrand.me/api",Ys=()=>{const s=localStorage.getItem("auth_token");if(!s)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${s}`}},is=s=>{if(!s)return;const t=new Date(s);return Number.isNaN(t.getTime())?void 0:t},ls=s=>{var r,n;const t=l=>Array.isArray(l)?l.map(c=>String(c)):typeof l=="string"?l.split(/\r?\n/).map(c=>c.trim()).filter(Boolean):[];return{id:s.id,name:s.name,price_ngn:Number(s.price_ngn)||0,price_usd:Number(s.price_usd)||0,tokens:Number(s.tokens)||0,max_brands:typeof s.max_brands=="number"?s.max_brands:Number(s.max_brands)||0,features:t(s.features),is_popular:(r=s.is_popular)!=null?r:!1,sort_order:(n=s.sort_order)!=null?n:null}},os={default_currency:"NGN",exchange_rate:te},cs=s=>s.reduce((t,r)=>(t[r.id]={tokens:r.tokens,max_brands:r.max_brands},t),{});class Vs{request(n){return m(this,arguments,function*(t,r={}){try{const l=yield fetch(`${Ws}${t}`,j(g({},r),{headers:g(g({},r.headers||{}),Ys())}));if(!l.ok){const c=yield l.json().catch(()=>({})),u=c.error||c.message||"Admin request failed";throw new Error(u)}return l.status===204?void 0:l.json()}catch(l){throw console.error(`Admin request failed (${t}):`,l),l}})}withFallbackPlans(t){return t&&t.length>0?t:ve}getAllUsers(){return m(this,null,function*(){try{return(yield this.request("/admin/users")).users.map(r=>({user_id:r.id,email:r.email,plan:r.plan,tokens:r.tokens,plan_expiry:is(r.plan_expiry),last_token_reset:is(r.last_token_reset),preferred_ai_provider:r.preferred_ai_provider||"openai",preferred_ai_model:r.preferred_ai_model||"gpt-4o",timezone:r.timezone}))}catch(t){return console.error("Error fetching users:",t),[]}})}updateUser(t,r){return m(this,null,function*(){try{const n={};return r.plan&&(n.plan=r.plan),typeof r.tokens=="number"&&(n.tokens=r.tokens),"plan_expiry"in r&&(r.plan_expiry===null?n.plan_expiry=null:r.plan_expiry&&(n.plan_expiry=r.plan_expiry instanceof Date?r.plan_expiry.toISOString():new Date(r.plan_expiry).toISOString())),r.preferred_ai_provider&&(n.preferred_ai_provider=r.preferred_ai_provider),r.preferred_ai_model&&(n.preferred_ai_model=r.preferred_ai_model),Object.keys(n).length===0||(yield this.request(`/admin/users/${t}`,{method:"PATCH",body:JSON.stringify(n)})),!0}catch(n){return console.error("Error updating user:",n),!1}})}deleteUser(t){return m(this,null,function*(){try{return yield this.request(`/admin/users/${t}`,{method:"DELETE"}),!0}catch(r){return console.error("Error deleting user:",r),!1}})}addTokensToUser(t,r){return m(this,null,function*(){try{return yield this.request(`/admin/users/${t}/tokens`,{method:"POST",body:JSON.stringify({amount:r})}),!0}catch(n){return console.error("Error adding tokens:",n),!1}})}resetAllUserTokens(t,r){return m(this,null,function*(){try{return yield this.request("/admin/tokens/reset",{method:"POST",body:JSON.stringify({plan:t,amount:r})}),!0}catch(n){return console.error("Error resetting tokens:",n),!1}})}getUserStats(){return m(this,null,function*(){try{return(yield this.request("/admin/stats")).stats}catch(t){return console.error("Error fetching stats:",t),{total_users:0,free_users:0,paid_users:0,total_brands:0,total_events:0,total_content:0,tokens_distributed:0}}})}getAdminConfig(){return m(this,null,function*(){var t,r;try{const n=yield this.request("/admin/config"),l=this.withFallbackPlans((t=n.pricing_plans)==null?void 0:t.map(ls)),c=cs(l);return{available_models:n.available_models,pricing_plans:l,currency_settings:(r=n.currency_settings)!=null?r:os,system_limits:c}}catch(n){console.error("Error loading admin config:",n);const l=ve;return{available_models:[{id:"gpt-4o",name:"GPT-4o",provider:"openai",enabled:!0,description:"Flagship reasoning model for production workloads."},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"openai",enabled:!0,description:"Cost-efficient GPT-4o variant for lightweight tasks."},{id:"o3-mini",name:"o3 Mini",provider:"openai",enabled:!0,description:"Optimized reasoning model for structured planning."},{id:"claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"claude",enabled:!0,description:"Anthropicâ€™s balanced flagship model for creative work."},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"claude",enabled:!0,description:"High-performing model for long-form strategic content."}],pricing_plans:l,currency_settings:os,system_limits:cs(l)}}})}updateAdminConfig(t){return m(this,null,function*(){try{return t.available_models&&(yield this.request("/admin/models",{method:"PUT",body:JSON.stringify({models:t.available_models})})),t.currency_settings&&(yield this.request("/admin/config/currency",{method:"PUT",body:JSON.stringify(t.currency_settings)})),!0}catch(r){return console.error("Error updating admin config:",r),!1}})}updateSystemLimits(t){return m(this,null,function*(){try{return yield this.request("/admin/config/system-limits",{method:"PUT",body:JSON.stringify({limits:t})}),!0}catch(r){return console.error("Error updating system limits:",r),!1}})}updatePricingPlan(t,r){return m(this,null,function*(){try{const n=yield this.request(`/admin/pricing/${t}`,{method:"PUT",body:JSON.stringify(r)});return ls(n.plan)}catch(n){return console.error("Error updating pricing plan:",n),null}})}}const K=new Vs,Ks=s=>({brandName:"The name of the brand",industry:"The industry/sector the brand operates in",tone:"The desired tone of voice (e.g., professional, casual)",targetAudience:"Who the content is for",characterName:"Name of the brand character/persona",platform:"Social media platform (e.g., Instagram, LinkedIn)",date:"Current or target date",theme:"Monthly or weekly theme",eventTitle:"Name of the event",personality:"Brand personality traits",voice:"Character's unique voice attributes",contentType:"Type of content (post, story, video)",monthlyTheme:"The overarching monthly theme",weeklySubplot:"The weekly storyline",brandGoals:"Brand's objectives and goals",channels:"Active marketing channels",agentCapabilities:"List of available agent capabilities",availableModels:"AI models available for use"})[s]||"Custom variable",Hs=()=>{const[s,t]=w.useState([]),[r,n]=w.useState(null),[l,c]=w.useState([]),[u,x]=w.useState(null),[N,p]=w.useState(!1),[v,_]=w.useState(!1),[C,P]=w.useState(!1),[h,E]=w.useState(null),[q,R]=w.useState(7);w.useEffect(()=>{$()},[]),w.useEffect(()=>{r&&(W(r.agentName),Y(r.agentName,q))},[r,q]);const $=()=>m(void 0,null,function*(){p(!0);try{const o=yield ee.get("/agent-config");t(o),o.length>0&&!r&&n(o[0])}catch(o){console.error("Error loading agents:",o)}finally{p(!1)}}),W=o=>m(void 0,null,function*(){try{const k=yield ee.get(`/agent-config/${o}/prompts`);c(k)}catch(k){console.error("Error loading prompts:",k)}}),Y=(o,k)=>m(void 0,null,function*(){try{const i=yield ee.get(`/agent-config/${o}/performance?daysBack=${k}`);x(i)}catch(i){console.error("Error loading performance:",i)}}),H=()=>m(void 0,null,function*(){if(r)try{yield ee.put(`/agent-config/${r.agentName}`,{displayName:r.displayName,description:r.description,isActive:r.isActive,defaultModel:r.defaultModel,fallbackModel:r.fallbackModel,maxTokens:r.maxTokens,temperature:r.temperature,capabilities:r.capabilities,metadata:r.metadata}),alert("Agent configuration saved successfully!"),_(!1),$()}catch(o){console.error("Error saving agent config:",o),alert("Failed to save agent configuration")}}),V=()=>m(void 0,null,function*(){if(h)try{yield ee.post(`/agent-config/${h.agentName}/prompts`,{promptKey:h.promptKey,promptTemplate:h.promptTemplate,promptType:h.promptType,variables:h.variables,notes:h.notes,createNewVersion:!1}),alert("Prompt saved successfully!"),P(!1),E(null),r&&W(r.agentName)}catch(o){console.error("Error saving prompt:",o),alert("Failed to save prompt")}}),y=()=>m(void 0,null,function*(){try{yield ee.post("/agent-config/cache/clear"),alert("All caches cleared successfully!")}catch(o){console.error("Error clearing cache:",o),alert("Failed to clear caches")}}),U=o=>({orchestrator:"Master agent that coordinates all other agents and routes tasks to specialist agents based on complexity and capabilities. Handles multi-step workflows and ensures consistency across generated content.",sceneWriter:"Specialized agent for writing engaging daily content scenes. Creates narratives from character perspectives, follows weekly subplots and monthly themes, and adapts tone for different platforms.",subplotWriter:"Generates compelling weekly subplots and narrative arcs. Incorporates events and cultural moments to create story hooks that span multiple days while advancing monthly themes.",themeGenerator:"Creates monthly themes and overarching narratives aligned with brand strategy. Develops compelling narratives that resonate with target audience and support brand goals.",eventAnalyzer:"Analyzes events and generates creative content hooks. Identifies relevant events for brand storytelling and optimizes calendar planning based on event significance and audience appeal.",characterGenerator:"Generates brand characters and personas. Creates diverse character profiles with unique personalities, voices, and perspectives that align with brand identity.",calendarGenerator:"Plans and generates content calendars. Distributes content across channels and dates while balancing themes, events, and narrative arcs.",weeklyDistribution:"Distributes weekly content across days and platforms. Ensures optimal posting schedule and balances content types for maximum engagement.",seasonPlot:"Creates seasonal narrative arcs and long-term storylines. Plans multi-month story progressions that align with brand evolution and market trends."})[o]||"AI agent for automated content generation and brand storytelling tasks.",z=(o,k)=>{var b;return((b={orchestrator:{system:`You are the Orchestrator Agent, responsible for coordinating AI agents to generate brand content.

Your responsibilities:
1. Analyze incoming requests and determine which specialist agent(s) to use
2. Gather minimal required context from the Brand Context Engine
3. Route tasks to appropriate agents based on complexity and capabilities
4. Coordinate multi-step workflows
5. Ensure consistency across all generated content

Brand: {{brandName}}
Available Agents: {{agentCapabilities}}
Available Models: {{availableModels}}`,user:`Task: {{taskDescription}}

Context:
- Brand: {{brandName}}
- Industry: {{industry}}
- Target Audience: {{targetAudience}}

Please analyze this request and determine the best approach.`},sceneWriter:{system:`You are the Scene Writer Agent, specialized in creating engaging daily content.

Your mission:
- Write content that embodies the brand voice and personality
- Follow the weekly subplot and monthly theme
- Create narratives from character perspectives
- Adapt tone and style for different platforms

Brand Voice: {{brandVoice}}
Character: {{characterName}}
Platform: {{platform}}
Content Type: {{contentType}}`,user:`Create content for:

Date: {{date}}
Theme: {{monthlyTheme}}
Subplot: {{weeklySubplot}}
Event: {{eventTitle}}

Character Perspective: {{characterName}}
Platform: {{platform}}
Tone: {{tone}}

Generate engaging content that follows the theme and subplot while incorporating the event.`},subplotWriter:{system:`You are the Subplot Writer Agent, responsible for creating weekly narrative arcs.

Your responsibilities:
- Generate compelling weekly subplots that advance monthly themes
- Incorporate events and cultural moments
- Create story hooks that span multiple days
- Ensure narrative coherence and progression

Monthly Theme: {{monthlyTheme}}
Brand: {{brandName}}
Events: {{events}}`,user:`Generate a weekly subplot for:

Week: {{weekNumber}}
Monthly Theme: {{monthlyTheme}}
Key Events: {{events}}
Brand Goals: {{brandGoals}}

Create a narrative arc that ties events together and advances the monthly theme.`},themeGenerator:{system:`You are the Theme Generator Agent, creating monthly themes and overarching narratives.

Your mission:
- Develop compelling monthly themes aligned with brand strategy
- Create narratives that resonate with target audience
- Consider seasonal trends and cultural moments
- Ensure themes support brand goals

Brand: {{brandName}}
Industry: {{industry}}
Personality: {{personality}}`,user:`Generate a monthly theme for:

Month: {{month}}
Brand Goals: {{brandGoals}}
Target Audience: {{targetAudience}}
Key Events: {{events}}

Create a compelling theme that aligns with brand strategy and resonates with the audience.`},eventAnalyzer:{system:`You are the Event Analyzer Agent, analyzing events and generating content hooks.

Your capabilities:
- Identify relevant events for brand storytelling
- Generate creative content hooks from events
- Analyze event significance and audience appeal
- Optimize calendar planning

Brand: {{brandName}}
Industry: {{industry}}`,user:`Analyze these events and generate content hooks:

Events: {{events}}
Brand: {{brandName}}
Target Audience: {{targetAudience}}
Channels: {{channels}}

Provide content ideas and recommendations.`},characterGenerator:{system:`You are the Character Generator Agent, creating brand characters and personas.

Your mission:
- Generate diverse character profiles that embody brand values
- Create unique personalities, voices, and perspectives
- Ensure characters align with brand identity and target audience
- Develop memorable, relatable personas for storytelling

Brand: {{brandName}}
Industry: {{industry}}
Personality: {{personality}}`,user:`Generate brand characters for:

Brand: {{brandName}}
Industry: {{industry}}
Target Audience: {{targetAudience}}
Brand Personality: {{personality}}
Number of Characters: {{characterCount}}

Create diverse, engaging characters that can tell the brand story from different perspectives.`},calendarGenerator:{system:`You are the Calendar Generator Agent, planning content distribution.

Your responsibilities:
- Create balanced content calendars across channels
- Distribute themes, subplots, and events optimally
- Ensure consistent posting schedule
- Balance content types and formats

Brand: {{brandName}}
Channels: {{channels}}`,user:`Generate a content calendar for:

Month: {{month}}
Channels: {{channels}}
Monthly Theme: {{monthlyTheme}}
Key Events: {{events}}
Posting Frequency: {{frequency}}

Create an optimized posting schedule that maximizes engagement.`},weeklyDistribution:{system:`You are the Weekly Distribution Agent, scheduling content across days.

Your mission:
- Distribute weekly content across optimal posting times
- Balance content types (educational, entertaining, promotional)
- Ensure narrative flow throughout the week
- Maximize audience engagement

Weekly Subplot: {{weeklySubplot}}
Platforms: {{platforms}}`,user:`Distribute content for this week:

Week: {{weekNumber}}
Subplot: {{weeklySubplot}}
Events: {{events}}
Platforms: {{platforms}}
Brand: {{brandName}}

Create a posting schedule that tells a cohesive weekly story.`},seasonPlot:{system:`You are the Season Plot Agent, creating long-term narrative arcs.

Your capabilities:
- Design multi-month story progressions
- Plan seasonal themes and transitions
- Align narratives with brand evolution
- Consider market trends and audience needs

Brand: {{brandName}}
Industry: {{industry}}`,user:`Create a seasonal plot for:

Season/Quarter: {{season}}
Brand Goals: {{brandGoals}}
Market Trends: {{trends}}
Previous Season Summary: {{previousSeason}}

Develop a compelling multi-month narrative arc.`}}[o])==null?void 0:b[k])||`You are an AI assistant for {{brandName}}.

Your task: {{taskDescription}}

Brand Context:
- Industry: {{industry}}
- Target Audience: {{targetAudience}}
- Tone: {{tone}}

Provide helpful, brand-aligned output.`},F=["gpt-4o","gpt-4o-mini","gpt-5","claude-sonnet-4","claude-sonnet-4.5","claude-opus-4","claude-haiku-3.5"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary-900",children:"Agent Configuration"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{onClick:y,size:"sm",variant:"outline",children:[e.jsx(ge,{size:16,className:"mr-2"}),"Clear Caches"]}),e.jsxs(T,{onClick:$,loading:N,size:"sm",children:[e.jsx(ge,{size:16,className:"mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"AI Agents"}),e.jsx("div",{className:"space-y-2",children:s.map(o=>e.jsx("button",{onClick:()=>n(o),className:`w-full text-left p-3 rounded-lg transition-all ${(r==null?void 0:r.id)===o.id?"bg-gradient-to-r from-primary-600 to-purple-600 text-white":"bg-white/60 hover:bg-white/80 text-primary-900"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.displayName}),e.jsx("div",{className:"text-xs opacity-80",children:o.agentName})]}),!o.isActive&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-500/20 rounded",children:"Disabled"})]})},o.id))})]}),r&&e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Configuration"}),e.jsxs(T,{size:"sm",onClick:()=>_(!0),children:[e.jsx(re,{size:16,className:"mr-2"}),"Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Status:"}),e.jsx("span",{className:`ml-2 font-medium ${r.isActive?"text-green-600":"text-red-600"}`,children:r.isActive?"Active":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Default Model:"}),e.jsx("span",{className:"ml-2 font-medium text-primary-900",children:r.defaultModel})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Fallback Model:"}),e.jsx("span",{className:"ml-2 font-medium text-primary-900",children:r.fallbackModel||"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Max Tokens:"}),e.jsx("span",{className:"ml-2 font-medium text-primary-900",children:r.maxTokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Temperature:"}),e.jsx("span",{className:"ml-2 font-medium text-primary-900",children:r.temperature})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-slate-500",children:"Capabilities:"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.capabilities.map((o,k)=>e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded text-xs",children:o},k))})]})]}),r.description&&e.jsx("p",{className:"mt-4 text-sm text-slate-600 italic",children:r.description})]}),u&&e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Performance Analytics"}),e.jsxs("select",{value:q,onChange:o=>R(parseInt(o.target.value)),className:"px-3 py-1 glass-effect rounded text-sm",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-effect p-4 rounded border border-primary-200/40",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ms,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Total Calls"})]}),e.jsx("div",{className:"text-xl font-bold text-primary-900",children:u.totalCalls})]}),e.jsxs("div",{className:"glass-effect p-4 rounded border border-green-200/40",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Success Rate"})]}),e.jsxs("div",{className:"text-xl font-bold text-green-900",children:[(u.successRate*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"glass-effect p-4 rounded border border-accent-200/40",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ts,{className:"w-4 h-4 text-accent-600"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Avg Time"})]}),e.jsxs("div",{className:"text-xl font-bold text-accent-900",children:[u.avgExecutionTime.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"glass-effect p-4 rounded border border-purple-200/40",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(As,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Total Cost"})]}),e.jsxs("div",{className:"text-xl font-bold text-purple-900",children:["$",u.totalCost.toFixed(4)]})]})]}),Object.keys(u.modelBreakdown).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Model Usage"}),e.jsx("div",{className:"space-y-2",children:Object.entries(u.modelBreakdown).map(([o,k])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary-800",children:o}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 h-2 bg-white/40 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-purple-500",style:{width:`${k/u.totalCalls*100}%`}})}),e.jsx("span",{className:"text-slate-500 w-12 text-right",children:k})]})]},o))})]})]}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Prompts"}),e.jsxs(T,{size:"sm",onClick:()=>{const o=z(r.agentName,"system"),k=o.match(/\{\{([^}]+)\}\}/g),i=k?[...new Set(k.map(b=>b.replace(/[{}]/g,"").trim()))]:[];E({id:"",agentName:r.agentName,promptType:"system",promptKey:"",promptTemplate:o,variables:i,version:1,isActive:!0}),P(!0)},children:[e.jsx(_e,{size:16,className:"mr-2"}),"Add Prompt"]})]}),e.jsx("div",{className:"space-y-3",children:l.length===0?e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No prompts configured"}):l.map(o=>e.jsx("div",{className:"glass-effect p-4 rounded border border-primary-200/40",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-primary-900",children:o.promptKey}),e.jsxs("span",{className:"text-xs text-slate-500",children:["v",o.version]}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary-100 text-primary-800 rounded",children:o.promptType})]}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:o.promptTemplate}),o.variables.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:o.variables.map((k,i)=>e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-accent-100 text-accent-800 rounded font-mono",children:`{{${k}}}`},i))})]}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>{E(o),P(!0)},children:e.jsx(re,{size:14})})]})},o.id))})]})]})]}),e.jsx(Ae,{isOpen:v,onClose:()=>_(!1),title:"Edit Agent Configuration",size:"lg",children:r&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 mb-2 flex items-center",children:[e.jsx(ps,{className:"w-4 h-4 mr-2 text-blue-600"}),"Agent Settings"]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Configure how this AI agent behaves. Changes take effect immediately for new requests."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Display Name"}),e.jsx(D,{value:r.displayName,onChange:o=>n(j(g({},r),{displayName:o.target.value})),placeholder:"e.g., Scene Writer Agent"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Friendly name shown in the interface"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),e.jsx("textarea",{value:r.description||U(r.agentName),onChange:o=>n(j(g({},r),{description:o.target.value})),className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500 border border-primary-200",rows:3,placeholder:U(r.agentName)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Help others understand this agent's purpose and capabilities"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[e.jsx(Es,{className:"w-4 h-4 mr-2 text-purple-600"}),"AI Model Configuration"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Default Model ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:r.defaultModel,onChange:o=>n(j(g({},r),{defaultModel:o.target.value})),className:"w-full px-3 py-2 glass-effect rounded-lg border border-purple-200 focus:border-purple-500",children:F.map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["ðŸ’¡ ",e.jsx("strong",{children:"gpt-4o"})," = balanced, ",e.jsx("strong",{children:"gpt-4o-mini"})," = fast/cheap"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fallback Model"}),e.jsxs("select",{value:r.fallbackModel||"",onChange:o=>n(j(g({},r),{fallbackModel:o.target.value||void 0})),className:"w-full px-3 py-2 glass-effect rounded-lg border border-purple-200 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"None"}),F.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Used if default model fails"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 mr-2 text-amber-600"}),"Performance Settings"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Max Tokens"}),e.jsx(D,{type:"number",value:r.maxTokens,onChange:o=>n(j(g({},r),{maxTokens:parseInt(o.target.value)||0})),min:"100",max:"200000",step:"100"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Maximum length of AI response (~4 chars = 1 token)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Temperature"}),e.jsx(D,{type:"number",step:"0.1",min:"0",max:"2",value:r.temperature,onChange:o=>n(j(g({},r),{temperature:parseFloat(o.target.value)||0}))}),e.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[e.jsx("strong",{children:"0 = focused"}),", ",e.jsx("strong",{children:"1 = balanced"}),", ",e.jsx("strong",{children:"2 = creative"})]})]})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:r.isActive,onChange:o=>n(j(g({},r),{isActive:o.target.checked})),className:"rounded border-green-300 bg-white text-green-600 focus:ring-green-500 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-800",children:"Agent is Active"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Enable this agent to handle requests"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(T,{variant:"ghost",onClick:()=>_(!1),children:"Cancel"}),e.jsxs(T,{onClick:H,children:[e.jsx(fe,{size:16,className:"mr-2"}),"Save Configuration"]})]})]})}),e.jsx(Ae,{isOpen:C,onClose:()=>{P(!1),E(null)},title:h!=null&&h.id?"Edit Prompt":"Add New Prompt",size:"xl",children:h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ“ How Prompts Work"}),e.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:["Prompts are instructions sent to AI models. Use ",e.jsx("code",{className:"px-1.5 py-0.5 bg-blue-100 rounded text-xs",children:"{{variableName}}"})," to insert dynamic content."]}),e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Example:"}),' "Generate content for ',e.jsx("code",{className:"px-1 bg-blue-100 rounded",children:"{{brandName}}"})," in the ",e.jsx("code",{className:"px-1 bg-blue-100 rounded",children:"{{industry}}"}),' industry."']})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Prompt Key ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(D,{value:h.promptKey,onChange:o=>E(j(g({},h),{promptKey:o.target.value})),placeholder:"e.g., system_prompt, scene_instruction",disabled:!!h.id}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unique identifier for this prompt"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Prompt Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h.promptType,onChange:o=>{const k=o.target.value;if(!h.id||!h.promptTemplate){const i=z(h.agentName,k),b=i.match(/\{\{([^}]+)\}\}/g),M=b?[...new Set(b.map(B=>B.replace(/[{}]/g,"").trim()))]:[];E(j(g({},h),{promptType:k,promptTemplate:i,variables:M}))}else E(j(g({},h),{promptType:k}))},className:"w-full px-3 py-2 glass-effect rounded-lg border border-primary-200 focus:border-primary-500 focus:ring-2 focus:ring-primary-200",children:[e.jsx("option",{value:"system",children:"System - Sets AI behavior/role"}),e.jsx("option",{value:"user",children:"User - Main task instruction"}),e.jsx("option",{value:"custom",children:"Custom - Special purpose"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"How the prompt is used. Changing this will load a template example."})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Prompt Template ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{const o=z(h.agentName,h.promptType),k=o.match(/\{\{([^}]+)\}\}/g),i=k?[...new Set(k.map(b=>b.replace(/[{}]/g,"").trim()))]:[];E(j(g({},h),{promptTemplate:o,variables:i}))},className:"text-xs px-2 py-1 bg-primary-100 hover:bg-primary-200 text-primary-700 rounded transition-colors",children:"Load Default Template"}),e.jsxs("span",{className:"text-xs text-slate-500",children:[h.promptTemplate.length," characters"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:h.promptTemplate,onChange:o=>{E(j(g({},h),{promptTemplate:o.target.value}));const k=o.target.value.match(/\{\{([^}]+)\}\}/g);if(k){const i=k.map(M=>M.replace(/[{}]/g,"").trim()),b=[...new Set(i)];E(j(g({},h),{promptTemplate:o.target.value,variables:b}))}},className:"w-full px-4 py-3 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono text-sm border border-primary-200",rows:12,placeholder:`You are an AI assistant helping with {{taskType}}.

Brand: {{brandName}}
Industry: {{industry}}
Tone: {{tone}}

Your task: {{userRequest}}`}),e.jsxs("div",{className:"absolute top-2 right-2 bg-white/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-slate-600",children:["Use ","{{variable}}"," for dynamic content"]})]}),e.jsxs("p",{className:"text-xs text-slate-600 mt-2",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Variables are automatically detected! Type ",e.jsx("code",{className:"px-1 bg-slate-100 rounded",children:"{{variableName}}"})," and it will be added to the list below."]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 flex items-center",children:[e.jsx(Os,{className:"w-4 h-4 mr-2 text-purple-600"}),"Variables Found in Prompt"]}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded",children:[h.variables.length," variable",h.variables.length!==1?"s":""]})]}),h.variables.length>0?e.jsx("div",{className:"space-y-2",children:h.variables.map((o,k)=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded px-3 py-2 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"text-sm font-mono text-purple-700 bg-purple-50 px-2 py-1 rounded",children:"{{"+o+"}}"}),e.jsx("span",{className:"text-xs text-slate-600",children:Ks(o)})]}),e.jsx("button",{onClick:()=>{const i=h.variables.filter((b,M)=>M!==k);E(j(g({},h),{variables:i}))},className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},k))}):e.jsxs("div",{className:"text-center py-4 text-slate-500 text-sm",children:["No variables detected. Add ","{{variableName}}"," to your prompt template above."]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200",children:[e.jsx("p",{className:"text-xs text-slate-600 mb-2",children:e.jsx("strong",{children:"Common variables you can use:"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["brandName","industry","tone","targetAudience","characterName","platform","date","theme","eventTitle"].map(o=>e.jsxs("button",{onClick:()=>{var B;const k=((B=document.querySelector("textarea"))==null?void 0:B.selectionStart)||h.promptTemplate.length,i=h.promptTemplate.substring(0,k),b=h.promptTemplate.substring(k),M=i+`{{${o}}}`+b;E(j(g({},h),{promptTemplate:M,variables:[...new Set([...h.variables,o])]}))},className:"text-xs px-2 py-1 bg-white border border-purple-200 text-purple-700 hover:bg-purple-50 rounded transition-colors",children:["+ ",o]},o))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:h.notes||"",onChange:o=>E(j(g({},h),{notes:o.target.value})),className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500 border border-primary-200",rows:2,placeholder:"Add any notes about when to use this prompt or how it works..."})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(T,{variant:"ghost",onClick:()=>{P(!1),E(null)},children:"Cancel"}),e.jsxs(T,{onClick:V,disabled:!h.promptKey||!h.promptTemplate,children:[e.jsx(fe,{size:16,className:"mr-2"}),"Save Prompt"]})]})]})})]})},Xs=()=>{const[s,t]=w.useState("posts"),[r,n]=w.useState([]),[l,c]=w.useState([]),[u,x]=w.useState([]),[N,p]=w.useState(!1),[v,_]=w.useState(null),[C,P]=w.useState(null),[h,E]=w.useState(""),[q,R]=w.useState("all");w.useEffect(()=>{$(),W(),Y()},[]);const $=()=>m(void 0,null,function*(){n([])}),W=()=>m(void 0,null,function*(){c([])}),Y=()=>m(void 0,null,function*(){x([])}),H=()=>{const i={id:`post-${Date.now()}`,title:"",slug:"",content:"",author_id:"admin",status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};_(i),p(!0)},V=()=>{const i={id:`newsletter-${Date.now()}`,subject:"",content:"",from_name:"Andora",from_email:"hello@andorabrand.me",status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};P(i),p(!0)},y=()=>{if(!v)return;const i=r.find(b=>b.id===v.id)?r.map(b=>b.id===v.id?v:b):[...r,v];n(i),p(!1),_(null)},U=()=>{if(!C)return;const i=l.find(b=>b.id===C.id)?l.map(b=>b.id===C.id?C:b):[...l,C];c(i),p(!1),P(null)},z=i=>{confirm("Delete this blog post?")&&n(r.filter(b=>b.id!==i))},F=i=>{confirm("Delete this newsletter?")&&c(l.filter(b=>b.id!==i))},o=r.filter(i=>{const b=i.title.toLowerCase().includes(h.toLowerCase()),M=q==="all"||i.status===q;return b&&M}),k=l.filter(i=>{const b=i.subject.toLowerCase().includes(h.toLowerCase()),M=q==="all"||i.status===q;return b&&M});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Content Management"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage blog posts, newsletters, and subscribers"})]})}),e.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[e.jsxs("button",{onClick:()=>t("posts"),className:`px-4 py-2 font-medium transition-colors ${s==="posts"?"text-primary-600 border-b-2 border-primary-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(Se,{className:"inline-block w-4 h-4 mr-2"}),"Blog Posts"]}),e.jsxs("button",{onClick:()=>t("newsletters"),className:`px-4 py-2 font-medium transition-colors ${s==="newsletters"?"text-primary-600 border-b-2 border-primary-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(ss,{className:"inline-block w-4 h-4 mr-2"}),"Newsletters"]}),e.jsxs("button",{onClick:()=>t("subscribers"),className:`px-4 py-2 font-medium transition-colors ${s==="subscribers"?"text-primary-600 border-b-2 border-primary-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(ye,{className:"inline-block w-4 h-4 mr-2"}),"Subscribers (",u.filter(i=>i.is_active).length,")"]})]}),s==="posts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(D,{placeholder:"Search posts...",value:h,onChange:i=>E(i.target.value),className:"pl-10"})]}),e.jsxs("select",{value:q,onChange:i=>R(i.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs(T,{onClick:H,className:"flex items-center",children:[e.jsx(_e,{size:16,className:"mr-2"}),"New Post"]})]}),e.jsx("div",{className:"glass-effect rounded-lg border border-primary-500/20",children:o.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-500",children:[e.jsx(Se,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),e.jsx("p",{children:"No blog posts yet. Create your first post!"})]}):e.jsx("div",{className:"divide-y divide-slate-200",children:o.map(i=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:i.title||"Untitled"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:i.excerpt||"No excerpt"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.status==="published"?"bg-green-100 text-green-700":i.status==="draft"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-700"}`,children:i.status}),e.jsxs("span",{className:"text-xs text-slate-500",children:[i.view_count||0," views"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{_(i),p(!0)},children:e.jsx(re,{size:14})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>z(i.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{size:14})})]})]})},i.id))})})]}),s==="newsletters"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(D,{placeholder:"Search newsletters...",value:h,onChange:i=>E(i.target.value),className:"pl-10"})]}),e.jsxs("select",{value:q,onChange:i=>R(i.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"})]}),e.jsxs(T,{onClick:V,className:"flex items-center",children:[e.jsx(_e,{size:16,className:"mr-2"}),"New Newsletter"]})]}),e.jsx("div",{className:"glass-effect rounded-lg border border-primary-500/20",children:k.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-500",children:[e.jsx(ss,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),e.jsx("p",{children:"No newsletters yet. Create your first newsletter!"})]}):e.jsx("div",{className:"divide-y divide-slate-200",children:k.map(i=>e.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:i.subject||"Untitled"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:i.preview_text||"No preview"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.status==="sent"?"bg-green-100 text-green-700":i.status==="scheduled"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:i.status}),i.recipient_count&&e.jsxs("span",{className:"text-xs text-slate-500",children:[i.recipient_count," recipients"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{P(i),p(!0)},children:e.jsx(re,{size:14})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>F(i.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ce,{size:14})})]})]})},i.id))})})]}),s==="subscribers"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"glass-effect rounded-lg border border-primary-500/20 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Active Subscribers"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 mt-2",children:u.filter(i=>i.is_active).length})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Unsubscribed"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 mt-2",children:u.filter(i=>!i.is_active).length})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-2",children:u.length})]})]}),u.length===0?e.jsxs("div",{className:"py-12 text-center text-slate-500",children:[e.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),e.jsx("p",{children:"No subscribers yet"})]}):e.jsx("div",{className:"space-y-2",children:u.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:i.email}),i.name&&e.jsx("p",{className:"text-sm text-slate-500",children:i.name})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.is_active?"Active":"Unsubscribed"})]},i.id))})]})}),N&&v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:[v.id.startsWith("post-")&&r.find(i=>i.id===v.id)?"Edit":"New"," Blog Post"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{label:"Title",value:v.title,onChange:i=>_(j(g({},v),{title:i.target.value})),placeholder:"Enter post title"}),e.jsx(D,{label:"Slug",value:v.slug,onChange:i=>_(j(g({},v),{slug:i.target.value})),placeholder:"post-url-slug"}),e.jsx(he,{label:"Excerpt",value:v.excerpt||"",onChange:i=>_(j(g({},v),{excerpt:i.target.value})),placeholder:"Brief description",rows:2}),e.jsx(he,{label:"Content",value:v.content,onChange:i=>_(j(g({},v),{content:i.target.value})),placeholder:"Write your content here (Markdown supported)",rows:12}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:v.status,onChange:i=>_(j(g({},v),{status:i.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsx(D,{label:"Featured Image URL",value:v.featured_image||"",onChange:i=>_(j(g({},v),{featured_image:i.target.value})),placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(T,{variant:"ghost",onClick:()=>{p(!1),_(null)},children:"Cancel"}),e.jsx(T,{onClick:y,children:"Save Post"})]})]})}),N&&C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:[C.id.startsWith("newsletter-")&&l.find(i=>i.id===C.id)?"Edit":"New"," Newsletter"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{label:"Subject",value:C.subject,onChange:i=>P(j(g({},C),{subject:i.target.value})),placeholder:"Newsletter subject line"}),e.jsx(he,{label:"Preview Text",value:C.preview_text||"",onChange:i=>P(j(g({},C),{preview_text:i.target.value})),placeholder:"Brief preview (shown in email clients)",rows:2}),e.jsx(he,{label:"Content",value:C.content,onChange:i=>P(j(g({},C),{content:i.target.value})),placeholder:"Write your newsletter content (HTML supported)",rows:12}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(D,{label:"From Name",value:C.from_name,onChange:i=>P(j(g({},C),{from_name:i.target.value}))}),e.jsx(D,{label:"From Email",value:C.from_email,onChange:i=>P(j(g({},C),{from_email:i.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:C.status,onChange:i=>P(j(g({},C),{status:i.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(T,{variant:"ghost",onClick:()=>{p(!1),P(null)},children:"Cancel"}),e.jsx(T,{onClick:U,children:"Save Newsletter"})]})]})})]})},Qs=s=>s.reduce((t,r)=>(t[r.id]=r,t),{}),ds=s=>s.reduce((t,r)=>(t[r.id]={tokens:r.tokens,max_brands:r.max_brands},t),{}),Zs=s=>s.join(`
`),et=({onLogout:s})=>{var Ue,$e,Be,Le,Fe,Ge;const[t,r]=w.useState("dashboard"),[n,l]=w.useState([]),[c,u]=w.useState(null),[x,N]=w.useState(null),[p,v]=w.useState({default_currency:"NGN",exchange_rate:te}),[_,C]=w.useState(!1),[P,h]=w.useState(null),[E,q]=w.useState(null),[R,$]=w.useState(!1),[W,Y]=w.useState(null),[H,V]=w.useState(!1),[y,U]=w.useState({userId:"",plan:"free",tokens:0,expiry:""}),[z,F]=w.useState(!0),[o,k]=w.useState(!1),i=w.useMemo(()=>{var a;return(a=x==null?void 0:x.pricing_plans)!=null?a:ve},[x]),b=w.useMemo(()=>Qs(i),[i]),M=w.useMemo(()=>i.map(a=>({id:a.id,label:a.name,tokens:a.tokens,maxBrands:a.max_brands})),[i]),B=b[y.plan],I=w.useMemo(()=>{var a;return(a=n.find(d=>d.user_id===y.userId))!=null?a:null},[n,y.userId]),ne=w.useMemo(()=>{var S,A,O;if(!I)return 0;const a=(S=I.tokens)!=null?S:0;if(I.plan!==y.plan&&z){const G=(O=(A=b[y.plan])==null?void 0:A.tokens)!=null?O:0;return a+G}return y.tokens},[I,y.plan,y.tokens,z,b]),X=w.useMemo(()=>n.reduce((a,d)=>{var f;return a+((f=d.tokens)!=null?f:0)},0),[n]),L=(Ue=c==null?void 0:c.total_users)!=null?Ue:0,me=($e=c==null?void 0:c.tokens_distributed)!=null?$e:0,ie=(Be=c==null?void 0:c.tokens_consumed)!=null?Be:0,Ee=w.useMemo(()=>L===0?0:Math.round(X/L),[X,L]),Oe=w.useMemo(()=>{var a;return L===0?0:Math.round(((a=c==null?void 0:c.paid_users)!=null?a:0)/L*100)},[c==null?void 0:c.paid_users,L]),xs=w.useMemo(()=>!c||c.paid_users===0?"0.0":(c.total_brands/c.paid_users).toFixed(1),[c]),De=w.useMemo(()=>{if(n.length===0)return[];const a=n.reduce((d,f)=>{var A;const S=f.plan;return d[S]=((A=d[S])!=null?A:0)+1,d},{});return Object.entries(a).map(([d,f])=>{var G;const S=b[d],A=(G=S==null?void 0:S.name)!=null?G:d.charAt(0).toUpperCase()+d.slice(1),O=L===0?0:Math.round(f/L*100);return{plan:d,count:f,label:A,percentage:O}}).sort((d,f)=>f.count-d.count)},[n,b,L]);Z.useEffect(()=>{pe()},[]),Z.useEffect(()=>{x!=null&&x.currency_settings&&v(x.currency_settings)},[x==null?void 0:x.currency_settings]),Z.useEffect(()=>{var a,d;if(!y.userId&&y.tokens===0){const f=(d=(a=b[y.plan])==null?void 0:a.tokens)!=null?d:0;f!==y.tokens&&U(S=>j(g({},S),{tokens:f}))}},[y.userId,y.tokens,y.plan,b]),Z.useEffect(()=>{var d;if(!z)return;const a=(d=b[y.plan])==null?void 0:d.tokens;typeof a=="number"&&a!==y.tokens&&U(f=>j(g({},f),{tokens:a}))},[y.plan,y.tokens,b,z]),Z.useEffect(()=>{if(!I)return;const a=I.plan_expiry?new Date(I.plan_expiry):null,d=a?a.toISOString().slice(0,10):"";U(f=>{var S;return j(g({},f),{plan:I.plan,tokens:(S=I.tokens)!=null?S:0,expiry:d})}),F(!1)},[I==null?void 0:I.user_id]),Z.useEffect(()=>{if(y.plan==="free"){y.expiry!==""&&U(a=>j(g({},a),{expiry:""}));return}if(!y.expiry){const a=new Date(Date.now()+2592e6).toISOString().slice(0,10);U(d=>j(g({},d),{expiry:a}))}},[y.plan,y.expiry]);const pe=()=>m(void 0,null,function*(){C(!0);try{const[a,d,f]=yield Promise.all([K.getAllUsers(),K.getUserStats(),K.getAdminConfig()]);l(a),u(d),N(f)}catch(a){console.error("Error loading admin data:",a)}finally{C(!1)}}),us=a=>m(void 0,null,function*(){confirm("Are you sure you want to delete this user?")&&(yield K.deleteUser(a))&&l(n.filter(f=>f.user_id!==a))}),se=(a,d)=>{U(f=>j(g({},f),{[a]:d}))},hs=()=>m(void 0,null,function*(){var Je,Re,We,Ye,Ve,Ke,He;if(!y.userId){alert("Select a user before assigning a plan.");return}k(!0);const a=n.find(oe=>oe.user_id===y.userId),d=(Je=a==null?void 0:a.tokens)!=null?Je:0,S=(a==null?void 0:a.plan)!==y.plan;let A=y.tokens;if(S&&z){const oe=(We=(Re=b[y.plan])==null?void 0:Re.tokens)!=null?We:0;A=d+oe}const O={plan:y.plan,tokens:Math.max(0,Number.isFinite(A)?A:0)};y.plan==="free"?O.plan_expiry=null:y.expiry&&(O.plan_expiry=new Date(`${y.expiry}T00:00:00Z`));const G=yield K.updateUser(y.userId,O);if(k(!1),G){const oe=(Ve=(Ye=b[y.plan])==null?void 0:Ye.name)!=null?Ve:y.plan,Xe=A-d;alert(`Plan updated successfully.
${oe} assigned with ${A.toLocaleString()} total tokens${Xe>0?` (+${Xe.toLocaleString()} added)`:""}.`),U({userId:"",plan:"free",tokens:(He=(Ke=b.free)==null?void 0:Ke.tokens)!=null?He:0,expiry:""}),F(!0),pe()}}),le=(a,d)=>{if(!x)return;const f=x.pricing_plans.map(S=>S.id===a?g(g({},S),d):S);N(j(g({},x),{pricing_plans:f,system_limits:ds(f)}))},Ie=(a,d,f)=>{const S=Math.max(0,parseInt(f,10)||0),A=p.exchange_rate>0?p.exchange_rate:te;if(d==="NGN"){const O=S,G=O===0?0:Math.max(1,Math.round(O/A));le(a,{price_ngn:O,price_usd:G})}else{const O=S,G=O===0?0:Math.round(O*A);le(a,{price_usd:O,price_ngn:G})}},gs=(a,d)=>{const f=d.split(/\r?\n/).map(S=>S.trim()).filter(Boolean);le(a,{features:f})},fs=a=>m(void 0,null,function*(){if(!x)return;const d=x.pricing_plans.find(A=>A.id===a);if(!d)return;const f=d.name;Y(a);const S=yield K.updatePricingPlan(a,d);if(Y(null),S){const A=x.pricing_plans.map(O=>O.id===a?g({},S):O);N(j(g({},x),{pricing_plans:A,system_limits:ds(A)})),alert(`${f} plan saved successfully.`)}}),qe=(a,d)=>{v(f=>j(g({},f),{[a]:d}))},ys=()=>m(void 0,null,function*(){if(!x)return;V(!0);const a=yield K.updateAdminConfig({currency_settings:p});V(!1),a&&(N(j(g({},x),{currency_settings:p})),alert("Currency settings updated successfully."))}),bs=()=>{if(!x)return;const a=p.exchange_rate>0?p.exchange_rate:te,d=x.pricing_plans.map(f=>j(g({},f),{price_usd:f.price_ngn===0?0:Math.max(1,Math.round(f.price_ngn/a))}));N(j(g({},x),{pricing_plans:d}))},vs=a=>m(void 0,null,function*(){if(!P)return;const d=E&&E!==a.plan,f=d?new Date(Date.now()+30*24*60*60*1e3):a.plan_expiry,S={tokens:Math.max(0,a.tokens),preferred_ai_provider:a.preferred_ai_provider,preferred_ai_model:a.preferred_ai_model};d?(S.plan=a.plan,f&&(S.plan_expiry=f)):a.plan_expiry&&(S.plan_expiry=a.plan_expiry),(yield K.updateUser(a.user_id,S))&&(l(n.map(O=>O.user_id===a.user_id?j(g(g({},O),S),{plan_expiry:f||void 0}):O)),$(!1),h(null),q(null))}),ze=()=>{$(!1),h(null),q(null)},js=()=>m(void 0,null,function*(){if(!x)return;(yield K.updateSystemLimits(x.system_limits))&&alert("Token limits saved successfully.")}),Me=[{id:"dashboard",label:"Dashboard",icon:Ms},{id:"users",label:"Users",icon:ye},{id:"agents",label:"AI Agents",icon:Us},{id:"blog",label:"Blog & Newsletter",icon:Se},{id:"config",label:"Config",icon:ps}];return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex relative z-10",children:[e.jsx("div",{className:"hidden lg:block w-64 glass-effect border-r border-primary-200/60 min-h-screen p-6 border border-primary-500/20",children:e.jsx("nav",{className:"space-y-2",children:Me.map(a=>{const d=a.icon;return e.jsxs("button",{onClick:()=>r(a.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-300 ${t===a.id?"bg-gradient-to-r from-primary-600 to-purple-600 text-white":"text-slate-600 hover:bg-white/70 hover:text-primary-900"}`,children:[e.jsx(d,{size:20}),e.jsx("span",{children:a.label})]},a.id)})})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 glass-effect border-t border-primary-200/60 p-4 z-20",children:e.jsx("div",{className:"flex justify-around",children:Me.map(a=>{const d=a.icon;return e.jsxs("button",{onClick:()=>r(a.id),className:`flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-all duration-300 ${t===a.id?"bg-gradient-to-r from-primary-600 to-purple-600 text-white":"text-slate-600 hover:bg-white/70 hover:text-primary-900"}`,children:[e.jsx(d,{size:16}),e.jsx("span",{className:"text-xs",children:a.label})]},a.id)})})}),e.jsxs("div",{className:"flex-1 p-4 sm:p-6 pb-20 lg:pb-6",children:[t==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary-900",children:"Admin Dashboard"}),e.jsxs(T,{onClick:pe,loading:_,className:"flex items-center",size:"sm",children:[e.jsx(ge,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Total Users"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary-300",children:c.total_users})]}),e.jsx(ye,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:[Oe,"% on paid plans"]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Total Brands"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-300",children:c.total_brands})]}),e.jsx(Ds,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:[xs," brands per paid user"]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-accent-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Tokens Distributed"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-accent-300",children:me.toLocaleString()})]}),e.jsx(ke,{className:"w-6 h-6 sm:w-8 sm:h-8 text-accent-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:[X.toLocaleString()," tokens currently held"]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Paid Users"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-purple-300",children:c.paid_users})]}),e.jsx(je,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:[c.free_users," free members active"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Total Tokens Consumed"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary-300",children:ie.toLocaleString()})]}),e.jsx(Is,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:[X.toLocaleString()," tokens remaining across users"]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Total Events"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-300",children:c.total_events})]}),e.jsx(qs,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-400"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Context-aware planning moments logged"})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-accent-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Content Items Delivered"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-accent-300",children:c.total_content})]}),e.jsx(ms,{className:"w-6 h-6 sm:w-8 sm:h-8 text-accent-400"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Generated briefs ready for publishing"})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:"Avg Tokens / User"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-purple-300",children:Ee.toLocaleString()})]}),e.jsx(zs,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-400"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Helps forecast refill cadence"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20 xl:col-span-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900",children:"Plan Management"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Assign subscription plans, align token allocations, and set renewal dates."})]}),B&&e.jsxs("div",{className:"bg-white/60 rounded-lg px-4 py-3 border border-primary-200/40 text-xs text-slate-500",children:[e.jsx("p",{className:"font-semibold text-primary-700",children:B.name}),e.jsxs("p",{children:[B.tokens.toLocaleString()," tokens â€¢ ",B.max_brands," brand seats"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Select User"}),e.jsxs("select",{value:y.userId,onChange:a=>se("userId",a.target.value),className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",className:"bg-white text-primary-900",children:"Select a user"}),n.map(a=>e.jsx("option",{value:a.user_id,className:"bg-white text-primary-900",children:a.email||a.user_id},a.user_id))]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Pulls current plan and token balance automatically."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Assign Plan"}),e.jsx("select",{value:y.plan,onChange:a=>{var d,f;if(se("plan",a.target.value),z){const S=(f=(d=b[a.target.value])==null?void 0:d.tokens)!=null?f:y.tokens;se("tokens",S)}},className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:M.map(a=>e.jsx("option",{value:a.id,className:"bg-white text-primary-900",children:a.label},a.id))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Switch between plans while keeping context of limits."})]}),e.jsx(D,{label:"Token Allocation",type:"number",min:0,value:y.tokens,onChange:a=>se("tokens",Math.max(0,parseInt(a.target.value,10)||0)),helperText:I&&I.plan!==y.plan&&z?`Current: ${(Fe=(Le=I.tokens)==null?void 0:Le.toLocaleString())!=null?Fe:0} â†’ New total: ${ne.toLocaleString()} (+${(ne-((Ge=I.tokens)!=null?Ge:0)).toLocaleString()} added)`:z?"Auto-syncing with plan defaults.":"Custom allocation applied."}),y.plan!=="free"&&e.jsx(D,{label:"Plan Renewal Date",type:"date",value:y.expiry,onChange:a=>se("expiry",a.target.value),helperText:"When the subscription should renew."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mt-4",children:[e.jsxs("label",{className:"inline-flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:a=>{var d,f;if(F(a.target.checked),a.target.checked){const S=(f=(d=b[y.plan])==null?void 0:d.tokens)!=null?f:y.tokens;se("tokens",S)}},className:"rounded border-primary-200 bg-white/80 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"Add plan tokens to user's existing balance when upgrading"})]}),e.jsxs(T,{onClick:hs,loading:o,className:"flex items-center justify-center w-full sm:w-auto",children:[e.jsx(je,{size:16,className:"mr-2"}),"Apply Plan Changes"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900 mb-3",children:"Plan Distribution"}),De.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No users available yet."}):e.jsx("div",{className:"space-y-3",children:De.map(a=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-primary-800",children:a.label}),e.jsxs("span",{className:"text-slate-500",children:[a.count," â€¢ ",a.percentage,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-white/40 rounded-full overflow-hidden mt-1",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-purple-500",style:{width:`${a.percentage}%`}})})]},a.plan))})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900 mb-3",children:"Key Insights"}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[e.jsxs("li",{children:["Paid conversion sits at ",Oe,"% of the user base."]}),e.jsxs("li",{children:["Average token balance is ",Ee.toLocaleString()," per user."]}),e.jsxs("li",{children:["Total consumption this month: ",ie.toLocaleString()," tokens."]})]})]})]})]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900 mb-4",children:"Recent Users"}),e.jsx("div",{className:"space-y-2",children:n.length===0?e.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No users found"}):n.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 glass-effect rounded border border-primary-200/40",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-800 truncate max-w-[150px] sm:max-w-none",children:a.email||a.user_id}),e.jsxs("p",{className:"text-xs text-slate-500 capitalize",children:[a.plan," â€¢ ",a.tokens," tokens"]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(T,{size:"sm",variant:"outline",onClick:()=>{h(g({},a)),q(a.plan),$(!0)},children:e.jsx(re,{size:14})})})]},a.user_id))})]})]}),t==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary-900",children:"User Management"}),e.jsxs(T,{onClick:pe,loading:_,className:"flex items-center",size:"sm",children:[e.jsx(ge,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),e.jsx("div",{className:"glass-effect rounded-lg overflow-hidden border border-primary-500/20",children:e.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:e.jsxs("table",{className:"w-full border border-primary-200/40",children:[e.jsx("thead",{className:"bg-white/60",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-primary-800 uppercase tracking-wider border-b border-primary-200/40",children:"User"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-primary-800 uppercase tracking-wider border-b border-primary-200/40",children:"Plan"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-primary-800 uppercase tracking-wider border-b border-primary-200/40",children:"Tokens"}),e.jsx("th",{className:"hidden sm:table-cell px-6 py-3 text-left text-xs font-medium text-primary-800 uppercase tracking-wider border-b border-primary-200/40",children:"Expiry"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-primary-800 uppercase tracking-wider border-b border-primary-200/40",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-dark-600/30",children:n.map(a=>e.jsxs("tr",{className:"hover:bg-white/80 transition-colors",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs sm:text-sm text-primary-800 truncate max-w-[100px] sm:max-w-none",children:a.email||a.user_id})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{size:14,className:"text-accent-400 mr-1 sm:mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm text-primary-800 capitalize",children:a.plan})]})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{size:14,className:"text-primary-400 mr-1 sm:mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm text-primary-800",children:a.tokens})]})}),e.jsx("td",{className:"hidden sm:table-cell px-6 py-4 whitespace-nowrap text-sm text-primary-800",children:a.plan_expiry?a.plan_expiry.toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[e.jsx(T,{size:"sm",variant:"outline",onClick:()=>{h(g({},a)),q(a.plan),$(!0)},children:e.jsx(re,{size:14})}),e.jsx(T,{size:"sm",variant:"danger",onClick:()=>us(a.user_id),children:e.jsx(Ce,{size:14})})]})})]},a.user_id))})]})})})]}),t==="agents"&&e.jsx(Hs,{}),t==="blog"&&e.jsx(Xs,{}),t==="config"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-primary-900",children:"System Configuration"}),x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20 space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900",children:"Currency & Billing Preferences"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Control how pricing is displayed publicly and throughout the dashboards."})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Default Display Currency"}),e.jsxs("select",{value:p.default_currency,onChange:a=>qe("default_currency",a.target.value),className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"NGN",className:"bg-white text-primary-900",children:"NGN â€” Nigerian Naira"}),e.jsx("option",{value:"USD",className:"bg-white text-primary-900",children:"USD â€” United States Dollar"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Determines the default currency shown on the public pricing page and in user dashboards."})]}),e.jsx(D,{label:"NGN per $1",type:"number",value:p.exchange_rate,onChange:a=>qe("exchange_rate",Math.max(1,parseInt(a.target.value,10)||te)),helperText:"Used to auto-calculate USD pricing when NGN changes."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-2",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Update the exchange rate to refresh every planâ€™s USD price. You can still override individual plans manually."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(T,{variant:"outline",onClick:bs,children:"Recalculate USD Values"}),e.jsx(T,{onClick:ys,loading:H,children:"Save Currency Settings"})]})]})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20 space-y-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900",children:"Pricing & Token Catalogue"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Edit live plan prices, allocations, and features. Changes sync instantly to the public site."})]}),e.jsxs(T,{size:"sm",onClick:js,className:"flex items-center",children:[e.jsx(fe,{size:16,className:"mr-2"}),"Save Token Limits"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:x.pricing_plans.map(a=>e.jsxs("div",{className:"glass-effect border border-primary-200/50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-primary-900",children:a.name}),e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:a.id})]}),a.is_popular&&e.jsx("span",{className:"text-xs text-accent-300 bg-accent-500/10 px-2 py-1 rounded-full",children:"Popular"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(D,{label:"Price (NGN)",type:"number",value:a.price_ngn,onChange:d=>Ie(a.id,"NGN",d.target.value)}),e.jsx(D,{label:"Price (USD)",type:"number",value:a.price_usd,onChange:d=>Ie(a.id,"USD",d.target.value),helperText:`â‰ˆ â‚¦${a.price_ngn.toLocaleString()} at â‚¦${p.exchange_rate.toLocaleString()} / $1`}),e.jsx(D,{label:"Monthly Tokens",type:"number",value:a.tokens,onChange:d=>le(a.id,{tokens:Math.max(0,parseInt(d.target.value,10)||0)})}),e.jsx(D,{label:"Max Brands",type:"number",value:a.max_brands,onChange:d=>le(a.id,{max_brands:parseInt(d.target.value,10)||0}),helperText:"Use -1 for unlimited brands"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Included Features"}),e.jsx("textarea",{value:Zs(a.features),onChange:d=>gs(a.id,d.target.value),className:"w-full min-h-[100px] glass-effect rounded-lg text-primary-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"One feature per line"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-2",children:[e.jsxs("p",{className:"text-xs text-slate-500",children:["Displayed as ",p.default_currency==="USD"?`$${a.price_usd.toLocaleString()}`:`â‚¦${a.price_ngn.toLocaleString()}`," on the pricing page."]}),e.jsxs(T,{size:"sm",onClick:()=>fs(a.id),loading:W===a.id,children:[e.jsx(fe,{size:14,className:"mr-2"}),"Save Plan"]})]})]},a.id))})]}),e.jsxs("div",{className:"glass-effect p-4 sm:p-6 rounded-lg border border-primary-500/20 space-y-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-primary-900",children:"Billing Automation"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Every plan assignment receives an automatic 30-day expiry with renewal reminders seven days before the deadline."}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-600",children:[e.jsx("li",{children:"Monthly allowances match the pricing grid, keeping tokens and limits in sync."}),e.jsx("li",{children:"Admins can top up or reset tokens without breaking the automated renewal cycle."}),e.jsx("li",{children:"Yearly billing support flows from the pricing page toggle into analytics automatically."})]})]})]}):e.jsx("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20 text-center text-slate-500",children:"Loading configuration..."})]})]})]}),e.jsx(Ae,{isOpen:R,onClose:ze,title:"Edit User",size:"md",children:P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Plan"}),e.jsx("select",{value:P.plan,onChange:a=>{var A;const d=a.target.value,f=b[d]||b.free,S=new Date(Date.now()+30*24*60*60*1e3);h(j(g({},P),{plan:d,tokens:(A=f==null?void 0:f.tokens)!=null?A:P.tokens,plan_expiry:S}))},className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:M.map(a=>e.jsx("option",{value:a.id,className:"bg-white text-primary-900",children:a.label},a.id))}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Plans renew monthly. Changing a plan sets a new expiry on ",P.plan_expiry?P.plan_expiry.toLocaleDateString():new Date(Date.now()+30*24*60*60*1e3).toLocaleDateString(),"."]})]}),e.jsx(D,{label:"Tokens",type:"number",value:P.tokens,onChange:a=>{const d=Math.max(0,parseInt(a.target.value,10)||0);h(j(g({},P),{tokens:d}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"AI Provider"}),e.jsxs("select",{value:P.preferred_ai_provider,onChange:a=>h(j(g({},P),{preferred_ai_provider:a.target.value})),className:"w-full px-3 py-2 glass-effect rounded-lg text-primary-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"claude",children:"Claude"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(T,{variant:"ghost",onClick:ze,children:"Cancel"}),e.jsx(T,{onClick:()=>vs(P),children:"Save Changes"})]})]})})]})},dt=Object.freeze(Object.defineProperty({__proto__:null,AdminDashboard:et},Symbol.toStringTag,{value:"Module"}));export{ve as A,T as B,ot as C,te as D,D as I,Ae as M,he as T,ee as a,lt as b,ae as c,ct as d,it as e,dt as f,at as g,nt as s};
