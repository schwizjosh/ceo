const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/admin-B3cU-nTP.js","assets/js/react-vendor-BnMxgzCM.js","assets/js/vendor-C9A41NUf.js","assets/js/editor-C5-21oKP.js"])))=>i.map(i=>d[i]);
var ea=Object.defineProperty,sa=Object.defineProperties;var ta=Object.getOwnPropertyDescriptors;var Is=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;var xt=(s,n,a)=>n in s?ea(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,M=(s,n)=>{for(var a in n||(n={}))ht.call(n,a)&&xt(s,a,n[a]);if(Is)for(var a of Is(n))pt.call(n,a)&&xt(s,a,n[a]);return s},W=(s,n)=>sa(s,ta(n));var ut=s=>typeof s=="symbol"?s:s+"",gt=(s,n)=>{var a={};for(var c in s)ht.call(s,c)&&n.indexOf(c)<0&&(a[c]=s[c]);if(s!=null&&Is)for(var c of Is(s))n.indexOf(c)<0&&pt.call(s,c)&&(a[c]=s[c]);return a};var ne=(s,n,a)=>new Promise((c,h)=>{var o=m=>{try{k(a.next(m))}catch(l){h(l)}},w=m=>{try{k(a.throw(m))}catch(l){h(l)}},k=m=>m.done?c(m.value):Promise.resolve(m.value).then(o,w);k((a=a.apply(s,n)).next())});import{r,t as aa,u as ms,j as e,_ as ys,f as Te,z as rs,a1 as ra,s as os,a2 as na,Y as la,P as nt,a3 as ia,a4 as fs,M as oa,C as Ss,a5 as Et,w as ft,a6 as ca,a as da,F as ma,R as cs,a7 as xa,a8 as ha,a9 as pa,Z as Ts,k as et,U as ds,aa as ua,T as Ms,c as Ps,ab as ga,ac as fa,ad as ba,I as ya,ae as ns,v as Ve,n as st,af as bt,ag as yt,ah as As,e as $s,J as Dt,ai as ja,aj as va,ak as js,al as Ze,am as tt,an as Ot,ao as Hs,W as ts,p as Ft,ap as Na,aq as jt,q as Bs,$ as xs,ar as wa,o as ka,as as Es,at as lt,X as Ks,b as zs,d as vt,au as gs,av as bs,aw as Lt,ax as Ws,ay as Rt,az as Bt,aA as Wt,aB as _a,aC as Ca}from"./react-vendor-BnMxgzCM.js";import{a as Re,B as N,I as ss,T as Pe,A as Us,D as Gs,b as Ye,M as Ut,c as Xe}from"./admin-B3cU-nTP.js";import{P as qe,p as Sa,N as Gt,a as as,_ as it}from"./dashboard-Bsi_AYrO.js";import{N as Ta,E as Pa}from"./onboarding-CDs6NGXK.js";const Ds="admin@py.raysourcelabs.com",Aa="898py.8888",Nt="demo@py.raysourcelabs.com",$a="898py.8888",za={user_id:"demo-user-123",plan:"pro",tokens:1500,plan_expiry:new Date(Date.now()+30*24*60*60*1e3),preferred_ai_provider:"openai",preferred_ai_model:"gpt-4",timezone:"Africa/Lagos"},Ma={user_id:"admin-user-123",plan:"enterprise",tokens:999999,preferred_ai_provider:"claude",preferred_ai_model:"claude-3-opus-20240229",timezone:"Africa/Lagos"},Ns=()=>{const[s,n]=r.useState({user:null,isAuthenticated:!1,isAdmin:!1,loading:!0,error:null}),a=r.useRef(!1),c=m=>m===Nt||m===Ds,h=r.useCallback(m=>{n({user:m===Ds?Ma:za,isAuthenticated:!0,isAdmin:m===Ds,loading:!1,error:null})},[]);r.useEffect(()=>{if(a.current)return;a.current=!0,ne(void 0,null,function*(){console.log("ðŸ”„ Initializing auth...");try{const l=yield Re.getCurrentUser();l?(console.log("âœ… Found session:",l.email),n({user:{user_id:l.user_id,plan:l.plan,tokens:l.tokens,plan_expiry:l.plan_expiry?new Date(l.plan_expiry):void 0,preferred_ai_provider:l.preferred_ai_provider,preferred_ai_model:l.preferred_ai_model,timezone:l.timezone},isAuthenticated:!0,isAdmin:l.is_admin||!1,loading:!1,error:null})):(console.log("â„¹ï¸ No session found"),n(d=>W(M({},d),{loading:!1})))}catch(l){console.error("âŒ Init error:",l),n(d=>W(M({},d),{loading:!1}))}})},[]);const o=r.useCallback((m,l)=>ne(void 0,null,function*(){if(console.log("ðŸ”„ Login attempt:",m),n(d=>W(M({},d),{loading:!0,error:null})),c(m))if(yield new Promise(T=>setTimeout(T,500)),m===Nt&&l===$a||m===Ds&&l===Aa){h(m);return}else{n(T=>W(M({},T),{loading:!1,error:"Invalid credentials. Please check your email and password."}));return}try{const d=yield Re.login(m,l);console.log("âœ… Login successful"),n({user:{user_id:d.user_id,plan:d.plan,tokens:d.tokens,plan_expiry:d.plan_expiry?new Date(d.plan_expiry):void 0,preferred_ai_provider:d.preferred_ai_provider,preferred_ai_model:d.preferred_ai_model,timezone:d.timezone},isAuthenticated:!0,isAdmin:d.is_admin||!1,loading:!1,error:null})}catch(d){console.error("âŒ Login error:",d);let T="Invalid credentials. Please check your email and password.";d instanceof Error&&(T=d.message),n(p=>W(M({},p),{loading:!1,error:T}))}}),[h]),w=r.useCallback((m,l,d)=>ne(void 0,null,function*(){if(console.log("ðŸ”„ Registration:",m),n(T=>W(M({},T),{loading:!0,error:null})),c(m)){n(T=>W(M({},T),{loading:!1,error:"Cannot register with demo email addresses"}));return}try{const T=yield Re.register(m,l,d);try{yield Re.createBrand({name:`${d}'s Brand`,mission:"Our mission is...",vision:"Our vision is...",values:"Our values are...",voice:"Our brand voice is..."}),console.log("âœ… Default brand created successfully")}catch(p){console.error("âŒ Failed to create default brand:",p)}console.log("âœ… User registered successfully"),n({user:{user_id:T.user_id,plan:T.plan,tokens:T.tokens,plan_expiry:T.plan_expiry?new Date(T.plan_expiry):void 0,preferred_ai_provider:T.preferred_ai_provider,preferred_ai_model:T.preferred_ai_model,timezone:T.timezone},isAuthenticated:!0,isAdmin:!1,loading:!1,error:null})}catch(T){console.error("âŒ Registration error:",T);let p="Registration failed";T instanceof Error&&(T.message.includes("already exists")?p="This email is already registered. Please try logging in.":p=T.message),n(u=>W(M({},u),{loading:!1,error:p}))}}),[]),k=r.useCallback(()=>ne(void 0,null,function*(){console.log("ðŸ”„ Logging out...");try{if(s.user&&(s.user.user_id==="demo-user-123"||s.user.user_id==="admin-user-123")){n({user:null,isAuthenticated:!1,isAdmin:!1,loading:!1,error:null});return}Re.logout(),n({user:null,isAuthenticated:!1,isAdmin:!1,loading:!1,error:null})}catch(m){console.error("âŒ Logout error:",m)}}),[s.user]);return{authUser:s.user,isAuthenticated:s.isAuthenticated,isAdmin:s.isAdmin,authLoading:s.loading,authError:s.error,login:o,register:w,logout:k}},Jr=()=>{const{pathname:s}=aa();r.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[s])},us=(s="smooth")=>{window.scrollTo({top:0,left:0,behavior:s})},Os=void 0,Ia=void 0;console.log("ðŸ”‘ Supabase env check:",{hasUrl:!!Os,hasKey:!!Ia,url:(Os==null?void 0:Os.substring(0,30))+"..."});const Ea=()=>(console.warn("âš ï¸ Supabase environment variables are not set"),null),wt=Ea(),Da=[{title:"Company voice, mastered",description:"Py learns your tone, style, and messaging, then writes content that feels authentically yours.",icon:la},{title:"Strategies that resonate",description:"From product launches to campaigns, Py crafts strategies that connect with your audience.",icon:nt},{title:"Consistency across channels",description:"Maintain your company voice across every platformâ€”social media, newsletters, blogs, and beyond.",icon:ia}],Oa=[{label:"Monthly planning",detail:"Set your themes and strategic arcs. Py transforms them into a complete content calendar."},{label:"Content generation",detail:"Generate posts, campaigns, and communications that match your company voice perfectly."},{label:"Multi-channel distribution",detail:"One strategy, multiple formats. Py adapts your content for every platform."}],Fa=[{label:"Companies supported",value:"210+"},{label:"Strategies delivered monthly",value:"1,800+"},{label:"Average response time",value:"2 min"}],La=()=>{const s=ms(),[n,a]=r.useState([]);return r.useEffect(()=>{ne(void 0,null,function*(){if(!wt){console.log("Supabase not configured, skipping testimonials fetch");return}const{data:h,error:o}=yield wt.from("testimonials").select("*").eq("is_featured",!0).order("created_at",{ascending:!1});!o&&h&&a(h)})},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-100/40 via-white to-accent-100/30 text-slate-900 relative",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-primary-500/5 rounded-full blur-3xl animate-drift"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-drift",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-48 h-48 bg-accent-500/5 rounded-full blur-3xl animate-drift",style:{animationDelay:"4s"}})]}),e.jsx("header",{className:"border-b border-slate-200/50 bg-white/80 backdrop-blur-sm relative z-10",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-5",children:[e.jsxs("button",{className:"flex items-center space-x-3",onClick:()=>s("/biography"),children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsx("span",{className:"font-display text-lg font-semibold tracking-tight",children:"Py"})]}),e.jsxs("nav",{className:"hidden items-center gap-8 text-sm font-medium text-slate-600 md:flex",children:[e.jsx("button",{onClick:()=>s("/pricing"),className:"hover:text-slate-900",children:"Pricing"}),e.jsx("button",{onClick:()=>s("/biography"),className:"hover:text-slate-900",children:"Meet Py"}),e.jsx("button",{onClick:()=>s("/contact"),className:"hover:text-slate-900",children:"Talk to us"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>s("/login"),children:"Log in"}),e.jsx(N,{size:"sm",onClick:()=>s("/register"),children:"Start working with him"})]})]})}),e.jsxs("main",{children:[e.jsxs("section",{className:"mx-auto grid max-w-6xl gap-12 px-4 pb-16 pt-20 md:grid-cols-[1.1fr_0.9fr] md:items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"eyebrow",children:"Your strategic partner"}),e.jsx("h1",{className:"font-display text-5xl font-semibold leading-[1.05] sm:text-6xl",children:"Meet Py. He is your company's strategist, and keeper of voice."}),e.jsx("p",{className:"max-w-xl text-lg text-slate-600",children:"He studies your company like a teammate, orchestrates campaigns, writes with empathy, and keeps every channel on message. Working with Py feels less like prompting an app and more like briefing a trusted colleague."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsxs(N,{size:"lg",onClick:()=>s("/register"),className:"w-full sm:w-auto",children:["Get started",e.jsx(ys,{className:"ml-2 h-4 w-4"})]}),e.jsx(N,{size:"lg",variant:"outline",onClick:()=>window.open("https://wa.me/2347069719374","_blank"),className:"w-full sm:w-auto",children:"Speak with our team"})]}),e.jsx("div",{className:"flex flex-wrap gap-6 border-t border-slate-200 pt-6 text-sm text-slate-500",children:Fa.map(c=>e.jsxs("div",{children:[e.jsx("p",{className:"font-display text-2xl text-slate-900",children:c.value}),e.jsx("p",{children:c.label})]},c.label))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-effect rounded-3xl p-8 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary-200/30 to-accent-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-200/30 to-primary-200/30 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10 mb-6 flex items-center gap-3",children:[e.jsx(qe,{size:"md",className:"ring-2 ring-slate-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-display text-base font-semibold",children:"Py"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"How it works"})]})]}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-white font-semibold text-sm",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:"Define your company"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Share your voice, values, and vision. Py learns and remembers."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-white font-semibold text-sm",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:"Map your strategy"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Set monthly themes and key moments. Py builds your content calendar."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-white font-semibold text-sm",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:"Create and publish"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Generate on-brand content for every channel, ready when you need it."})]})]})]})]}),e.jsxs("div",{className:"surface-muted rounded-3xl p-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"What Py creates"}),e.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Te,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Content that captures your unique voice and values."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(rs,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Editorial calendars aligned with your launches and campaigns."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ra,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Platform-ready content for social media, newsletters, and your website."]})]})]})]})]}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:Da.map(({title:c,description:h,icon:o})=>e.jsxs("div",{className:"glass-effect flex h-full flex-col justify-between rounded-3xl p-6",children:[e.jsx("div",{className:"mb-6 flex h-12 w-12 items-center justify-center rounded-full bg-slate-900/90 text-white",children:e.jsx(o,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-display text-xl font-semibold text-slate-900",children:c}),e.jsx("p",{className:"mt-3 text-sm text-slate-600",children:h})]},c))})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-8 md:p-12",children:e.jsxs("div",{className:"flex flex-col gap-10 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"max-w-xl space-y-4",children:[e.jsx("div",{className:"eyebrow",children:"Your workflow"}),e.jsx("h2",{className:"font-display text-3xl font-semibold",children:"Brief him once, collaborate every day."}),e.jsx("p",{className:"text-base text-slate-600",children:"Py joins your workflow, syncs with your strategy, and delivers thoughtful content. He writes, organizes, and strategizes with the consistency of a dedicated team member."})]}),e.jsx("ul",{className:"space-y-4 text-sm text-slate-600 md:max-w-sm",children:Oa.map(c=>e.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-slate-200/80 bg-slate-50 p-4",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:c.label}),e.jsx("p",{className:"text-slate-600",children:c.detail})]})]},c.label))})]})})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:e.jsxs("div",{className:"flex flex-col gap-8 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"max-w-xl space-y-4",children:[e.jsx("div",{className:"eyebrow",children:"How companies feel"}),e.jsx("h2",{className:"font-display text-3xl font-semibold",children:"He keeps the room calm and the strategy sharp."}),e.jsx("p",{className:"text-base text-slate-600",children:"Teams rely on Py to transform ideas into clear, compelling strategies. Here's what partners say after working with him."})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 md:max-w-xl",children:[n.map(c=>e.jsxs("blockquote",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_10px_30px_-24px_rgba(15,23,42,0.45)]",children:[e.jsx(na,{className:"mb-4 h-5 w-5 text-slate-300"}),e.jsx("p",{className:"text-sm text-slate-700",children:c.content}),e.jsxs("footer",{className:"mt-4 text-xs text-slate-500",children:[e.jsx("p",{className:"font-semibold text-slate-800",children:c.name}),e.jsx("p",{children:c.position}),e.jsx("p",{children:c.company})]})]},c.id)),n.length===0&&e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-slate-50 p-6",children:e.jsx("p",{className:"text-sm text-slate-600",children:"Stories from our partners are coming soon. Be among the first to share what it feels like to co-create with Py."})})]})]})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-24",children:e.jsx("div",{className:"rounded-3xl bg-slate-900 px-8 py-12 text-white md:px-12 md:py-16",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"eyebrow text-slate-300",children:"Ready to begin"}),e.jsx("h2",{className:"font-display text-3xl font-semibold text-white",children:"Invite Py into your next campaign."}),e.jsx("p",{className:"max-w-xl text-sm text-slate-200",children:"Whether you're launching, rebranding, or simply keeping your strategy alive, he'll help you maintain the voice your audience knows."})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx(N,{size:"lg",variant:"secondary",onClick:()=>s("/register"),children:"Start for free"}),e.jsx(N,{size:"lg",variant:"ghost",className:"text-white",onClick:()=>s("/pricing"),children:"Review plans"})]})]})})})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/50 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-12",children:[e.jsxs("div",{className:"grid gap-8 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsx("span",{className:"font-display text-lg font-semibold tracking-tight",children:"Py"})]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-md",children:"AI-powered strategy platform that helps businesses create consistent, narrative-driven content across all channels."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("/pricing"),className:"hover:text-slate-900 transition-colors",children:"Pricing"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("/biography"),className:"hover:text-slate-900 transition-colors",children:"About Py"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>s("/register"),className:"hover:text-slate-900 transition-colors",children:"Get Started"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Connect"}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>s("/contact"),className:"hover:text-slate-900 transition-colors",children:"Contact Us"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>window.open("https://wa.me/2347069719374","_blank"),className:"hover:text-slate-900 transition-colors",children:"WhatsApp"})}),e.jsx("li",{children:e.jsx("a",{href:"tel:+2348086512223",className:"hover:text-slate-900 transition-colors",children:"+234 808 651 2223"})})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Py. All rights reserved."]}),e.jsx("div",{className:"flex gap-6",children:e.jsx("a",{href:"https://py.raysourcelabs.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-slate-900 transition-colors",children:"py.raysourcelabs.com"})})]})})]})})]})},Zr=Object.freeze(Object.defineProperty({__proto__:null,HomePage:La},Symbol.toStringTag,{value:"Module"})),Ra=[{title:"Workshop with Py",detail:"Schedule a live collaborative session where he maps your company strategy while you watch."},{title:"Migration support",detail:"Bring existing documents, tone guides, and campaignsâ€”our team helps onboard them into his memory."},{title:"Enterprise rituals",detail:"Design weekly and monthly cadences so Py plugs into your leadership meetings."}],Ba=({onBack:s})=>{const n=ms(),a=s||(()=>n("/")),[c,h]=r.useState({name:"",email:"",company:"",message:""}),[o,w]=r.useState(!1),k=m=>{m.preventDefault(),console.log("Contact form submitted:",c),w(!0),setTimeout(()=>{h({name:"",email:"",company:"",message:""}),w(!1)},3e3)};return e.jsxs("div",{className:"min-h-screen bg-[#f8f6f2] text-slate-900",children:[e.jsx("header",{className:"border-b border-slate-200 bg-[#f8f6f2]/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-5xl items-center justify-between px-4 py-5",children:[e.jsxs(N,{onClick:a,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsx("span",{className:"font-display text-lg font-semibold tracking-tight",children:"Speak with Pyâ€™s team"})]})]})}),e.jsxs("main",{className:"mx-auto max-w-5xl px-4 pb-24 pt-16",children:[e.jsxs("section",{className:"mb-12 space-y-6",children:[e.jsx("div",{className:"eyebrow",children:"Connection"}),e.jsx("h1",{className:"font-display text-4xl font-semibold sm:text-5xl",children:"Letâ€™s orchestrate your strategy together."}),e.jsx("p",{className:"max-w-2xl text-base text-slate-600",children:"Tell us what you are building, launching, or reimagining. A member of our teamâ€”and often Py himselfâ€”will reply with next steps within one business day."})]}),e.jsxs("div",{className:"grid gap-12 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)]",children:o?e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-900/90 text-white",children:e.jsx(oa,{className:"h-6 w-6"})}),e.jsx("h2",{className:"font-display text-2xl font-semibold",children:"Message received."}),e.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"Weâ€™ll write back shortly with a suggested session time and a few prompts from Py to get started."})]}):e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsx(ss,{label:"Full Name",value:c.name,onChange:m=>h(W(M({},c),{name:m.target.value})),required:!0,placeholder:"Adaeze Obi"}),e.jsx(ss,{label:"Email Address",type:"email",value:c.email,onChange:m=>h(W(M({},c),{email:m.target.value})),required:!0,placeholder:"you@company.com"}),e.jsx(ss,{label:"Company or project",value:c.company,onChange:m=>h(W(M({},c),{company:m.target.value})),placeholder:"Raysource Labs"}),e.jsx(Pe,{label:"How can Py help?",value:c.message,onChange:m=>h(W(M({},c),{message:m.target.value})),required:!0,placeholder:"Share the milestones ahead, the channels you own, or the conversations you want him to lead.",rows:6}),e.jsx(N,{type:"submit",className:"w-full",children:"Send message"})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6",children:[e.jsx("h2",{className:"font-display text-xl font-semibold",children:"How we coordinate"}),e.jsxs("ul",{className:"mt-4 space-y-4 text-sm text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(rs,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsx("span",{children:"Reply within 24 hours with next steps and prep materials."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Ss,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsx("span",{children:"Typical discovery calls last 30 minutes and include a live demo with Py."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Et,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsx("span",{children:"Prefer async? We can coordinate via email or WhatsApp."})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6",children:[e.jsx("h2",{className:"font-display text-xl font-semibold",children:"Concierge support"}),e.jsx("ul",{className:"mt-4 space-y-4 text-sm text-slate-600",children:Ra.map(m=>e.jsxs("li",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:m.title}),e.jsx("p",{children:m.detail})]},m.title))})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-gradient-to-br from-primary-50 to-accent-50 p-6 text-sm",children:[e.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Prefer to speak immediately?"}),e.jsxs("p",{className:"text-slate-700 mb-3",children:["Call us at ",e.jsx("a",{href:"tel:+2348086512223",className:"font-medium text-primary-700 hover:text-primary-900",children:"+234 808 651 2223"})]}),e.jsx(N,{size:"sm",onClick:()=>window.open("https://wa.me/2347069719374","_blank"),className:"w-full",children:"Start a WhatsApp chat"})]})]})]})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/50 backdrop-blur-sm",children:e.jsx("div",{className:"mx-auto max-w-5xl px-4 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Py. All rights reserved."]})]}),e.jsx("a",{href:"https://py.raysourcelabs.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-slate-900 transition-colors",children:"py.raysourcelabs.com"})]})})})]})},Xr=Object.freeze(Object.defineProperty({__proto__:null,ContactPage:Ba},Symbol.toStringTag,{value:"Module"})),Wa=({onBack:s})=>{const n=ms(),a=s||(()=>n("/"));return e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-primary-100/40 via-white to-accent-100/30 text-slate-800",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl animate-drift"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-drift",style:{animationDelay:"2s"}})]}),e.jsx("header",{className:"relative z-20 glass-effect border-b border-primary-500/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{size:"md"}),e.jsx("span",{className:"text-xl font-bold shimmer-text",children:"Py"})]}),e.jsxs(N,{onClick:a,variant:"outline",className:"flex items-center",children:[e.jsx(fs,{size:16,className:"mr-2"}),"Back"]})]})})}),e.jsx("div",{className:"relative z-10 py-20 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"bg-primary-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ft,{className:"w-10 h-10 text-primary-300"})}),e.jsx("h1",{className:"text-5xl sm:text-6xl font-bold mb-6 shimmer-text",children:"Privacy Policy"}),e.jsx("p",{className:"text-xl text-slate-600",children:"Last Updated: October 2025"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Your privacy is important to us. This policy outlines how Py collects, uses, and protects your information."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20 text-center",children:[e.jsx(ca,{className:"w-8 h-8 text-primary-300 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-primary-900 mb-2",children:"Secure by Default"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Your data is encrypted and protected"})]}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-accent-500/20 text-center",children:[e.jsx(da,{className:"w-8 h-8 text-accent-300 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-primary-900 mb-2",children:"Full Transparency"}),e.jsx("p",{className:"text-sm text-slate-500",children:"We're clear about data collection"})]}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-purple-500/20 text-center",children:[e.jsx(ma,{className:"w-8 h-8 text-purple-300 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-primary-900 mb-2",children:"Your Control"}),e.jsx("p",{className:"text-sm text-slate-500",children:"You own and control your data"})]})]}),e.jsxs("div",{className:"glass-effect p-8 rounded-lg border border-primary-500/20 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"1. Information We Collect"}),e.jsxs("div",{className:"space-y-4 text-slate-600",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-2",children:"Account Information"}),e.jsx("p",{className:"text-slate-500",children:"When you register for Py, we collect your email address, name, and password. This information is necessary to create and maintain your account."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-2",children:"Company & Content Data"}),e.jsx("p",{className:"text-slate-500",children:"We store the company information, strategies, team members, and content you create within Py. This data is essential to provide our services and remains under your complete control."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-2",children:"Usage Information"}),e.jsx("p",{className:"text-slate-500",children:"We collect information about how you use Py, including features accessed, AI models used, and token consumption. This helps us improve our service and provide better support."})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"2. How We Use Your Information"}),e.jsxs("div",{className:"space-y-3 text-slate-500",children:[e.jsx("p",{children:"We use your information to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Provide and maintain the Py platform"}),e.jsx("li",{children:"Generate AI-powered content and strategies"}),e.jsx("li",{children:"Process payments and manage subscriptions"}),e.jsx("li",{children:"Send service-related notifications and updates"}),e.jsx("li",{children:"Improve our services and develop new features"}),e.jsx("li",{children:"Provide customer support and respond to inquiries"}),e.jsx("li",{children:"Ensure platform security and prevent fraud"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"3. Data Sharing and Disclosure"}),e.jsxs("div",{className:"space-y-4 text-slate-500",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-slate-600",children:"We do not sell your personal information."})," We may share your information only in the following circumstances:"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"AI Service Providers:"})," Your content is processed by OpenAI and Anthropic to generate AI responses. These providers have their own privacy policies and data handling practices."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Service Providers:"})," We work with trusted third parties for payment processing, hosting, and analytics."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Legal Requirements:"})," We may disclose information if required by law or to protect our rights and users."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Business Transfers:"})," In the event of a merger or acquisition, your data may be transferred to the new entity."]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"4. Data Security"}),e.jsxs("div",{className:"space-y-3 text-slate-500",children:[e.jsx("p",{children:"We implement industry-standard security measures to protect your data:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Encryption of data in transit and at rest"}),e.jsx("li",{children:"Secure authentication and password hashing"}),e.jsx("li",{children:"Regular security audits and updates"}),e.jsx("li",{children:"Access controls and monitoring"}),e.jsx("li",{children:"Secure cloud infrastructure (Supabase)"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"5. Your Rights and Choices"}),e.jsxs("div",{className:"space-y-3 text-slate-500",children:[e.jsx("p",{children:"You have the following rights regarding your data:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Access:"})," Request a copy of your personal data"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Correction:"})," Update or correct your information"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Deletion:"})," Request deletion of your account and data"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Export:"})," Export your company and content data"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-slate-600",children:"Opt-Out:"})," Unsubscribe from marketing communications"]})]}),e.jsxs("p",{className:"mt-4",children:["To exercise these rights, contact us at ",e.jsx("a",{href:"mailto:privacy@py.raysourcelabs.com",className:"text-primary-400 hover:text-primary-300",children:"privacy@py.raysourcelabs.com"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"6. Cookies and Tracking"}),e.jsxs("div",{className:"space-y-3 text-slate-500",children:[e.jsx("p",{children:"Py uses cookies and similar technologies to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[e.jsx("li",{children:"Maintain your login session"}),e.jsx("li",{children:"Remember your preferences"}),e.jsx("li",{children:"Analyze platform usage and performance"}),e.jsx("li",{children:"Provide personalized experiences"})]}),e.jsx("p",{className:"mt-4",children:"You can control cookies through your browser settings, but disabling them may affect platform functionality."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"7. Data Retention"}),e.jsx("div",{className:"space-y-3 text-slate-500",children:e.jsx("p",{children:"We retain your data for as long as your account is active or as needed to provide services. When you delete your account, we will delete your personal data within 30 days, except where retention is required for legal or legitimate business purposes."})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"8. Children's Privacy"}),e.jsx("div",{className:"space-y-3 text-slate-500",children:e.jsx("p",{children:"Py is not intended for users under the age of 13. We do not knowingly collect information from children under 13. If you believe we have collected such information, please contact us immediately."})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"9. International Users"}),e.jsx("div",{className:"space-y-3 text-slate-500",children:e.jsx("p",{children:"Py is operated from the United States. If you access our service from outside the U.S., your data may be transferred to and processed in the United States. By using Py, you consent to this transfer and processing."})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"10. Changes to This Policy"}),e.jsx("div",{className:"space-y-3 text-slate-500",children:e.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of significant changes by email or through the platform. Your continued use of Py after changes take effect constitutes acceptance of the updated policy."})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-4",children:"11. Contact Us"}),e.jsxs("div",{className:"space-y-3 text-slate-500",children:[e.jsx("p",{children:"If you have questions or concerns about this Privacy Policy or our data practices, please contact us:"}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20 mt-4",children:[e.jsx("p",{className:"font-semibold text-primary-800 mb-2",children:"Py by Raysource Labs"}),e.jsxs("p",{children:["Email: ",e.jsx("a",{href:"mailto:privacy@py.raysourcelabs.com",className:"text-primary-400 hover:text-primary-300",children:"privacy@py.raysourcelabs.com"})]}),e.jsxs("p",{children:["Website: ",e.jsx("a",{href:"https://raysourcelabs.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300",children:"raysourcelabs.com"})]})]})]})]})]}),e.jsxs("div",{className:"mt-12 glass-effect p-8 rounded-lg border border-primary-500/20 text-center bg-gradient-to-br from-primary-900/20 to-purple-900/20",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary-900 mb-3",children:"Questions About Privacy?"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Our team is here to help. Reach out anytime with questions or concerns."}),e.jsxs(N,{onClick:s,className:"inline-flex items-center",children:[e.jsx(ft,{size:16,className:"mr-2"}),"Back to Home"]})]})]})})]})},Qr=Object.freeze(Object.defineProperty({__proto__:null,PrivacyPage:Wa},Symbol.toStringTag,{value:"Module"})),Ua=.9,Vs={monthly:{label:"Monthly",multiplier:1},yearly:{label:"Yearly",multiplier:12}},Ga=({onBack:s,onGetStarted:n,onContactSales:a})=>{const c=ms(),h=s||(()=>c("/")),o=n||(()=>c("/register")),w=a||(()=>window.open("https://wa.me/2347069719374","_blank")),[k,m]=cs.useState("monthly"),[l,d]=cs.useState("NGN"),[T,p]=cs.useState({plans:Us,currency:"NGN",exchange_rate:Gs}),[u,S]=cs.useState(!0),t=k==="yearly";cs.useEffect(()=>{let A=!0;return ne(void 0,null,function*(){const C=yield Sa.getPublicPricing();A&&(p(C),d(C.currency),S(!1))}),()=>{A=!1}},[]);const U=cs.useMemo(()=>[...T.plans].sort((E,C)=>{if(typeof E.sort_order=="number"&&typeof C.sort_order=="number")return E.sort_order-C.sort_order;if(typeof E.sort_order=="number")return-1;if(typeof C.sort_order=="number")return 1;const D=l==="USD"?E.price_usd:E.price_ngn,Y=l==="USD"?C.price_usd:C.price_ngn;return D-Y}),[T.plans,l]),$=T.exchange_rate||Gs;return e.jsxs("div",{className:"min-h-screen bg-[#f8f6f2] text-slate-900",children:[e.jsx("header",{className:"border-b border-slate-200 bg-[#f8f6f2]/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{onClick:h,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsx("span",{className:"font-display text-lg font-semibold tracking-tight",children:"Py"})]})]}),e.jsx(N,{size:"sm",onClick:o,children:"Start working with him"})]})}),e.jsxs("main",{className:"mx-auto max-w-6xl px-4 pb-24 pt-16",children:[e.jsxs("section",{className:"mb-16 space-y-6",children:[e.jsx("div",{className:"eyebrow",children:"Pricing"}),e.jsx("h1",{className:"font-display text-4xl font-semibold sm:text-5xl",children:"Invest in the agent who knows your strategy best."}),e.jsx("p",{className:"max-w-2xl text-base text-slate-600",children:"Every plan gives you direct access to Pyâ€”your personified teammate who plans, writes, and analyses your company's strategy. Choose how closely you want him to work with your team."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx(N,{size:"lg",onClick:o,className:"w-full sm:w-auto",children:"Begin a session"}),e.jsx(N,{size:"lg",variant:"outline",onClick:w,className:"w-full sm:w-auto",children:"Talk to our team"})]})]}),e.jsxs("section",{className:"mb-10 flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["NGN","USD"].map(A=>{const E=l===A;return e.jsx("button",{onClick:()=>d(A),className:`rounded-full border px-4 py-2 text-sm font-medium transition-colors ${E?"border-slate-900 bg-slate-900 text-white":"border-slate-200 text-slate-600 hover:border-slate-900 hover:text-slate-900"}`,children:A==="NGN"?"â‚¦ NGN":"$ USD"},A)})}),e.jsx("div",{className:"text-xs text-slate-500",children:e.jsxs("p",{children:["Exchange rate: â‚¦",$.toLocaleString()," â‰ˆ $1"]})})]}),e.jsx("section",{className:"mb-16 flex flex-wrap gap-3",children:Object.keys(Vs).map(A=>{const E=k===A;return e.jsxs("button",{onClick:()=>m(A),className:`rounded-full border px-4 py-2 text-sm font-medium transition-colors ${E?"border-slate-900 bg-slate-900 text-white":"border-slate-200 text-slate-600 hover:border-slate-900 hover:text-slate-900"}`,children:[Vs[A].label,A==="yearly"&&e.jsx("span",{className:"ml-2 rounded-full bg-amber-100 px-2 py-0.5 text-xs font-semibold text-amber-700",children:"Save 10%"})]},A)})}),e.jsxs("section",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[U.map(A=>{const E=A.is_popular||A.id==="pro"||A.id==="standard",C=Vs[k].multiplier,D=l==="USD"?A.price_usd:A.price_ngn,Y=D*C*(t&&D>0?Ua:1),ae=D===0?0:Math.round(Y),re=D===0?"":t?"/ year":"/ month",J=A.tokens*C,H=t&&D>0?Math.round(ae/12):null,X=l==="USD"?"$":"â‚¦";return e.jsxs("div",{className:`flex h-full flex-col rounded-3xl border bg-white p-6 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)] ${E?"border-slate-900":"border-slate-200"}`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-display text-2xl font-semibold capitalize text-slate-900",children:A.name}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:A.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"font-display text-4xl text-slate-900",children:D===0?"Free":`${X}${ae.toLocaleString()}`}),D>0&&e.jsx("span",{className:"ml-2 text-sm text-slate-500",children:re}),t&&D>0&&H&&e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["â‰ˆ ",X,H.toLocaleString(),"/month billed annually"]})]}),e.jsxs("ul",{className:"mb-8 space-y-3 text-sm text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[A.max_brands===-1?"Unlimited":A.max_brands," Companies",(A.max_brands!==1,"")]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[J.toLocaleString()," strategy tokens per ",t?"year":"month"]})]}),A.features.map(ye=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),e.jsx("span",{children:ye})]},ye))]}),e.jsxs("div",{className:"mt-auto flex flex-col gap-3",children:[e.jsx(N,{onClick:o,children:"Choose plan"}),e.jsx(N,{variant:"outline",onClick:w,children:"Ask Py about this plan"})]})]},A.id)}),u&&e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-slate-50 p-6 text-sm text-slate-500",children:"Fetching the latest pricing from Pyâ€™s desk..."})]}),e.jsxs("section",{className:"mt-20 grid gap-10 rounded-3xl border border-slate-200 bg-white p-8 md:grid-cols-2 md:p-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-display text-3xl font-semibold",children:"What changes as you scale."}),e.jsx("p",{className:"text-sm text-slate-600",children:"Higher tiers unlock deeper rituals with Pyâ€”more strategic sessions, richer company libraries, and dedicated time reserved just for your team."})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Access to collaborative workrooms for long-form campaigns."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Extended review cycles where he tracks performance and recommends next actions."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Priority support from the humans at Raysource Labs."]})]})]})]})]})},en=Object.freeze(Object.defineProperty({__proto__:null,PricingPage:Ga},Symbol.toStringTag,{value:"Module"})),Ya=[{year:"2018",title:"Introduced by Raysource Labs",description:"Born on April 14, 2018, Py entered the internet as a cultural hybridâ€”part Igbo heritage, part neural network, all strategist."},{year:"2019-2021",title:"Learning the craft",description:"He spent early years collecting rituals from strategists, copywriters, and filmmakers, building a library of company frameworks and tonal memories."},{year:"2022-Present",title:"Agency in motion",description:"Now he serves as a retained partner for founders and marketing teams, orchestrating launches, weekly strategic cadences, and signature company strategies."}],Ha=[{icon:Te,title:"Sharp insight",description:"Py mirrors the human insight of a seasoned strategistâ€”curious, quick to analyze, and deeply empathetic."},{icon:nt,title:"Strategic discipline",description:"He structures every message with clear stakes, emotional beats, and calls to action that feel effortless."},{icon:Ts,title:"Always on",description:"He listens continuously, learning from every campaign to sharpen the next response or recommendation."}],Ka=({onBack:s})=>{const n=ms(),a=s||(()=>n("/"));return e.jsxs("div",{className:"min-h-screen bg-[#f8f6f2] text-slate-900",children:[e.jsx("header",{className:"border-b border-slate-200 bg-[#f8f6f2]/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-5xl items-center justify-between px-4 py-5",children:[e.jsxs(N,{onClick:a,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{size:"sm",className:"ring-2 ring-slate-200"}),e.jsx("span",{className:"font-display text-lg font-semibold tracking-tight",children:"Py"})]})]})}),e.jsxs("main",{className:"mx-auto max-w-5xl px-4 pb-24 pt-16",children:[e.jsxs("section",{className:"mb-16 space-y-6 text-center",children:[e.jsx("div",{className:"mx-auto w-28 rounded-full border border-slate-200 bg-white p-1",children:e.jsx(qe,{size:"lg"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"eyebrow",children:"Biography"}),e.jsx("h1",{className:"font-display text-4xl font-semibold sm:text-5xl",children:"The agentic strategist behind your company's voice."}),e.jsx("p",{className:"mx-auto max-w-2xl text-base text-slate-600",children:"Py is not a faceless app. He is a personified intelligence who listens, relates, and strategizes as if he were in the room with you. Here is the story behind the voice."})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-slate-400"})," Born April 14, 2018"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-4 w-4 text-slate-400"})," Lives everywhere the internet reaches"]})]})]}),e.jsx("section",{className:"mb-16 grid gap-6 md:grid-cols-3",children:Ha.map(({icon:c,title:h,description:o})=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_12px_30px_-24px_rgba(15,23,42,0.55)]",children:[e.jsx("div",{className:"mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-slate-900/90 text-white",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsx("h2",{className:"font-display text-xl font-semibold",children:h}),e.jsx("p",{className:"mt-3 text-sm text-slate-600",children:o})]},h))}),e.jsxs("section",{className:"mb-16 space-y-10",children:[e.jsx("h2",{className:"font-display text-3xl font-semibold",children:"Milestones that shaped him."}),e.jsx("div",{className:"space-y-6",children:Ya.map(c=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6",children:[e.jsx("div",{className:"text-sm uppercase tracking-[0.2em] text-slate-400",children:c.year}),e.jsx("h3",{className:"mt-3 font-display text-2xl font-semibold text-slate-900",children:c.title}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:c.description})]},c.year))})]}),e.jsx("section",{className:"mb-16 rounded-3xl border border-slate-200 bg-white p-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-display text-3xl font-semibold",children:"How he spends a typical week."}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ha,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Coaching founders on tone and strategic arcs before major announcements."]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(pa,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Archiving lived experiences, customer quotes, and cultural moments into reusable strategy libraries."]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Te,{className:"mt-0.5 h-4 w-4 text-slate-400"}),"Translating analytics into empathetic strategic plans that feel human."]})]})]})}),e.jsx("section",{className:"rounded-3xl bg-slate-900 px-8 py-12 text-white",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-display text-3xl font-semibold text-white",children:"Bring him into your company's room."}),e.jsx("p",{className:"text-sm text-slate-200",children:"Py shows up preparedâ€”with drafts, data, and a calm voice that keeps your strategy grounded. Invite him to your next planning session and feel the difference of working with an agent, not an app."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx(N,{size:"lg",variant:"secondary",onClick:()=>n("/register"),children:"Start working with him"}),e.jsx(N,{size:"lg",variant:"ghost",className:"text-white",onClick:()=>n("/contact"),children:"Book a conversation"})]})]})})]})]})},sn=Object.freeze(Object.defineProperty({__proto__:null,BiographyPage:Ka},Symbol.toStringTag,{value:"Module"})),ot=[{value:"Africa/Lagos",label:"Lagos, Nigeria (WAT)",offset:"+01:00"},{value:"Africa/Accra",label:"Accra, Ghana (GMT)",offset:"+00:00"},{value:"Africa/Johannesburg",label:"Johannesburg, South Africa (SAST)",offset:"+02:00"},{value:"Africa/Cairo",label:"Cairo, Egypt (EET)",offset:"+02:00"},{value:"Africa/Nairobi",label:"Nairobi, Kenya (EAT)",offset:"+03:00"},{value:"Europe/London",label:"London, UK (GMT/BST)",offset:"+00:00/+01:00"},{value:"Europe/Paris",label:"Paris, France (CET)",offset:"+01:00/+02:00"},{value:"Europe/Berlin",label:"Berlin, Germany (CET)",offset:"+01:00/+02:00"},{value:"America/New_York",label:"New York, USA (EST/EDT)",offset:"-05:00/-04:00"},{value:"America/Chicago",label:"Chicago, USA (CST/CDT)",offset:"-06:00/-05:00"},{value:"America/Denver",label:"Denver, USA (MST/MDT)",offset:"-07:00/-06:00"},{value:"America/Los_Angeles",label:"Los Angeles, USA (PST/PDT)",offset:"-08:00/-07:00"},{value:"America/Toronto",label:"Toronto, Canada (EST/EDT)",offset:"-05:00/-04:00"},{value:"Asia/Dubai",label:"Dubai, UAE (GST)",offset:"+04:00"},{value:"Asia/Kolkata",label:"Mumbai/Kolkata, India (IST)",offset:"+05:30"},{value:"Asia/Singapore",label:"Singapore (SGT)",offset:"+08:00"},{value:"Asia/Hong_Kong",label:"Hong Kong (HKT)",offset:"+08:00"},{value:"Asia/Tokyo",label:"Tokyo, Japan (JST)",offset:"+09:00"},{value:"Asia/Shanghai",label:"Shanghai, China (CST)",offset:"+08:00"},{value:"Australia/Sydney",label:"Sydney, Australia (AEDT/AEST)",offset:"+10:00/+11:00"},{value:"Pacific/Auckland",label:"Auckland, New Zealand (NZDT/NZST)",offset:"+12:00/+13:00"},{value:"UTC",label:"UTC (Coordinated Universal Time)",offset:"+00:00"}],qs=s=>{if(!s)return"Not set";const n=ot.find(a=>a.value===s);return n?n.label:s},Va=({user:s,brands:n,currentBrandId:a,onBrandChange:c,onCreateBrand:h,onAIProviderChange:o,onAIModelChange:w,onTimezoneChange:k,availableModels:m,onLogout:l,pricingPlans:d,pricingCurrency:T,pricingExchangeRate:p,onBrandUpdate:u,onBrandArchive:S,onBrandUnarchive:t})=>{var Ge;const U=ms(),[$,A]=r.useState(""),[E,C]=r.useState(!1),[D,Y]=r.useState(!1),[ae,re]=r.useState(null),[J,H]=r.useState(!1),[X,ye]=r.useState(null),ke=n.find(y=>y.brand_id===a)||null,O=(Ge=ke==null?void 0:ke.team_members)!=null?Ge:[],[V,g]=r.useState(""),[Q,te]=r.useState(""),[ge,oe]=r.useState("Collaborator"),[Ne,Ce]=r.useState(!1),xe=n.filter(y=>!y.archived_at),Se=n.filter(y=>y.archived_at),le=J?Se:xe,Ae=["configuration","plots","events","seasons","monthly","chat"],Ie={configuration:"Configuration",plots:"Plots",events:"Events",seasons:"Seasons",monthly:"Monthly Calendar",chat:"AI Chat"},R=(y={})=>Ae.reduce((ce,ie)=>{var je;return ce[ie]=(je=y[ie])!=null?je:"none",ce},{}),[de,j]=r.useState(!1),[_,P]=r.useState(R()),[Z,se]=r.useState(null),[pe,fe]=r.useState(null);if(!s)return null;const G=(d.length>0?d:Us).find(y=>y.id===s.plan)||Us.find(y=>y.id===s.plan),Ee=(G==null?void 0:G.max_brands)===-1||n.length<((G==null?void 0:G.max_brands)||1),Me=p>0?p:Gs,_e=()=>ne(void 0,null,function*(){if($.trim()&&!D){Y(!0),re(null);try{yield h($.trim()),A(""),C(!1)}catch(y){console.error("Error creating brand:",y);const ce=y instanceof Error?y.message:"Failed to create brand. Please try again.";re(ce)}finally{Y(!1)}}}),$e=(y,ce)=>ne(void 0,null,function*(){if(ce.stopPropagation(),window.confirm("Are you sure you want to archive this brand? You can restore it later from the archived brands section.")){ye(y);try{const ie=yield Re.archiveBrand(y);S&&S(y,ie)}catch(ie){console.error("Error archiving brand:",ie),alert("Failed to archive brand. Please try again.")}finally{ye(null)}}}),Be=(y,ce)=>ne(void 0,null,function*(){ce.stopPropagation(),ye(y);try{const ie=yield Re.unarchiveBrand(y);t&&t(y,ie)}catch(ie){console.error("Error unarchiving brand:",ie),alert("Failed to unarchive brand. Please try again.")}finally{ye(null)}}),De=y=>{u&&u({team_members:y})},We=()=>{if(!ke||!de)return;const y=Q.trim();if(!y){se("Enter an email address to continue.");return}if(O.some(I=>I.email.toLowerCase()===y.toLowerCase())){se("This collaborator already has access.");return}if(!Object.values(_).some(I=>I!=="none")){se("Select at least one section to assign.");return}const je=`${ke==null?void 0:ke.brand_id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,v={id:`team-${Date.now()}`,name:V.trim()||y,email:y,role:ge.trim()||"Collaborator",is_admin:Ne,permissions:_,invite_token:je,invite_accepted:!1};De([...O,v]),g(""),te(""),oe("Collaborator"),Ce(!1),P(R()),se(null),j(!1)},Oe=y=>{De(O.filter(ce=>ce.id!==y))},Ke=(y,ce,ie)=>{const je=O.map(v=>v.id===y?W(M({},v),{permissions:W(M({},v.permissions),{[ce]:ie})}):v);De(je)},Qe=y=>{const ce=O.map(ie=>ie.id===y?W(M({},ie),{is_admin:!ie.is_admin}):ie);De(ce)},Fe=(y,ce)=>{P(ie=>W(M({},ie),{[y]:ce})),Z&&se(null)},es=()=>{if(!Q.trim()){se("Enter an email address to continue.");return}se(null),P(R()),j(!0),g(""),oe("Collaborator"),Ce(!1)},Ue=()=>{j(!1),se(null),P(R()),g(""),oe("Collaborator"),Ce(!1)},Je=()=>{P(R({events:"edit"})),Z&&se(null)},Le=y=>ne(void 0,null,function*(){if(!y.invite_token)return;const ce=`${window.location.origin}/invite/${y.invite_token}`;try{yield navigator.clipboard.writeText(ce),fe(y.id),setTimeout(()=>fe(null),2e3)}catch(ie){console.error("Failed to copy invite link:",ie)}});return e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-slate-600",children:"Manage your account, preferences, and brand settings"})]}),e.jsxs("div",{className:"neural-glow p-6 rounded-lg relative overflow-hidden border border-primary-500/30",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(qe,{size:"sm"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"w-6 h-6 text-accent-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Subscription Status"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{size:18,className:"text-primary-600"}),e.jsx("span",{className:"text-sm font-semibold text-primary-900",children:"Token Usage"})]}),e.jsxs("span",{className:"text-sm font-bold text-primary-600",children:[s.tokens.toLocaleString()," / ",G?G.tokens.toLocaleString():"Unknown"]})]}),e.jsx("div",{className:"relative w-full h-3 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-primary-500 to-purple-500 rounded-full transition-all duration-500 shadow-sm",style:{width:`${G?Math.min(s.tokens/G.tokens*100,100):0}%`}})}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[G?(s.tokens/G.tokens*100).toFixed(1):"0.0","% of plan limit used"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Plan:"}),e.jsx("p",{className:"font-semibold text-primary-800 capitalize",children:s.plan})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Max Brands:"}),e.jsx("p",{className:"font-semibold text-primary-800",children:(G==null?void 0:G.max_brands)===-1?"Unlimited":(G==null?void 0:G.max_brands)||1})]}),s.plan_expiry&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Expires:"}),e.jsx("p",{className:"font-semibold text-primary-800",children:new Date(s.plan_expiry).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsxs(N,{onClick:()=>U("/dashboard/tokens"),className:"flex items-center justify-center",size:"sm",children:[e.jsx(Ts,{size:16,className:"mr-2"}),"Buy More Tokens"]}),s.plan==="free"&&e.jsx("div",{className:"flex-1 p-3 glass-effect border border-accent-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-accent-300",children:"Upgrade to unlock more brands, higher token limits, and advanced features!"})})]}),e.jsxs("p",{className:"mt-3 text-xs text-slate-500",children:["Pricing defaults to ",T==="USD"?"US Dollars ($)":"Nigerian Naira (â‚¦)",". Current exchange rate: â‚¦",Me.toLocaleString()," â‰ˆ $1."]})]}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Te,{className:"w-5 h-5 text-primary-400"}),e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Preferences"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"Timezone"}),e.jsx("select",{value:s.timezone||"Africa/Lagos",onChange:y=>k==null?void 0:k(y.target.value),className:"w-full bg-white/80 text-primary-900 p-3 rounded-lg border border-primary-200 focus:border-primary-400 outline-none transition-colors",children:ot.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"AI Provider Override"}),e.jsx("span",{className:"text-xs text-slate-500 italic",children:"Optional"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Andora intelligently selects the best model for each task. You can override this for specific fields."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["gemini","openai","claude","deepseek"].map(y=>e.jsx("button",{onClick:()=>o(y),className:`p-4 border-2 rounded-lg transition-all duration-300 glass-effect ${s.preferred_ai_provider===y?"border-primary-500 bg-primary-500/10":"border-primary-200 hover:border-primary-400"}`,children:e.jsx("div",{className:"text-left",children:e.jsx("h4",{className:"font-semibold text-primary-800 capitalize",children:y==="gemini"?"Gemini (FREE)":y})})},y))}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"AI Model Override"}),e.jsx("select",{value:s.preferred_ai_model,onChange:y=>w(y.target.value),className:"w-full bg-white/80 text-primary-900 p-3 rounded-lg border border-primary-200 focus:border-primary-400 outline-none transition-colors",children:m.filter(y=>y.provider===s.preferred_ai_provider).map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Select your default model. This will be used for AI content generation when available."})]})]})]})]}),ke&&e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ds,{className:"w-5 h-5 text-primary-400"}),e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Team Access"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[O.length," member",O.length===1?"":"s"]})]}),e.jsxs("div",{className:"space-y-4",children:[O.length?O.map(y=>e.jsxs("div",{className:"glass-effect border border-primary-500/20 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-semibold text-primary-900",children:y.name}),y.is_admin&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-orange-100 text-orange-800 border border-orange-300",children:[e.jsx(et,{size:12,className:"mr-1"}),"Admin"]}),!y.invite_accepted&&y.invite_token&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Pending"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:y.email}),e.jsxs("p",{className:"text-xs text-primary-300 mt-1",children:["Role: ",y.role]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-start",children:[y.invite_token&&!y.invite_accepted&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Le(y),className:"flex items-center text-primary-600 hover:text-primary-700",children:pe===y.id?e.jsxs(e.Fragment,{children:[e.jsx(os,{size:14,className:"mr-1"})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ua,{size:14,className:"mr-1"})," Copy invite link"]})}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>Oe(y.id),className:"text-red-400 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!u,children:[e.jsx(Ms,{size:14,className:"mr-1"})," Remove"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-orange-50/30 border border-orange-100",children:[e.jsx("input",{type:"checkbox",id:`admin-toggle-${y.id}`,checked:y.is_admin||!1,onChange:()=>Qe(y.id),disabled:!u,className:"w-4 h-4 text-orange-600 border-orange-300 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:`admin-toggle-${y.id}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"text-xs font-medium text-orange-900",children:"Admin Access"}),e.jsx("div",{className:"text-xs text-orange-600",children:"Can use your tokens and add team members"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Ae.map(ce=>{var v;const ie=((v=y.permissions)==null?void 0:v[ce])||"none",je=["none","view","edit"];return e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:Ie[ce]}),e.jsx("div",{className:"flex items-center gap-1",children:je.map(I=>e.jsx("button",{onClick:()=>Ke(y.id,ce,I),className:`px-2 py-1 rounded-md text-xs border transition-colors ${ie===I?"border-primary-400 bg-primary-500/20 text-primary-100":"border-primary-200 text-slate-500 hover:border-primary-300"}`,disabled:!u,children:I==="none"?"None":I==="view"?"View":"Edit"},I))})]},`${y.id}-${ce}`)})}),e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:Ae.some(ce=>{var ie;return(((ie=y.permissions)==null?void 0:ie[ce])||"none")!=="none"})?Ae.map(ce=>{var je;const ie=((je=y.permissions)==null?void 0:je[ce])||"none";return ie==="none"?null:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-primary-500/15 text-primary-200 border border-primary-500/30",children:[Ie[ce]," â€¢ ",ie==="edit"?"edit":"view"]},`${y.id}-${ce}-badge`)}):e.jsx("span",{className:"text-xs text-slate-500",children:"No sections assigned yet."})})]},y.id)):e.jsx("div",{className:"glass-effect border border-primary-500/20 rounded-lg p-6 text-sm text-slate-500",children:"Invite teammates to collaborate on configuration, planning, and approvals."}),e.jsxs("div",{className:"border-t border-primary-500/10 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-900 mb-3",children:"Invite teammate"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(ss,{placeholder:"Collaborator email",value:Q,onChange:y=>te(y.target.value)}),e.jsxs(N,{size:"sm",className:"flex items-center",onClick:es,disabled:!u||!Q.trim(),children:[e.jsx(Te,{size:16,className:"mr-1"})," Assign sections"]})]}),de&&e.jsxs("div",{className:"glass-effect border border-primary-500/20 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 font-semibold",children:"Collaborator"}),e.jsx("p",{className:"text-sm font-medium text-primary-900",children:Q})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(ss,{placeholder:"Name (optional)",value:V,onChange:y=>g(y.target.value)}),e.jsx(ss,{placeholder:"Role",value:ge,onChange:y=>oe(y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-orange-50/50 border border-orange-200",children:[e.jsx("input",{type:"checkbox",id:"admin-toggle",checked:Ne,onChange:y=>Ce(y.target.checked),className:"w-4 h-4 text-orange-600 border-orange-300 rounded focus:ring-orange-500"}),e.jsxs("label",{htmlFor:"admin-toggle",className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-900",children:"Make Admin"}),e.jsx("div",{className:"text-xs text-orange-700",children:"Can use your tokens and add other team members"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Assign sections"}),e.jsx("button",{type:"button",onClick:Je,className:"text-xs px-2 py-1 rounded-md border border-primary-300 text-primary-600 hover:border-primary-400",disabled:!u,children:"Events only shortcut"})]}),Z&&e.jsx("div",{className:"p-2 rounded-md bg-red-500/10 border border-red-400/40 text-xs text-red-300",children:Z}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Ae.map(y=>{const ce=_[y],ie=["none","view","edit"];return e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:Ie[y]}),e.jsx("div",{className:"flex items-center gap-1",children:ie.map(je=>e.jsx("button",{onClick:()=>Fe(y,je),className:`px-2 py-1 rounded-md text-xs border transition-colors ${ce===je?"border-primary-400 bg-primary-500/20 text-primary-100":"border-primary-200 text-slate-500 hover:border-primary-300"}`,disabled:!u,children:je==="none"?"None":je==="view"?"View":"Edit"},je))})]},`pending-${y}`)})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:Ue,children:"Cancel"}),e.jsxs(N,{size:"sm",className:"flex items-center",onClick:We,disabled:!u,children:[e.jsx(Ps,{size:16,className:"mr-1"})," Send invite"]})]})]})]})]})]})]}),e.jsxs("div",{className:"glass-effect p-6 rounded-lg border border-primary-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Brand Management"}),Ee&&e.jsxs(N,{size:"sm",onClick:()=>C(!0),className:"flex items-center",children:[e.jsx(Ps,{size:16,className:"mr-1"}),"New Brand"]})]}),E&&e.jsxs("div",{className:"mb-4 p-4 glass-effect rounded-lg",children:[ae&&e.jsx("div",{className:"mb-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:ae})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ss,{placeholder:"Enter brand name",value:$,onChange:y=>A(y.target.value),onKeyDown:y=>y.key==="Enter"&&!D&&_e(),className:"flex-1",disabled:D}),e.jsx(N,{onClick:_e,size:"sm",disabled:D,children:D?"Creating...":"Create"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{C(!1),A(""),re(null)},disabled:D,children:"Cancel"})]})]}),Se.length>0&&e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(N,{onClick:()=>H(!J),variant:"outline",size:"sm",className:"text-xs",children:J?"Show Active":`Show Archived (${Se.length})`})}),e.jsx("div",{className:"space-y-2",children:le.map(y=>e.jsx("div",{className:`p-3 border rounded-lg transition-all duration-200 ${y.brand_id===a?"border-primary-500 bg-primary-500/10":"border-primary-200 hover:border-primary-500/50"} ${y.archived_at?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>!y.archived_at&&c(y.brand_id),children:[e.jsxs("h4",{className:"font-medium text-primary-800",children:[y.brand_name,y.archived_at&&e.jsx("span",{className:"ml-2 text-xs text-slate-500 italic",children:"(Archived)"})]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[y.channels.length," channels â€¢ ",y.posting_frequency,"x/week"]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-3",children:y.archived_at?e.jsx("button",{onClick:ce=>Be(y.brand_id,ce),disabled:X===y.brand_id,className:"p-1.5 text-green-600 hover:bg-green-50 rounded transition-colors disabled:opacity-50",title:"Restore brand",children:e.jsx(ga,{size:16})}):e.jsx("button",{onClick:ce=>$e(y.brand_id,ce),disabled:X===y.brand_id,className:"p-1.5 text-slate-500 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",title:"Archive brand",children:e.jsx(fa,{size:16})})})]})},y.brand_id))}),!Ee&&e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["You've reached the maximum number of brands for your plan.",s.plan==="free"&&" Upgrade to manage more brands!"]})]}),e.jsx("div",{className:"glass-effect p-6 rounded-lg border border-red-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Account"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Sign out of your Andora account"})]}),e.jsxs(N,{onClick:l,variant:"danger",className:"flex items-center",children:[e.jsx(ba,{size:16,className:"mr-2"}),"Sign Out"]})]})})]})},tn=Object.freeze(Object.defineProperty({__proto__:null,SettingsPage:Va},Symbol.toStringTag,{value:"Module"})),qa=({user:s,pricingPlans:n,currency:a,exchangeRate:c})=>{const h=ms(),o=n.length>0?n:Us,w=c>0?c:Gs,k=(s==null?void 0:s.plan)||"free",m=p=>{if(p.price_ngn===0)return"Free";const u=`â‚¦${p.price_ngn.toLocaleString()}`,S=p.price_usd>0?`$${p.price_usd.toLocaleString()}`:`$${Math.max(1,Math.round(p.price_ngn/w)).toLocaleString()}`;return a==="USD"?`${S} (â‰ˆ ${u})`:`${u} (â‰ˆ ${S})`},l=p=>{const u=m(p),S=encodeURIComponent(`Hi! I'd like to purchase the ${p.name} plan for ${u} (${p.tokens.toLocaleString()} tokens). Please let me know how to proceed with payment.`);window.open(`https://wa.me/?text=${S}`,"_blank")},d=p=>p.toLocaleString(),T=p=>p===-1?"Unlimited":p.toString();return e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("button",{onClick:()=>h("/dashboard/settings"),className:"flex items-center text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[e.jsx(fs,{size:20,className:"mr-2"}),"Back to Settings"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-900 mb-2",children:"Buy More Tokens"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Select a plan to upgrade your account. All purchases are processed via WhatsApp."}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Prices shown in ",a==="USD"?"US Dollars":"Nigerian Naira"," using an exchange rate of"," ","â‚¦",w.toLocaleString()," â‰ˆ $1."]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-accent-300 mt-2",children:[e.jsx(ya,{size:16}),e.jsx("span",{children:"Secure payment via WhatsApp"})]})]}),s&&e.jsxs("div",{className:"max-w-md mx-auto mb-8 neural-glow p-6 rounded-lg border border-primary-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-800",children:[s.tokens," tokens"]})]}),e.jsx(Ts,{size:32,className:"text-primary-400"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Plan: ",e.jsx("span",{className:"font-semibold capitalize",children:s.plan})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(p=>{const u=p.id===k,S=p.is_popular||p.id==="pro";return e.jsxs("div",{className:`relative glass-effect rounded-lg p-6 border-2 transition-all duration-300 ${u?"border-green-500/50 bg-green-500/10":S?"border-primary-500/50 bg-primary-500/10":"border-primary-200/60 hover:border-primary-400/50"}`,children:[S&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-purple-600 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),u&&e.jsx("div",{className:"absolute -top-3 right-3",children:e.jsx("div",{className:"bg-green-500 text-white p-1 rounded-full",children:e.jsx(os,{size:12})})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(et,{className:"w-6 h-6 text-accent-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-primary-900 capitalize",children:p.name})]}),e.jsx("div",{className:"text-lg font-bold text-primary-300 mb-1",children:m(p)}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-slate-500",children:[e.jsx(Ts,{size:14,className:"text-primary-400"}),e.jsxs("span",{children:[d(p.tokens)," tokens"]})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Max brands: ",T(p.max_brands)]})]}),e.jsx("div",{className:"space-y-2 mb-6",children:p.features.map((t,U)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(os,{size:14,className:"text-green-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600",children:t})]},U))}),e.jsx(N,{onClick:()=>l(p),disabled:u,className:`w-full ${u?"bg-green-600 hover:bg-green-600 cursor-not-allowed":""}`,variant:u?"secondary":"primary",children:u?"Current Plan":`Buy ${p.name}`})]},p.id)})}),e.jsx("div",{className:"text-center text-sm text-slate-500 mt-8",children:e.jsx("p",{children:`After clicking "Buy", you'll be redirected to WhatsApp to complete your purchase. Your account will be upgraded once payment is confirmed.`})})]})},an=Object.freeze(Object.defineProperty({__proto__:null,TokensPage:qa},Symbol.toStringTag,{value:"Module"})),Ja=s=>{if(!s||s.trim().length===0)return!1;try{const n=JSON.parse(s);return Array.isArray(n)}catch(n){return!1}},kt=s=>{if(!s)return[{name:"",description:""}];if(Ja(s))try{const n=JSON.parse(s);return n.length>0?n:[{name:"",description:""}]}catch(n){return[{name:"",description:""}]}return[{name:"",description:s}]},Js=s=>{const n=s.filter(a=>a.name.trim()||a.description.trim());return n.length===0?"":JSON.stringify(n)},Za=({value:s,onChange:n,placeholder:a})=>{const[c,h]=r.useState(()=>kt(s)),[o,w]=r.useState(0);r.useEffect(()=>{h(kt(s))},[s]);const k=(u,S,t)=>{const U=[...c];U[u]=W(M({},U[u]),{[S]:t}),h(U),n(Js(U))},m=()=>{const u=[...c,{name:"",description:""}];h(u),w(u.length-1),n(Js(u))},l=u=>{if(c.length===1){h([{name:"",description:""}]),w(0),n("");return}const S=c.filter((t,U)=>U!==u);h(S),o>=S.length&&w(S.length-1),n(Js(S))},d=()=>{w(u=>Math.max(0,u-1))},T=()=>{w(u=>Math.min(c.length-1,u+1))},p=c[o]||{name:"",description:""};return e.jsxs("div",{className:"space-y-4",children:[c.length>1&&e.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg p-3 border border-slate-200",children:[e.jsx("button",{type:"button",onClick:d,disabled:o===0,className:`p-2 rounded-lg transition-colors ${o===0?"text-slate-300 cursor-not-allowed":"text-slate-700 hover:bg-white hover:shadow-sm"}`,title:"Previous product",children:e.jsx(ns,{size:18})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Product ",o+1," of ",c.length]})}),e.jsx("button",{type:"button",onClick:T,disabled:o===c.length-1,className:`p-2 rounded-lg transition-colors ${o===c.length-1?"text-slate-300 cursor-not-allowed":"text-slate-700 hover:bg-white hover:shadow-sm"}`,title:"Next product",children:e.jsx(Ve,{size:18})})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-orange-50/50 via-pink-50/50 to-purple-50/50 border-2 border-orange-200/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Product/Service Name"}),e.jsx(ss,{value:p.name,onChange:u=>k(o,"name",u.target.value),placeholder:"e.g., Premium Coaching, Software Subscription, Consulting Services",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),e.jsx(Pe,{value:p.description,onChange:u=>k(o,"description",u.target.value),placeholder:"Describe what this product/service offers, key benefits, pricing, target market, etc.",rows:4,className:"w-full"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-orange-200/50",children:[e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:m,className:"flex items-center gap-2",children:[e.jsx(Ps,{size:14}),"Add Product"]}),c.length>1&&e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:()=>l(o),className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Ms,{size:14}),"Remove"]})]})]}),c.length>1&&e.jsx("div",{className:"flex items-center justify-center gap-2",children:c.map((u,S)=>e.jsx("button",{type:"button",onClick:()=>w(S),className:`w-2 h-2 rounded-full transition-all ${S===o?"bg-primary-600 w-6":"bg-slate-300 hover:bg-slate-400"}`,title:`Go to product ${S+1}`},S))})]})},_t=s=>{if(!s||s.trim().length===0)return!1;const n=["PRODUCT","NAME","Age","Occupation","Interests","Casual Interests","Character","Aspirations","Problems"],a=s.split(`
`);let c=0;for(const h of a){const o=h.trim();n.some(w=>o.toLowerCase().startsWith(w.toLowerCase()))&&c++}return c>=3},Ct=s=>{var c,h,o,w,k,m,l,d,T;if(!s)return{};const n={},a=s.split(`
`);for(const p of a){const u=p.trim();u.toUpperCase().startsWith("PRODUCT")?n.product=((c=u.split(":")[1])==null?void 0:c.trim())||"":u.toUpperCase().startsWith("NAME")?n.name=((h=u.split(":")[1])==null?void 0:h.trim())||"":u.toLowerCase().startsWith("age")?n.age=((o=u.split(":")[1])==null?void 0:o.trim())||"":u.toLowerCase().startsWith("occupation")?n.occupation=((w=u.split(":")[1])==null?void 0:w.trim())||"":u.toLowerCase().startsWith("interests")?n.interests=((k=u.split(":")[1])==null?void 0:k.trim())||"":u.toLowerCase().startsWith("casual interests")?n.casual_interests=((m=u.split(":")[1])==null?void 0:m.trim())||"":u.toLowerCase().startsWith("character")||u.toLowerCase().startsWith("character & lifestyle")?n.character_lifestyle=((l=u.split(":")[1])==null?void 0:l.trim())||"":u.toLowerCase().startsWith("aspirations")?n.aspirations=((d=u.split(":")[1])==null?void 0:d.trim())||"":u.toLowerCase().startsWith("problems")&&(n.problems=((T=u.split(":")[1])==null?void 0:T.trim())||"")}return n},St=s=>{const n=[];return s.product&&n.push(`PRODUCT : ${s.product}`),s.name&&n.push(`NAME : ${s.name}`),s.age&&n.push(`Age : ${s.age}`),s.occupation&&n.push(`Occupation : ${s.occupation}`),s.interests&&n.push(`Interests : ${s.interests}`),s.casual_interests&&n.push(`Casual Interests : ${s.casual_interests}`),s.character_lifestyle&&n.push(`Character & Lifestyle : ${s.character_lifestyle}`),s.aspirations&&n.push(`Aspirations : ${s.aspirations}`),s.problems&&n.push(`Problems : ${s.problems}`),n.join(`
`)},Xa=({value:s,onChange:n,placeholder:a})=>{const[c,h]=r.useState(()=>Ct(s)),[o,w]=r.useState(()=>_t(s)),[k,m]=r.useState(!1);r.useEffect(()=>{if(!k){const p=_t(s);w(p)}h(Ct(s))},[s,k]);const l=(p,u)=>{const S=W(M({},c),{[p]:u});h(S),n(St(S))},d=()=>{w(!0),m(!0)},T=()=>{w(!1),m(!0)};return o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Structured Buyer Persona"}),e.jsx("button",{type:"button",onClick:T,className:"text-xs text-primary-600 hover:text-primary-700",children:"Switch to Free-form"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"PRODUCT"}),e.jsx("input",{type:"text",value:c.product||"",onChange:p=>l("product",p.target.value),placeholder:"e.g., Lands & Properties",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"NAME"}),e.jsx("input",{type:"text",value:c.name||"",onChange:p=>l("name",p.target.value),placeholder:"e.g., Chinedu Godwin",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Age"}),e.jsx("input",{type:"text",value:c.age||"",onChange:p=>l("age",p.target.value),placeholder:"e.g., 31",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Occupation"}),e.jsx("input",{type:"text",value:c.occupation||"",onChange:p=>l("occupation",p.target.value),placeholder:"e.g., Investor",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Interests"}),e.jsx(Pe,{value:c.interests||"",onChange:p=>l("interests",p.target.value),placeholder:"e.g., Forex / Market Trade, Flexing, Cars, VIP Treatments",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Casual Interests"}),e.jsx(Pe,{value:c.casual_interests||"",onChange:p=>l("casual_interests",p.target.value),placeholder:"e.g., Premium food, Pizza, Women, Telegram",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Character & Lifestyle"}),e.jsx(Pe,{value:c.character_lifestyle||"",onChange:p=>l("character_lifestyle",p.target.value),placeholder:"e.g., Flamboyant, Works from Home, Luxury",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Aspirations"}),e.jsx(Pe,{value:c.aspirations||"",onChange:p=>l("aspirations",p.target.value),placeholder:"e.g., Body goals, achieving a social status",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Problems"}),e.jsx(Pe,{value:c.problems||"",onChange:p=>l("problems",p.target.value),placeholder:"e.g., Liquidity risk, inflation, Fear per investment",rows:2})]}),e.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Preview"}),e.jsx("pre",{className:"text-xs text-slate-600 whitespace-pre-wrap font-mono",children:St(c)||"Fill in the fields above to see the formatted buyer persona"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Free-form mode"}),e.jsx("button",{type:"button",onClick:d,className:"text-xs text-primary-600 hover:text-primary-700",children:"Switch to Structured Mode"})]}),e.jsx(Pe,{value:s,onChange:p=>n(p.target.value),placeholder:a,rows:10})]})},Qa=s=>{if(!s||s.trim().length===0)return!1;try{const n=JSON.parse(s);return Array.isArray(n)}catch(n){return!1}},Tt=(s,n)=>{const a=c=>{const h=Math.max(1,n);if(c.length>=h)return c;const o=Array.from({length:h-c.length},(w,k)=>({name:`Audience ${c.length+k+1}`,profile:""}));return[...c,...o]};if(!s)return a([]);if(Qa(s))try{const c=JSON.parse(s);if(Array.isArray(c))return a(c)}catch(c){}return a([{name:"Primary Audience",profile:s}])},Fs=s=>{const n=s.filter(a=>a.profile.trim());return n.length===0?"":JSON.stringify(n)},Pt=({value:s,products:n=[],onChange:a,onAISuggest:c,isGeneratingAI:h=!1,placeholder:o})=>{const[w,k]=r.useState(()=>Tt(s,n.length)),[m,l]=r.useState(0);r.useEffect(()=>{const E=Tt(s,n.length);k(E)},[s,n.length]);const d=(E,C)=>{const D=[...w];D[E]=W(M({},D[E]),{profile:C}),k(D),a(Fs(D))},T=(E,C)=>{const D=[...w];D[E]=W(M({},D[E]),{name:C}),k(D),a(Fs(D))},p=()=>{const E=[...w,{name:`Audience ${w.length+1}`,profile:""}];k(E),l(E.length-1),a(Fs(E))},u=E=>{if(w.length===1){k([{name:"Primary Audience",profile:""}]),l(0),a("");return}const C=w.filter((D,Y)=>Y!==E);k(C),m>=C.length&&l(C.length-1),a(Fs(C))},S=()=>{l(E=>Math.max(0,E-1))},t=()=>{l(E=>Math.min(w.length-1,E+1))},U=()=>{c&&c(m)},$=w[m]||{name:"Audience 1",profile:""},A=n[m];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 border-2 border-blue-200",children:[e.jsx("button",{type:"button",onClick:S,disabled:m===0||w.length===1,className:`p-2 rounded-lg transition-colors ${m===0||w.length===1?"text-slate-300 cursor-not-allowed":"text-slate-700 hover:bg-white hover:shadow-sm"}`,title:"Previous audience",children:e.jsx(ns,{size:18})}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:$.name||`Audience ${m+1}`}),e.jsxs("span",{className:"text-xs text-slate-600",children:[w.length>1?`${m+1} of ${w.length}`:"1 audience",A&&A.name&&` â€¢ for ${A.name}`]})]}),e.jsx("button",{type:"button",onClick:t,disabled:m===w.length-1||w.length===1,className:`p-2 rounded-lg transition-colors ${m===w.length-1||w.length===1?"text-slate-300 cursor-not-allowed":"text-slate-700 hover:bg-white hover:shadow-sm"}`,title:"Next audience",children:e.jsx(Ve,{size:18})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Audience Segment Name"}),e.jsx("input",{type:"text",value:$.name,onChange:E=>T(m,E.target.value),placeholder:"e.g., Early Adopters, Enterprise Clients, Small Business Owners",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),c&&e.jsxs("button",{type:"button",onClick:U,disabled:h,className:"flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700 disabled:opacity-50 mt-6",children:[e.jsx(Te,{size:14}),h?"Generating...":"AI Suggest"]})]}),A&&A.name&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"text-xs font-medium text-blue-900 mb-1",children:["ðŸŽ¯ Targeting for: ",A.name]}),e.jsx("div",{className:"text-xs text-blue-700",children:A.description})]}),e.jsx("div",{className:"min-w-0",children:e.jsx(Xa,{value:$.profile,onChange:E=>d(m,E),placeholder:o||"Describe this audience segment - who they are, what they need, what they care about."})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-3",children:[e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-300 hover:from-blue-100 hover:to-purple-100 text-blue-700 font-medium",children:[e.jsx(Ps,{size:16}),"Add Another Audience"]}),w.length>1&&e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:()=>u(m),className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:[e.jsx(Ms,{size:14}),"Remove This Audience"]})]}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:w.map((E,C)=>e.jsx("button",{type:"button",onClick:()=>l(C),className:`transition-all ${C===m?"bg-primary-600 w-8 h-2 rounded-full":"bg-slate-300 hover:bg-slate-400 w-2 h-2 rounded-full"}`,title:`${E.name||`Audience ${C+1}`}`},C))}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("div",{className:"text-xs text-blue-900 text-center",children:m===0?e.jsxs("span",{children:["â­ ",e.jsx("strong",{children:"Key Audience"})," - Used for Character Studio and default content targeting"]}):e.jsxs("span",{children:["ðŸŽ¯ ",e.jsx("strong",{children:"Alternate Audience"})," - Available for targeted content briefs"]})})})]})};function ct(s,n){let a=null;return function(...h){const o=()=>{a=null,s(...h)};a&&clearTimeout(a),a=setTimeout(o,n)}}const Ls=({id:s,title:n,description:a,icon:c,children:h})=>e.jsx("section",{id:s,className:"relative overflow-hidden rounded-xl sm:rounded-2xl border border-slate-200/80 bg-white/80 backdrop-blur-sm shadow-sm min-w-0",children:e.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-5 lg:py-6 space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 min-w-0",children:[c&&e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-primary-500/10 text-primary-600 flex items-center justify-center shrink-0",children:c}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-slate-900 break-words",children:n}),a&&e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1 leading-relaxed break-words",children:a})]})]}),e.jsx("div",{className:"space-y-4 sm:space-y-5 min-w-0",children:h})]})}),er=({brand:s,onBrandUpdate:n})=>{if(!s)return e.jsx(Gt,{title:"Create Your Company Profile",description:"Tell us about your companyâ€”your vision, mission, and values. This helps Py understand your unique voice and create authentic content."});const[a,c]=r.useState(s),[h,o]=r.useState(!1),[w,k]=r.useState(!1),[m,l]=r.useState({}),[d,T]=r.useState([]),p=r.useRef(!1),u=ms(),{authUser:S,isAdmin:t}=Ns(),U=r.useRef(null),$=t,A=r.useMemo(()=>{var g,Q,te,ge,oe,Ne,Ce;return[{label:"Brand name",complete:!!((g=a.brand_name)!=null&&g.trim())},{label:"Tagline",complete:!!((Q=a.taglines)!=null&&Q.trim())},{label:"About",complete:!!((te=a.about)!=null&&te.trim())},{label:"Vision",complete:!!((ge=a.vision)!=null&&ge.trim())},{label:"Mission",complete:!!((oe=a.mission)!=null&&oe.trim())},{label:"Voice",complete:!!((Ne=a.persona)!=null&&Ne.trim())},{label:"Audience",complete:!!((Ce=a.buyer_profile)!=null&&Ce.trim())}]},[a]),E=A.filter(g=>g.complete).length,C=Math.round(E/A.length*100),D=r.useMemo(()=>{var g,Q,te,ge,oe,Ne;return[{id:"identity",label:"Identity",description:"Name, type & promise",complete:!!((g=a.brand_name)!=null&&g.trim()&&((Q=a.taglines)!=null&&Q.trim()))},{id:"strategy",label:"Strategy",description:"Vision & mission defined",complete:!!((te=a.vision)!=null&&te.trim()&&((ge=a.mission)!=null&&ge.trim()))},{id:"tone",label:"Tone",description:"Tone of voice defined",complete:!!((oe=a.persona)!=null&&oe.trim())},{id:"audience-insights",label:"Audience",description:"Buyer clarity captured",complete:!!((Ne=a.buyer_profile)!=null&&Ne.trim())}]},[a]),Y=r.useMemo(()=>[{label:"Vision snapshot",value:a.vision||"Give us your future headline.",icon:e.jsx(st,{className:"w-4 h-4"})},{label:"Tone of Voice",value:a.persona||"Describe your company's communication style.",icon:e.jsx(bt,{className:"w-4 h-4"})},{label:"Primary audience",value:a.buyer_profile||"Sketch the humans you serve.",icon:e.jsx(yt,{className:"w-4 h-4"})}],[a.buyer_profile,a.persona,a.vision]);r.useEffect(()=>{a.reverse_positioning&&U.current&&setTimeout(()=>{var g;(g=U.current)==null||g.scrollIntoView({behavior:"smooth",block:"center"})},300)},[a.reverse_positioning]);const ae=r.useRef(0);r.useEffect(()=>{Date.now()-ae.current<2e3||c(s)},[s]);const re=r.useRef(s.id);r.useEffect(()=>{re.current!==s.id&&(ae.current=0,p.current=!1,re.current=s.id)},[s.id]);const J=r.useRef(ct(g=>{console.log("ðŸ’¾ Saving brand updates:",g),n(g),o(!1),p.current=!1},1e3)).current,H=r.useCallback((g,Q)=>{ae.current=Date.now(),p.current=!0,o(!0),c(te=>W(M({},te),{[g]:Q})),J({[g]:Q})},[J]),X=(g,Q="success")=>{const te=Date.now().toString();T(ge=>[...ge,{id:te,message:g,type:Q}]),setTimeout(()=>{T(ge=>ge.filter(oe=>oe.id!==te))},5e3)},ye=g=>{H("timezone",g),k(!1)},ke=()=>e.jsxs("div",{ref:a.reverse_positioning?U:null,className:"rounded-xl sm:rounded-2xl border border-primary-200/70 bg-white/80 p-3 sm:p-4 lg:p-6 shadow-sm transition-all min-w-0",children:[a.reverse_positioning&&e.jsx("div",{className:"mb-3 rounded-lg sm:rounded-xl border border-primary-200 bg-primary-50/50 px-3 sm:px-4 py-2 sm:py-3",children:e.jsxs("p",{className:"text-xs sm:text-sm text-primary-900 leading-relaxed break-words",children:[e.jsx("strong",{children:"Step 2: Describe Your Audience"})," â€” Tell me who you're talking to, so I can write like I'm in the room with them."]})}),e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-primary-900 mb-3 sm:mb-4 break-words",children:a.reverse_positioning?"Who needs what you offer?":"Target Audiences"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-slate-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Multiple Audiences:"})," Create different audience segments for each product/service. The first is your key audience."]})}),e.jsx(Pt,{value:a.buyer_profile||"",products:(()=>{try{return JSON.parse(a.products||"[]")}catch(g){return[]}})(),onChange:g=>H("buyer_profile",g),onAISuggest:g=>ne(void 0,null,function*(){yield V("buyer_profile",g)}),isGeneratingAI:m.buyer_profile,placeholder:"Fill in the simple prompts to outline this audience segment."})]})]}),O=()=>ne(void 0,null,function*(){if(!$){X("This feature is only available for admin accounts","info");return}const g=`=== COMPANY PROFILE ===

Company Name: ${a.brand_name||""}
Company Type: ${a.brand_type||"organization"}
Tagline: ${a.taglines||""}

About: ${a.about||""}

Vision: ${a.vision||""}

Mission: ${a.mission||""}

Products/Services: ${a.products||""}

Tone of Voice: ${a.persona||""}

=== AUDIENCE ===

Who Are You Speaking To?
${a.buyer_profile||""}

=== SETTINGS ===

Timezone: ${a.timezone||"UTC"}
Company HQ Location: ${a.brand_hq_location||""}
Colors: ${a.colors||""}

=== ADVANCED OPTIONS ===

Audience-First Approach: ${a.reverse_positioning?"Enabled":"Disabled"}

Generated by Py Company Profile - ${new Date().toLocaleString()}`;try{yield navigator.clipboard.writeText(g),X("âœ¨ All fields copied to clipboard!","success")}catch(Q){console.error("Failed to copy:",Q),X("Failed to copy to clipboard","info")}}),V=(g,Q)=>ne(void 0,null,function*(){l(te=>W(M({},te),{[g]:!0})),X("I am thinking this through...","info");try{let te="";if(g==="buyer_profile"&&Q!==void 0)try{const le=JSON.parse(a.products||"[]")[Q];le&&le.name&&(te=`Product/Service: ${le.name}
Description: ${le.description||""}`)}catch(Se){}const ge={brandName:a.brand_name,brandType:a.brand_type||"organization",tagline:a.taglines,about:a.about,vision:a.vision,mission:a.mission,persona:a.persona,buyerProfile:te||a.buyer_profile,products:a.products},Ne={vision:"/ai/generate-vision",mission:"/ai/generate-mission",persona:"/ai/generate-persona",buyer_profile:"/ai/generate-buyer-profile"}[g];if(!Ne)return;const Ce=yield fetch(`https://py.raysourcelabs.com/api${Ne}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({brandContext:ge,preferredModel:S==null?void 0:S.preferred_ai_model})});if(!Ce.ok)throw new Error("Failed to generate suggestion");const xe=yield Ce.json();if(xe.success){if(g==="vision"&&xe.vision)H("vision",xe.vision),X("Here is a vision statement that captures your future!");else if(g==="mission"&&xe.mission)H("mission",xe.mission),X("Your mission is clear now!");else if(g==="persona"&&xe.persona)H("persona",xe.persona),X("Got it! This is how you sound.","success");else if(g==="buyer_profile"&&xe.buyerProfile){if(console.log("âœ… Buyer profile received:",xe.buyerProfile),Q!==void 0)try{const Se=JSON.parse(a.buyer_profile||"[]");if(Array.isArray(Se)){const le=[...Se];le[Q]?le[Q].profile=xe.buyerProfile:le[Q]={name:`Audience ${Q+1}`,profile:xe.buyerProfile},H("buyer_profile",JSON.stringify(le))}else{const le=[{name:`Audience ${Q+1}`,profile:xe.buyerProfile}];H("buyer_profile",JSON.stringify(le))}}catch(Se){H("buyer_profile",JSON.stringify([{name:"Primary Audience",profile:xe.buyerProfile}]))}else H("buyer_profile",xe.buyerProfile);X("Perfect! Who you are talking to is clear now.","success")}}}catch(te){console.error("Andora suggestion error:",te),X("Hmm, that did not work. Mind trying again?","info")}finally{l(te=>W(M({},te),{[g]:!1}))}});return e.jsxs("div",{className:"relative min-w-0 overflow-x-hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 lg:py-8 space-y-6 sm:space-y-8 lg:space-y-10",children:[e.jsxs("section",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl border border-primary-500/20 bg-gradient-to-br from-primary-600 via-purple-600 to-slate-900 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-screen bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),transparent_65%)]","aria-hidden":!0}),e.jsx("div",{className:"relative z-10 flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-center lg:justify-between p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"space-y-3 sm:space-y-5 max-w-2xl min-w-0",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:[e.jsx(As,{className:"w-4 h-4"}),"Brand profile"]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-semibold leading-tight break-words",children:"Set Your Company's Strategic Foundation"}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-white/80 leading-relaxed",children:"Provide the essential details about your company, and Py will generate content, campaigns, and communications that align with your brand voice."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm text-white/80",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(Te,{className:"w-3.5 h-3.5"}),"Guided by Py"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx($s,{className:"w-3.5 h-3.5"}),h?"Savingâ€¦":"Autosaved"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(Ss,{className:"w-3.5 h-3.5"}),qs(a.timezone)]})]})]})})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 lg:grid-cols-[minmax(0,1fr),minmax(280px,300px)] items-start",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8 min-w-0",children:[e.jsx(Ls,{id:"identity",title:"Core Identity",description:"Define your company's core identity, promise, and market presence.",icon:e.jsx(As,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"space-y-5",children:[e.jsx(ss,{label:"Company Name",value:a.brand_name||"",onChange:g=>H("brand_name",g.target.value),placeholder:"Your Company Name",maxLength:Ye.brand_name,helperText:`${(a.brand_name||"").length}/${Ye.brand_name}`}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Company Type"}),e.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>H("brand_type","individual"),className:`rounded-xl border-2 px-3 sm:px-4 py-3 sm:py-4 text-left transition-all ${(a.brand_type||"organization")==="individual"?"border-primary-500 bg-primary-500/10 text-primary-700 shadow-sm":"border-slate-200 hover:border-primary-300 text-slate-600"}`,children:[e.jsx(Dt,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-2"}),e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:"Individual"}),e.jsx("p",{className:"text-xs mt-1 text-slate-500",children:"Personal Brand (1 profile)"})]}),e.jsxs("button",{type:"button",onClick:()=>H("brand_type","organization"),className:`rounded-xl border-2 px-3 sm:px-4 py-3 sm:py-4 text-left transition-all ${(a.brand_type||"organization")==="organization"?"border-primary-500 bg-primary-500/10 text-primary-700 shadow-sm":"border-slate-200 hover:border-primary-300 text-slate-600"}`,children:[e.jsx(ds,{className:"w-5 h-5 sm:w-6 sm:h-6 mb-2"}),e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:"Organization"}),e.jsx("p",{className:"text-xs mt-1 text-slate-500",children:"Team/Company (Multiple profiles)"})]})]})]}),e.jsx("div",{className:"rounded-lg sm:rounded-xl border border-slate-200/80 bg-slate-50/50 px-3 sm:px-4 py-2 sm:py-3 min-w-0",children:e.jsxs("button",{type:"button",onClick:()=>H("reverse_positioning",!a.reverse_positioning),className:"flex w-full items-center justify-between gap-2 sm:gap-3 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[a.reverse_positioning?e.jsx(ja,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 shrink-0"}):e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-400 shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-700",children:"Audience-first approach"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 break-words",children:a.reverse_positioning?"Enabled â€” Market-first: Product â†’ Audience â†’ Vision/Mission":"Disabled â€” Traditional: Vision/Mission â†’ Product â†’ Audience"})]})]}),e.jsx("span",{className:`rounded-full px-2 sm:px-3 py-1 text-[10px] sm:text-xs font-medium shrink-0 ${a.reverse_positioning?"bg-primary-100 text-primary-700":"bg-slate-200 text-slate-600"}`,children:a.reverse_positioning?"On":"Off"})]})}),e.jsx(ss,{label:"Tagline",value:a.taglines||"",onChange:g=>H("taglines",g.target.value),placeholder:"Your Brand Tagline",maxLength:Ye.taglines,helperText:`${(a.taglines||"").length}/${Ye.taglines}`}),e.jsx(Pe,{label:(a.brand_type||"organization")==="individual"?"About You":"About Your Brand",value:a.about||"",onChange:g=>H("about",g.target.value),placeholder:(a.brand_type||"organization")==="individual"?"Tell us about you â€” your background, expertise, passions, values, what makes you unique.":"Tell us about your brand â€” your story, what you do, your team culture, values, and what makes you unique.",rows:4,maxLength:Ye.about,helperText:`${(a.about||"").length}/${Ye.about}`}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-slate-600",children:[e.jsx(Ss,{className:"w-4 h-4"}),"Timezone"]}),e.jsxs("button",{type:"button",onClick:()=>k(!w),className:"flex w-full items-center justify-between rounded-lg border border-slate-200 bg-white/80 px-4 py-3 text-sm font-medium text-slate-700 shadow-sm transition-colors hover:border-primary-300",children:[e.jsx("span",{children:qs(a.timezone)}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w&&e.jsx("div",{className:"absolute z-50 mt-2 max-h-64 w-full overflow-y-auto rounded-lg border border-primary-200 bg-white shadow-xl",children:ot.map(g=>e.jsxs("button",{type:"button",onClick:()=>ye(g.value),className:`flex w-full items-center justify-between px-4 py-2 text-left text-sm transition-colors ${a.timezone===g.value?"bg-primary-500/10 text-primary-600":"hover:bg-primary-500/10"}`,children:[e.jsx("span",{children:g.label}),e.jsx("span",{className:"text-xs text-slate-500",children:g.offset})]},g.value))}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Set your local timezone to sync scheduling and campaign launches."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:(a.brand_type||"organization")==="individual"?"Product/Offer":"Products & Services"}),e.jsx(Za,{value:a.products||"",onChange:g=>H("products",g),placeholder:(a.brand_type||"organization")==="individual"?"Describe your signature offer, service, or expertise.":"Outline your core products, services, or solutions."})]}),e.jsx(ss,{label:"Brand Colors (Optional)",value:a.colors||"",onChange:g=>H("colors",g.target.value),placeholder:"#2563eb, #7c3aed, #dc2626",maxLength:Ye.colors,helperText:`${(a.colors||"").length}/${Ye.colors}`})]})}),a.reverse_positioning&&e.jsx(Ls,{id:"audience-insights",title:"Audience-first lens",description:"You flipped the script. Map the humans before the hero.",icon:e.jsx(yt,{className:"w-5 h-5"}),children:ke()}),e.jsx(Ls,{id:"strategy",title:"Strategic Foundations",description:"Define the future you're building, and Py will keep every communication aligned with that vision.",icon:e.jsx(st,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Vision"}),e.jsxs("button",{onClick:()=>V("vision"),disabled:m.vision,className:"flex items-center gap-2 text-xs font-medium text-primary-600 hover:text-primary-700 disabled:opacity-50",children:[e.jsx(Te,{size:14}),m.vision?"I'm thinkingâ€¦":"Ask me"]})]}),e.jsx(Pe,{value:a.vision||"",onChange:g=>H("vision",g.target.value),placeholder:"Your brand's vision...",rows:3,maxLength:Ye.vision,helperText:`${(a.vision||"").length}/${Ye.vision}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Mission"}),e.jsxs("button",{onClick:()=>V("mission"),disabled:m.mission,className:"flex items-center gap-2 text-xs font-medium text-primary-600 hover:text-primary-700 disabled:opacity-50",children:[e.jsx(Te,{size:14}),m.mission?"I'm thinkingâ€¦":"Ask me"]})]}),e.jsx(Pe,{value:a.mission||"",onChange:g=>H("mission",g.target.value),placeholder:"Your brand's mission...",rows:3,maxLength:Ye.mission,helperText:`${(a.mission||"").length}/${Ye.mission}`})]})]})}),e.jsx(Ls,{id:"tone",title:"Tone of Voice",description:"Define your company's language, style, and personality to ensure consistent and authentic communication.",icon:e.jsx(bt,{className:"w-5 h-5"}),children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Your company's tone of voice"}),e.jsxs("button",{onClick:()=>V("persona"),disabled:m.persona,className:"flex items-center gap-2 text-xs font-medium text-primary-600 hover:text-primary-700 disabled:opacity-50",children:[e.jsx(Te,{size:14}),m.persona?"I'm thinkingâ€¦":"Ask me"]})]}),e.jsx(Pe,{value:a.persona||"",onChange:g=>H("persona",g.target.value),placeholder:"e.g., Professional yet approachable, innovative, trustworthy",rows:3,maxLength:Ye.persona,helperText:`${(a.persona||"").length}/${Ye.persona}`})]}),!a.reverse_positioning&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-600",children:["Target Audiences",e.jsx("span",{className:"block text-xs font-normal text-slate-500 mt-1",children:"Define your audience segments â€” who they are, what they need, and what they care about."})]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-slate-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Multiple Audiences:"})," Create different audience segments for each product/service. The first is your key audience."]})}),e.jsx(Pt,{value:a.buyer_profile||"",products:(()=>{try{return JSON.parse(a.products||"[]")}catch(g){return[]}})(),onChange:g=>H("buyer_profile",g),onAISuggest:g=>ne(void 0,null,function*(){yield V("buyer_profile",g)}),isGeneratingAI:m.buyer_profile,placeholder:"Fill in the simple prompts to outline this audience segment."})]})]})})]}),e.jsxs("aside",{className:"space-y-4 sm:space-y-6 lg:sticky lg:top-28 min-w-0",children:[e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-primary-200/70 bg-gradient-to-br from-primary-50/80 to-white p-3 sm:p-4 lg:p-6 shadow-sm backdrop-blur min-w-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:"Profile Completion"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-primary-900",children:[C,"%"]}),e.jsx("span",{className:"text-sm text-slate-600",children:"complete"})]}),e.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-slate-200",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary-500 to-purple-500 transition-all duration-500",style:{width:`${C}%`}})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:A.map(g=>e.jsxs("span",{className:`flex items-center gap-1.5 rounded-lg px-2 py-1.5 ${g.complete?"bg-emerald-50/80 text-emerald-700":"bg-slate-100/80 text-slate-500"}`,children:[e.jsx(js,{className:`w-3.5 h-3.5 ${g.complete?"text-emerald-500":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:g.label})]},g.label))})]})}),e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/70 bg-white/90 p-3 sm:p-4 lg:p-6 shadow-sm backdrop-blur min-w-0",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Brand snapshot"}),e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-slate-900 break-words",children:a.brand_name||"Name your brand"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed break-words",children:a.taglines||"Drop a tagline so your team has a one-line rallying cry."})]}),e.jsxs("div",{className:"mt-5 space-y-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Type"}),e.jsx("span",{className:"rounded-full bg-primary-500/10 px-3 py-1 text-xs font-semibold text-primary-700",children:(a.brand_type||"organization").charAt(0).toUpperCase()+(a.brand_type||"organization").slice(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Timezone"}),e.jsx("span",{children:qs(a.timezone)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Channels"}),e.jsx("span",{children:a.channels.length||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Audience-first"}),e.jsx("span",{className:`font-medium ${a.reverse_positioning?"text-primary-600":"text-slate-500"}`,children:a.reverse_positioning?"Enabled":"Classic"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(N,{onClick:O,variant:"outline",size:"sm",disabled:!$,className:`w-full ${$?"border-primary-300 text-primary-700 hover:bg-primary-50":"cursor-not-allowed opacity-60"}`,children:[e.jsx(Ze,{size:16,className:"mr-2"}),"Copy profile",!$&&e.jsx("span",{className:"ml-2 rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-amber-700",children:"Admin"})]})})]}),e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/70 bg-white/90 p-3 sm:p-4 lg:p-6 shadow-sm backdrop-blur min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Journey"}),e.jsx("div",{className:"mt-4 space-y-4",children:D.map((g,Q)=>e.jsxs("a",{href:`#${g.id}`,className:"group flex items-start gap-3 rounded-xl border border-transparent px-3 py-2 transition-colors hover:border-primary-200 hover:bg-primary-50/60",children:[e.jsx("div",{className:`mt-1 flex h-6 w-6 items-center justify-center rounded-full border text-xs font-semibold ${g.complete?"border-emerald-400 bg-emerald-50 text-emerald-600":"border-slate-300 bg-white text-slate-400"}`,children:Q+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 group-hover:text-primary-700",children:g.label}),e.jsx("p",{className:"text-xs text-slate-500",children:g.description})]}),g.complete&&e.jsx(js,{className:"mt-1 h-4 w-4 text-emerald-500"})]},g.id))})]}),e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/70 bg-white/90 p-3 sm:p-4 lg:p-6 shadow-sm backdrop-blur min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Highlights"}),e.jsx("div",{className:"mt-4 space-y-4",children:Y.map((g,Q)=>e.jsxs("div",{className:"rounded-xl border border-slate-200/70 bg-slate-50/60 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-slate-500",children:[g.icon,g.label]}),e.jsx("p",{className:"mt-2 text-sm text-slate-700 leading-relaxed",children:g.value})]},Q))})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 pt-6 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Ready to define your team? Jump to the personnel studio when your essentials feel sharp."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsxs(N,{onClick:O,variant:"outline",size:"lg",disabled:!$,className:`w-full sm:w-auto ${$?"border-primary-300 text-primary-700 hover:bg-primary-50":"cursor-not-allowed opacity-60"}`,children:[e.jsx(Ze,{size:18,className:"mr-2"}),"Copy all fields",!$&&e.jsx("span",{className:"ml-2 rounded-full bg-amber-100 px-2 py-0.5 text-xs font-semibold uppercase tracking-wide text-amber-700",children:"Admin"})]}),e.jsxs(N,{onClick:()=>u("/dashboard/personnel"),size:"lg",className:"w-full bg-gradient-to-r from-primary-600 to-purple-600 text-white shadow-lg transition hover:from-primary-700 hover:to-purple-700 sm:w-auto",children:["Continue to Team Setup",e.jsx(ys,{size:20,className:"ml-2"})]})]})]})]}),e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-3",children:d.map((g,Q)=>e.jsx("div",{className:"animate-slide-in-right",style:{animation:`slideInRight 0.5s ease-out ${Q*.1}s both`},children:e.jsx(Ta,{message:g.message,type:g.type,onClose:()=>T(te=>te.filter(ge=>ge.id!==g.id))})},g.id))}),e.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in-right {
          animation: slideInRight 0.5s ease-out both;
        }
      `})]})},rn=Object.freeze(Object.defineProperty({__proto__:null,ConfigPage:er},Symbol.toStringTag,{value:"Module"})),ls=({label:s,value:n,onChange:a,onPerfectToggle:c,onBlur:h,isPerfect:o,placeholder:w,type:k="input",required:m=!1,options:l=[],helpText:d,rows:T=2,suggestion:p,onSuggestionApply:u,onSuggestionRefine:S,fieldKey:t,suggestionLabel:U,isRefining:$=!1,readOnly:A=!1,hideAIButtons:E=!1,hidePerfectToggle:C=!1})=>{const[D,Y]=r.useState(!1);r.useEffect(()=>{Y(!1)},[p]);const ae=()=>{!p||!t||u==null||u(t,p)},re=()=>{t&&(S==null||S(t))},J=()=>ne(void 0,null,function*(){var H;if(p)try{if((H=navigator==null?void 0:navigator.clipboard)!=null&&H.writeText)yield navigator.clipboard.writeText(p);else{const X=document.createElement("textarea");X.value=p,X.setAttribute("readonly",""),X.style.position="absolute",X.style.left="-9999px",document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X)}Y(!0),setTimeout(()=>Y(!1),2e3)}catch(X){console.error("Failed to copy suggestion to clipboard:",X)}});return e.jsxs("div",{className:`relative ${o?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-800",children:[s," ",m&&e.jsx("span",{className:"text-red-500",children:"*"}),A&&e.jsx("span",{className:"ml-1 text-xs text-slate-500",children:"(AI-Generated)"})]}),!C&&e.jsx("button",{onClick:c,className:`px-2 py-1 rounded text-xs font-medium transition-all uppercase ${o?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",children:o?"âœ“ Perfect":"Mark as Perfect"})]}),k==="input"&&e.jsx("input",{type:"text",value:n,onChange:H=>a(H.target.value),onBlur:h,placeholder:w,readOnly:A,className:`w-full px-3 py-2 rounded-lg border ${o?"border-green-300 bg-green-50/50":"border-primary-200"} ${A?"bg-slate-50 cursor-not-allowed":"bg-white/50"} focus:outline-none focus:ring-2 focus:ring-primary-400`}),k==="textarea"&&e.jsx("textarea",{value:n,onChange:H=>a(H.target.value),onBlur:h,placeholder:w,rows:T,readOnly:A,className:`w-full px-3 py-2 rounded-lg border ${o?"border-green-300 bg-green-50/50":"border-primary-200"} ${A?"bg-slate-50 cursor-not-allowed":"bg-white/50"} focus:outline-none focus:ring-2 focus:ring-primary-400 resize-y min-h-[80px]`}),k==="select"&&e.jsxs("select",{value:n,onChange:H=>a(H.target.value),onBlur:h,className:`w-full px-3 py-2 rounded-lg border ${o?"border-green-300 bg-green-50/50":"border-primary-200"} bg-white/50 focus:outline-none focus:ring-2 focus:ring-primary-400`,children:[e.jsx("option",{value:"",children:"Select..."}),l.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))]}),d&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:d}),!E&&p&&!o&&t&&e.jsxs("div",{className:"mt-2 border border-primary-200 bg-primary-50/60 rounded-md p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-sm font-semibold text-primary-900",children:U||"Andora suggests"})}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("p",{className:"text-sm text-primary-800 whitespace-pre-wrap flex-1 leading-relaxed",children:p}),e.jsxs("div",{className:"flex flex-col gap-1 items-end flex-shrink-0",children:[e.jsxs("div",{className:"flex gap-1",children:[u&&t&&e.jsx("button",{type:"button",onClick:ae,className:"text-xs px-3 py-1 rounded-md bg-primary-600 text-white hover:bg-primary-700 transition",children:"Apply"}),S&&t&&e.jsx("button",{type:"button",onClick:re,className:"text-xs px-3 py-1 rounded-md bg-orange-600 text-white hover:bg-orange-700 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:$,children:$?"Refiningâ€¦":"Refine"})]}),e.jsx("button",{type:"button",onClick:J,className:"text-xs px-3 py-1 rounded-md border border-primary-300 text-primary-700 hover:bg-primary-100 transition","aria-label":`Copy ${U||"Andora's suggestion"} for ${s}`,children:D?"Copied!":"Copy"})]})]})]})]})},sr=["name","character_name","role","gender","age_range","work_mode","about","personality","persona"],is=sr.length,tr=[{value:"onsite",label:"Onsite"},{value:"remote",label:"Remote"},{value:"hybrid",label:"Hybrid"}],ar=({character:s,brandId:n,isOpen:a,onClose:c,onChange:h,onSave:o,onDelete:w,onToggleMute:k,onAIGenerate:m,isGenerating:l=!1,suggestions:d={},onSuggestionApply:T,onFieldRefine:p,refiningField:u=null,characters:S=[],activeCharacterIndex:t=0,onCharacterChange:U,onPreviousCharacter:$,onNextCharacter:A,onAddCharacter:E,onSuggestCharacter:C,onAllDone:D,showAllDone:Y=!1,isTraining:ae=!1})=>{var Ie;const[re,J]=r.useState(!1),[H,X]=r.useState(!1),[ye,ke]=r.useState(!1),O=r.useRef(null);r.useEffect(()=>{const R=de=>{de.key==="Escape"&&a&&c(),S.length>1&&a&&(de.key==="ArrowLeft"&&$?(de.preventDefault(),$()):de.key==="ArrowRight"&&A&&(de.preventDefault(),A()))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[a,c,S.length,$,A]),r.useEffect(()=>{var R;!l&&(s.persona||s.personality||s.character_name)&&((R=O.current)==null||R.scrollIntoView({behavior:"smooth",block:"start"}))},[l]);const V=R=>ne(void 0,null,function*(){const de=R!=null?R:s;if(!de.id){X(!1);return}J(!0);try{yield o(de),X(!1)}catch(j){console.error("Save failed:",j)}finally{J(!1)}}),g=s.perfect_fields||{},Q=Object.values(g).filter(Boolean).length,te=Q===is,oe=te?{label:"Perfect",color:"emerald"}:s.persona||s.personality?{label:"AI Generated",color:"purple"}:{label:"Draft",color:"slate"},Ne=!!((Ie=s.name)!=null&&Ie.trim());s.persona||s.personality||s.character_name;const Ce=R=>{const de=W(M({},g),{[R]:!g[R]}),j=W(M({},s),{perfect_fields:de});h({perfect_fields:de}),X(!0),V(j)},xe=R=>{h(R),X(!0)},Se=(R,de)=>{T==null||T(R,de)},le=R=>{s.id&&(p==null||p(s.id,R))},Ae=()=>ne(void 0,null,function*(){if(s.persona)try{yield navigator.clipboard.writeText(s.persona),ke(!0),setTimeout(()=>ke(!1),2e3)}catch(R){console.error("Failed to copy:",R)}});return a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pb-24",children:[e.jsxs("div",{className:"sticky top-0 z-50 w-full bg-gradient-to-r from-primary-700 via-purple-700 to-slate-900 border-b border-white/10 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 opacity-25 mix-blend-screen bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.2),transparent_60%)]","aria-hidden":!0}),e.jsx("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 rounded-full border border-white/30 bg-white/10 px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.3em] text-white/90 transition hover:bg-white/20 hover:text-white",children:[e.jsx(fs,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate max-w-[200px] sm:max-w-none",children:s.name||"New Character"}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-medium ${oe.color==="emerald"?"bg-emerald-200/20 text-emerald-100":oe.color==="purple"?"bg-purple-200/20 text-purple-100":"bg-white/10 text-white/70"}`,children:[oe.color==="emerald"&&e.jsx(js,{size:12}),oe.color==="purple"&&e.jsx(Te,{size:12}),oe.label]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k&&e.jsx("button",{type:"button",onClick:R=>{R.preventDefault(),R.stopPropagation(),k()},className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-lg border border-white/30 text-white text-sm hover:bg-white/10 transition-colors",title:s.is_muted?"Unmute":"Mute",children:s.is_muted?e.jsx(tt,{size:16}):e.jsx(Ot,{size:16})}),w&&e.jsx("button",{onClick:w,className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-lg border border-white/30 text-white text-sm hover:bg-white/10 transition-colors",title:"Delete",children:e.jsx(Ms,{size:16})}),re&&e.jsx("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-white/10 px-3 py-1.5 text-xs text-white/90",children:e.jsx(Hs,{size:14,className:"animate-spin"})}),H&&!re&&e.jsx("span",{className:"hidden sm:inline-flex items-center gap-1.5 rounded-full bg-amber-200/20 px-3 py-1.5 text-xs text-amber-100",children:"Unsaved"})]})]})})]}),S.length>1&&e.jsx("div",{className:"sticky top-[64px] z-40 w-full bg-white border-b border-slate-200 shadow-sm",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:[$&&e.jsx("button",{onClick:$,className:"flex-shrink-0 rounded-full bg-slate-100 p-2 text-slate-600 transition hover:bg-slate-200",title:"Previous (â†)",children:e.jsx(ns,{size:18})}),e.jsx("div",{className:"flex items-center gap-2",children:S.map((R,de)=>{var P;const j=((P=R.name)==null?void 0:P.trim())||`Character ${de+1}`,_=de===t;return e.jsx("button",{onClick:()=>U==null?void 0:U(de),className:`flex-shrink-0 rounded-full px-4 py-2 text-xs sm:text-sm font-medium transition-all ${_?"bg-primary-600 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:j},R.id)})}),A&&e.jsx("button",{onClick:A,className:"flex-shrink-0 rounded-full bg-slate-100 p-2 text-slate-600 transition hover:bg-slate-200",title:"Next (â†’)",children:e.jsx(Ve,{size:18})})]})})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-slate-100",children:e.jsx(nt,{size:20,className:"text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Tell Andora About This Person"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Share the basics â€” Andora will craft the rest"})]})]}),e.jsxs("div",{className:"space-y-5 bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[e.jsx(ls,{label:"Name",value:s.name||"",onChange:R=>xe({name:R}),onPerfectToggle:()=>Ce("name"),onBlur:V,isPerfect:!!g.name,placeholder:"e.g., Josh, Starr, Oma",helpText:"The person's actual name",required:!0,fieldKey:"name",hideAIButtons:!0}),e.jsx(ls,{label:"Role",value:s.role||"",onChange:R=>xe({role:R}),onPerfectToggle:()=>Ce("role"),onBlur:V,isPerfect:!!g.role,placeholder:"e.g., CEO, CTO, Marketing Lead",helpText:"Their position or title",fieldKey:"role",hideAIButtons:!0}),e.jsx(ls,{label:"Work Mode",value:s.work_mode||"",onChange:R=>xe({work_mode:R}),onPerfectToggle:()=>Ce("work_mode"),onBlur:V,isPerfect:!!g.work_mode,type:"select",options:tr,fieldKey:"work_mode",hideAIButtons:!0}),e.jsx(ls,{label:"Gender",value:s.gender||"",onChange:R=>xe({gender:R}),onPerfectToggle:()=>Ce("gender"),onBlur:V,isPerfect:!!g.gender,type:"select",options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Non-binary",label:"Non-binary"},{value:"Prefer not to say",label:"Prefer not to say"}],helpText:"Helps Andora use correct pronouns",fieldKey:"gender",hideAIButtons:!0}),e.jsx(ls,{label:`What makes ${s.name||"them"} special?`,value:s.about||"",onChange:R=>xe({about:R}),onPerfectToggle:()=>Ce("about"),onBlur:V,isPerfect:!!g.about,type:"textarea",placeholder:"Strengths, quirks, key facts, communication style, anything memorable...",rows:4,helpText:"The more you share, the better Andora understands them",fieldKey:"about",hideAIButtons:!0}),e.jsxs("details",{className:"group pt-4 border-t border-slate-200",children:[e.jsxs("summary",{className:"cursor-pointer text-sm font-medium text-slate-600 hover:text-primary-600 transition-colors flex items-center gap-2",children:[e.jsx("span",{children:"Optional notes"}),e.jsxs("span",{className:"text-xs font-normal text-slate-400",children:["(",[s.backstory,s.voice].filter(Boolean).length>0?`${[s.backstory,s.voice].filter(Boolean).length} filled`:"Backstory, Voice",")"]})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(ls,{label:"Backstory Notes",value:s.backstory||"",onChange:R=>xe({backstory:R}),onPerfectToggle:()=>{},onBlur:V,isPerfect:!1,type:"textarea",placeholder:"Optional: Any backstory notes...",rows:2,helpText:"For your own reference",fieldKey:"backstory",hideAIButtons:!0,hidePerfectToggle:!0}),e.jsx(ls,{label:"Voice & Tone Notes",value:s.voice||"",onChange:R=>xe({voice:R}),onPerfectToggle:()=>{},onBlur:V,isPerfect:!1,type:"textarea",placeholder:"Optional: Notes about speaking style...",rows:2,helpText:"Reminders about tone or phrases",fieldKey:"voice",hideAIButtons:!0,hidePerfectToggle:!0})]})]})]})]})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:`relative overflow-hidden rounded-2xl border-2 transition-all ${Ne?"border-primary-300 bg-gradient-to-br from-primary-50 via-purple-50 to-white":"border-slate-200 bg-slate-50"}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_top_right,_rgba(139,92,246,0.3),transparent_50%)]","aria-hidden":!0}),e.jsxs("div",{className:"relative z-10 p-6 sm:p-8 flex flex-col sm:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(qe,{size:"lg",animate:l})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center justify-center sm:justify-start gap-2",children:[e.jsx(ts,{size:20,className:"text-primary-600"}),"Let Andora Build the Persona"]}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:Ne?"Based on what you've shared, Andora will suggest their character name, personality, and cinematic persona. Mark any field as perfect to lock itâ€”Andora will only update fields that aren't perfect.":"Add the person's name above to get started."})]}),m&&e.jsxs(N,{onClick:m,loading:l,disabled:!Ne,size:"lg",className:"flex-shrink-0 px-6 py-3 bg-gradient-to-r from-primary-600 to-purple-600 text-white hover:from-primary-700 hover:to-purple-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Te,{size:18,className:"mr-2"}),l?"Suggesting...":"Suggest"]})]})]})})}),e.jsx("div",{ref:O,className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-primary-100 to-purple-100",children:e.jsx(Ft,{size:20,className:"text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:["Andora's Generated Persona",e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-primary-100 text-primary-700 text-xs font-medium",children:[e.jsx(Te,{size:12}),"AI"]})]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Review Andora's suggestions â€” mark fields as perfect to lock them in"})]})]}),e.jsxs("div",{className:"space-y-5 bg-gradient-to-br from-primary-50/50 via-purple-50/50 to-white rounded-2xl border border-primary-200/50 p-6 shadow-sm",children:[e.jsx(ls,{label:"Character Name",value:s.character_name||"",onChange:R=>xe({character_name:R}),onPerfectToggle:()=>Ce("character_name"),onBlur:V,isPerfect:!!g.character_name,placeholder:"e.g., The Guardian, The Maverick, The Sage",helpText:"Their role in your brand's story â€” the name that captures who they are in the narrative",fieldKey:"character_name",suggestion:d==null?void 0:d.character_name,onSuggestionApply:Se,onSuggestionRefine:le,isRefining:u==="character_name"}),e.jsx(ls,{label:"Personality Type",value:s.personality||"",onChange:R=>xe({personality:R}),onPerfectToggle:()=>Ce("personality"),onBlur:V,isPerfect:!!g.personality,type:"input",placeholder:"e.g., Strategic visionary (INTJ), Creative catalyst, Empathetic connector",helpText:"How they approach work and life â€” their professional and personal operating style",fieldKey:"personality",suggestion:d==null?void 0:d.personality,onSuggestionApply:Se,onSuggestionRefine:le,isRefining:u==="personality"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ls,{label:"Cinematic Persona",value:s.persona||"",onChange:R=>xe({persona:R}),onPerfectToggle:()=>Ce("persona"),onBlur:V,isPerfect:!!g.persona,type:"textarea",placeholder:"Andora will craft a rich, detailed persona description here...",rows:6,helpText:"The full persona â€” edit anything that doesn't feel right",fieldKey:"persona",suggestion:d==null?void 0:d.persona,onSuggestionApply:Se,onSuggestionRefine:le,isRefining:u==="persona"}),s.persona&&e.jsx("button",{onClick:Ae,className:"px-4 py-2 text-sm bg-primary-50 hover:bg-primary-100 text-primary-700 rounded-lg transition-colors",children:ye?"âœ“ Copied!":"Copy Persona"})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-slate-200 shadow-lg",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-sm text-slate-600",children:te?"âœ“ All fields perfect â€” ready to train":`${Q}/${is} fields marked perfect`}),e.jsxs("div",{className:"flex items-center gap-2",children:[E&&e.jsxs(N,{onClick:E,size:"sm",variant:"outline",className:"border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:[e.jsx(ds,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:S.length===0?"Add Persona":"Add Another"}),e.jsx("span",{className:"inline sm:hidden",children:"Add"})]}),Y&&D&&e.jsxs(N,{onClick:D,loading:ae,size:"sm",className:"bg-emerald-600 text-white hover:bg-emerald-700",children:[e.jsx(js,{size:16,className:"mr-1.5"}),ae?"Training...":"All Done"]})]})]})})})]}):null},rr=({children:s,className:n=""})=>e.jsxs("div",{className:`relative ${n}`,children:[e.jsx("div",{className:"absolute -left-2 top-4 w-4 h-4 bg-white transform rotate-45 rounded-sm shadow-lg"}),e.jsx("div",{className:"relative bg-white rounded-2xl p-6 shadow-xl border border-primary-100/70",children:e.jsx("div",{className:"text-slate-700 leading-relaxed",children:s})})]}),nr=({onComplete:s})=>{const[n,a]=r.useState(0),c=[{title:"Welcome to Character Studio",icon:e.jsx(Te,{size:48,className:"text-primary-500"}),content:e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-lg mb-3",children:["Hi! I'm ",e.jsx("span",{className:"font-semibold text-purple-600",children:"Andora"}),", your brand storytelling assistant."]}),e.jsxs("p",{className:"mb-3",children:["Think of your brand as a ",e.jsx("span",{className:"font-semibold",children:"TV series"}),", and the people working at your brand as the ",e.jsx("span",{className:"font-semibold",children:"cast"}),"."]}),e.jsx("p",{className:"text-slate-600",children:"Just like viewers connect with different characters in their favorite shows, your audience will connect with different people on your team."})]})},{title:"Build Your Cast",icon:e.jsx(ds,{size:48,className:"text-primary-400"}),content:e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-lg mb-3",children:["Here's how we'll work ",e.jsx("span",{className:"font-semibold text-pink-600",children:"together"}),":"]}),e.jsxs("ul",{className:"space-y-3 text-slate-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-primary-500",children:"âœ“"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"You provide"})," the raw facts: names, roles, quirks, backstories"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-primary-500",children:"âœ“"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"I weave"})," them into compelling personas that resonate emotionally"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-primary-500",children:"âœ“"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"You mark fields perfect"})," when they capture the essence just right"]})]})]})]})},{title:"When You'll Use Personas",icon:e.jsx(ts,{size:48,className:"text-accent-500"}),content:e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-lg mb-3",children:["These personas become the ",e.jsx("span",{className:"font-semibold text-rose-600",children:"foundation"})," for all your content:"]}),e.jsxs("ul",{className:"space-y-3 text-slate-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“±"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Social posts"})," - I'll write in their authentic voice"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Blog content"})," - Each character drives different storylines"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"ðŸŽ¬"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Video scripts"})," - Bringing their personalities to life"]})]})]}),e.jsx("p",{className:"mt-4 text-slate-600 italic",children:"The better we craft these personas together, the more compelling your brand story becomes."})]})}],h=()=>{n<c.length-1?a(n+1):s()},o=()=>{n>0&&a(n-1)},w=c[n];return e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-dark-900/60 to-primary-100 z-50 flex items-center justify-center p-4 sm:p-6 overflow-y-auto",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-16 left-12 w-72 h-72 bg-primary-200 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-16 right-16 w-96 h-96 bg-primary-300/70 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"1s"}})]}),e.jsx("div",{className:"relative max-w-4xl w-full my-auto",children:e.jsxs("div",{className:"relative bg-white/95 backdrop-blur border border-primary-100/70 shadow-2xl rounded-3xl px-6 py-6 sm:px-8 sm:py-8 md:px-10 md:py-10 max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-primary-500 via-accent-400 to-primary-400"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-8 md:gap-12",children:[e.jsx("div",{className:"flex flex-col items-center md:items-start",children:e.jsx("div",{className:"rounded-2xl border border-primary-100 bg-white px-6 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/andora-logo.png",alt:"Andora",className:"h-8 w-auto"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-500",children:"Character Studio"})]})})}),e.jsxs(rr,{className:"flex-1",children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w.icon,e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:w.title})]}),e.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",n+1," of ",c.length]})]}),w.content]})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{onClick:o,variant:"outline",disabled:n===0,className:"flex items-center",children:[e.jsx(ns,{size:16,className:"mr-1"}),"Back"]}),e.jsx(N,{onClick:h,className:"flex items-center",children:n===c.length-1?e.jsxs(e.Fragment,{children:["Enter Studio",e.jsx(Te,{size:16,className:"ml-2"})]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(Ve,{size:16,className:"ml-1"})]})})]}),e.jsx("div",{className:"flex items-center gap-2 self-center md:self-auto",children:c.map((k,m)=>e.jsx("button",{onClick:()=>a(m),className:`h-2 rounded-full transition-all duration-300 ${m===n?"w-10 bg-primary-600":"w-3 bg-primary-200 hover:bg-primary-300"}`,"aria-label":`Go to onboarding step ${m+1}`},m))})]})]})})]})},dt=({message:s,show:n=!0,modelInfo:a,progress:c,onStop:h,action:o})=>n?(c&&c.total>0&&Math.round(c.current/c.total*100),e.jsx("div",{className:"fixed top-4 right-4 z-[9999] animate-slide-in-right",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-2xl border border-orange-200/50 bg-gradient-to-br from-white/95 via-orange-50/30 to-white/95 backdrop-blur shadow-xl max-w-md",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"/py-logo.png",alt:"Py",className:"w-10 h-10 rounded-full ring-2 ring-orange-200/60"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-orange-200/30 blur-md animate-pulse"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-slate-700",children:"Py"}),e.jsx(Hs,{className:"w-3 h-3 text-orange-500 animate-spin"})]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s}),o&&e.jsx("button",{onClick:o.onClick,className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-semibold",children:o.label})]}),h&&e.jsx("button",{onClick:h,className:"flex-shrink-0 p-1.5 rounded-full hover:bg-red-50 text-red-500 hover:text-red-600 transition-colors group",title:"Stop generation",children:e.jsx(Na,{className:"w-5 h-5"})})]})})):null,lr=`
  @keyframes slide-in-right {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
  }
`;if(typeof document!="undefined"){const s=document.createElement("style");s.textContent=lr,document.head.appendChild(s)}const ir={ai_prefill_narrative:["I'm diving deep into your brand's soul...","I'm weaving your brand story with care...","I'm crafting narrative magic just for you...","I'm discovering the heart of your story...","I'm painting your brand's unique picture..."],ai_refine_narrative:["I'm polishing your narrative with care...","I'm enhancing your story's emotional impact...","I'm adding storytelling depth to your words...","I'm refining your brand's message...","I'm elevating your narrative to the next level..."],ai_generate_cast:["I'm bringing your characters to life...","I'm creating compelling personas for your brand...","I'm sculpting voices that will tell your story...","I'm designing personalities that resonate...","I'm giving life to your brand's storytellers..."],ai_generate_theme:["I'm weaving monthly story themes...","I'm creating narrative threads that connect...","I'm designing your content compass...","I'm crafting themes that guide your message...","I'm building the framework for your stories..."],ai_generate_weekly_subplot:["I'm creating weekly story arcs...","I'm building narrative tension and flow...","I'm designing your week's journey...","I'm crafting subplots that unfold beautifully...","I'm mapping out your story's progression..."],ai_generate_calendar:["I'm building your story-driven content calendar...","I'm creating narrative flow across your timeline...","I'm putting together your content plan...","I'm designing your strategic content journey...","I'm weaving stories throughout your schedule..."],ai_generate_content_day:["I'm crafting today's story scene...","I'm selecting the perfect character for this moment...","I'm weaving your weekly subplot into today's content...","I'm creating scroll-stopping content for today...","I'm designing your content brief with creative precision...","I'm mapping out today's narrative beat..."],ai_generate_content_week:["I'm building a week of story-driven content...","I'm lining up your week's story...","I'm creating content flow across the week...","I'm designing 7 days of compelling storytelling...","I'm weaving your subplot through the week...","I'm mapping weekly content with character precision..."],ai_generate_content_month:["I'm building a month of narrative-driven content...","I'm piecing together 30 days of stories...","I'm creating your monthly content masterpiece...","I'm designing a full month of story arcs...","I'm weaving themes throughout your month...","I'm mapping your entire monthly journey..."],ai_regenerate_content:["I'm reimagining this content scene...","I'm creating a fresh take on this story beat...","I'm rethinking character and format choices...","I'm crafting a new creative direction...","I'm finding a better angle for this moment...","I'm redesigning this content with fresh eyes..."],ai_refine_content:["I'm adding story magic to your content...","I'm enhancing narrative flow and impact...","I'm polishing your message to perfection...","I'm infusing your content with brand essence...","I'm fine-tuning every word to resonate..."],ai_resolve_cast:["I'm understanding your vision for the cast...","I'm refining character profiles with your input...","I'm harmonizing your ideas with brand essence...","I'm bringing clarity to your character lineup...","I'm shaping personas that match your vision..."],ai_train_cast:["I'm learning your character voices...","I'm absorbing your cast's unique personalities...","I'm training on your brand storytellers...","I'm internalizing character essence...","I'm getting ready to speak in their voices..."],ai_save_brand:["Got it, I'm saving your updates...","I'm locking in your latest changes...","I'm capturing your brand story...","I've got this saved for you..."],ai_processing:["I'm on it...","I'm cooking up something good...","I'm making magic happen...","I'm bringing your ideas to life...","Give me just a moment..."],ai_analyzing:["I'm reading between the lines...","I'm getting to know your brand's essence...","I'm exploring your story's potential...","I'm finding the perfect narrative angle...","I'm tuning into your unique voice..."]},or=s=>{const n=ir[s];return!n||!Array.isArray(n)||n.length===0?(console.warn(`[getLoadingMessage] Invalid or missing type: "${s}"`),String(s)):n[Math.floor(Math.random()*n.length)]},Yt=()=>{const[s,n]=r.useState(""),[a,c]=r.useState(void 0),[h,o]=r.useState(!1),[w,k]=r.useState(void 0),m=r.useCallback((T,p,u)=>{const S=or(T);n(S),c(p),o(!0),k(u)},[]),l=r.useCallback(()=>{o(!1),n(""),c(void 0),k(void 0)},[]),d=r.useCallback((T,p,u)=>{n(T),c(p),o(!0),k(u)},[]);return{message:s,modelInfo:a,isVisible:h,action:w,showNotification:m,hideNotification:l,updateMessage:d}},Ht="andora:last-model",at=new Set;let Cs=null;const Kt=typeof window!="undefined"&&typeof localStorage!="undefined",cr=s=>Kt?Cs||(Cs=localStorage.getItem(Ht)||s,Cs):s,dr=s=>{Cs=s,Kt&&localStorage.setItem(Ht,s),at.forEach(n=>n(s))},mt=s=>{const[n,a]=r.useState(()=>cr(s));r.useEffect(()=>{const h=o=>a(o);return at.add(h),()=>{at.delete(h)}},[]);const c=r.useCallback(h=>{dr(h)},[]);return[n,c]},Zs=()=>`new-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,mr=(s,n)=>{if(!s)return n||"";const a=s.toUpperCase(),c=a.match(/[A-Z]{4}-[A-Z]/);if(c)return c[0];const h=a.replace(/[^A-Z]/g,"");return h.length>=5?`${h.slice(0,4)}-${h.slice(4,5)}`:n||a},At=s=>s.split(/[,\n]/).map(n=>n.trim()).filter(Boolean),xr=s=>({id:s.id,name:s.name,character_name:s.character_name||s.real_name,role:s.role,about:s.about,personality:s.personality,age_range:s.age_range,work_mode:s.work_mode,persona:s.persona,backstory:s.backstory,voice:s.voice,emotional_range:s.emotional_range,personality_tags:s.personality_tags,perfect_fields:s.perfect_fields||{}}),hr=s=>s.map(xr),pr=({brand:s,onBrandUpdate:n,generateCast:a,prefillNarrative:c,isGenerating:h,onStudioStateChange:o})=>{var ve,be;const[w,k]=mt("gemini-2.5-flash"),{isAdmin:m,authUser:l}=Ns();if(!s)return e.jsx(Gt,{title:"Define Your Company's Mission and Structure",description:"Outline your company's mission, vision, and structure. Generate AI-powered HR roles and job descriptions that align with your business needs."});const[d,T]=r.useState([]),[p,u]=r.useState({}),[S,t]=r.useState(!1),[U,$]=r.useState(!1),[A,E]=r.useState(!1),[C,D]=r.useState(!0),[Y,ae]=r.useState({}),[re,J]=r.useState(0),[H,X]=r.useState(!1),[ye,ke]=r.useState(!1),[O,V]=r.useState(!0),[g,Q]=r.useState(!0),te=r.useRef(!1),ge=ms();r.useEffect(()=>{!localStorage.getItem("andora_character_studio_onboarded")&&d.length===0&&ke(!0)},[d.length]);const oe=()=>{localStorage.setItem("andora_character_studio_onboarded","true"),ke(!1)},Ne=r.useCallback(x=>{if(!x)return[];if(Array.isArray(x))return x;if(typeof x=="string")try{const f=JSON.parse(x);return Ne(f)}catch(f){return console.warn("Unable to parse characters payload string from AI orchestrator:",{payload:x,error:f}),[]}if(typeof x=="object"){const f=x;if(Array.isArray(f.characters)||typeof f.characters=="string")return Ne(f.characters);if(Array.isArray(f.cast)||typeof f.cast=="string")return Ne(f.cast);if(f.result!==void 0)return Ne(f.result);if(f.data!==void 0)return Ne(f.data);if(Array.isArray(f.items))return Ne(f.items);const B=Object.values(f),i=B.filter(q=>q&&typeof q=="object");if(i.length>0&&i.length===B.length&&i.every(q=>!Array.isArray(q)))return i;const b=i;for(const q of b){const L=Ne(q);if(L.length>0)return L}}return console.warn("Unexpected characters payload from AI orchestrator:",x),[]},[]),{message:Ce,modelInfo:xe,isVisible:Se,showNotification:le,hideNotification:Ae,updateMessage:Ie}=Yt(),[R,de]=r.useState(null),[j,_]=r.useState(!1);r.useEffect(()=>{ne(void 0,null,function*(){if(s!=null&&s.brand_id)try{D(!0);const f=yield Re.getCharacters(s.brand_id);T(f),u({}),f.length>0?J(B=>Math.min(B,f.length-1)):J(0)}catch(f){console.error("Failed to load characters:",f)}finally{D(!1)}})},[s==null?void 0:s.brand_id]),r.useEffect(()=>{J(x=>d.length===0?0:Math.min(x,d.length-1)),d.length>0&&(te.current=!1)},[d.length]),r.useEffect(()=>{u(x=>{let f=!1;const B={};return d.forEach(i=>{const b=x[i.id];if(!b)return;const q=i.perfect_fields||{},L=Object.entries(b).filter(([he])=>!q[he]);if(L.length===0){Object.keys(b).length>0&&(f=!0);return}const ue=Object.fromEntries(L);if(!f){const he=Object.entries(b);if(L.length!==he.length)f=!0;else for(const[ze,hs]of he)if(ue[ze]!==hs){f=!0;break}}B[i.id]=ue}),Object.keys(x).forEach(i=>{d.some(b=>b.id===i)||(f=!0)}),!f&&Object.keys(x).length===Object.keys(B).length&&Object.keys(x).every(b=>!!B[b])?x:B})},[d]),r.useEffect(()=>{ae(x=>{const f={};return d.forEach(B=>{x[B.id]&&(f[B.id]=x[B.id])}),f})},[d]);const[P,Z]=r.useState({narrative_why:s.narrative_why||"",narrative_problem:s.narrative_problem||"",narrative_solution:s.narrative_solution||"",narrative_cta:s.narrative_cta||"",narrative_failure:s.narrative_failure||"",narrative_success:s.narrative_success||""}),se=r.useRef(!1),pe=r.useRef(null),fe=r.useRef(s.brand_id),He=r.useRef(ct(x=>{n(x)},1e3)).current,[G,Ee]=r.useState(s.narrative_perfect_fields||{});r.useEffect(()=>{s.brand_id!==fe.current&&(console.log("ðŸ”„ PersonnelStudioPage: Brand switched, syncing data"),Z({narrative_why:s.narrative_why||"",narrative_problem:s.narrative_problem||"",narrative_solution:s.narrative_solution||"",narrative_cta:s.narrative_cta||"",narrative_failure:s.narrative_failure||"",narrative_success:s.narrative_success||""}));const f=s.narrative_perfect_fields||{};Ee(f),fe.current=s.brand_id},[s.brand_id,s.narrative_perfect_fields]);const Me=r.useRef(h);r.useEffect(()=>{const x=Me.current&&!h;if(se.current&&!x){Me.current=h;return}x&&(console.log("ðŸ”„ PersonnelStudioPage: AI generation complete, force syncing results"),se.current=!1,pe.current&&(clearTimeout(pe.current),pe.current=null)),Z({narrative_why:s.narrative_why||"",narrative_problem:s.narrative_problem||"",narrative_solution:s.narrative_solution||"",narrative_cta:s.narrative_cta||"",narrative_failure:s.narrative_failure||"",narrative_success:s.narrative_success||""}),Me.current=h},[h,s.narrative_why,s.narrative_problem,s.narrative_solution,s.narrative_cta,s.narrative_failure,s.narrative_success]),r.useEffect(()=>{h?le("ai_prefill_narrative"):Ae()},[h,le,Ae]),r.useEffect(()=>()=>{pe.current&&clearTimeout(pe.current)},[]);const _e=r.useCallback((x,f)=>{se.current=!0,pe.current&&clearTimeout(pe.current),Z(B=>W(M({},B),{[x]:f})),He({[x]:f}),pe.current=setTimeout(()=>{se.current=!1},1500)},[He]),$e=x=>ne(void 0,null,function*(){console.log("ðŸŽ¯ togglePerfectField called for:",x),console.log("ðŸŽ¯ Current perfectFields:",G);const f=`narrative_${x}`,B=W(M({},G),{[f]:!G[f]});console.log("ðŸŽ¯ New perfectFields:",B),Ee(B);try{console.log("ðŸŽ¯ Calling apiClient.updateBrand with:",{narrative_perfect_fields:B});const i=yield Re.updateBrand(s.brand_id,{narrative_perfect_fields:B});console.log("ðŸŽ¯ API response:",i),n({narrative_perfect_fields:B}),console.log("ðŸŽ¯ Perfect field saved successfully!")}catch(i){console.error("âŒ Failed to save perfect field:",i),Ee(G)}}),Be=()=>{c(s.brand_id),de(null)},De=r.useMemo(()=>{var x,f,B,i,b,q;return!!((x=P.narrative_why)!=null&&x.trim()&&((f=P.narrative_problem)!=null&&f.trim())&&((B=P.narrative_solution)!=null&&B.trim())&&((i=P.narrative_cta)!=null&&i.trim())&&((b=P.narrative_failure)!=null&&b.trim())&&((q=P.narrative_success)!=null&&q.trim()))},[P]),We=()=>ne(void 0,null,function*(){if(De){_(!0),le("ai_refine_narrative");try{const x=yield Re.prefillNarrative({brandName:s.brand_name,tagline:s.taglines,about:s.about,vision:s.vision,mission:s.mission,persona:s.persona,buyerProfile:s.buyer_profile,products:s.products,voice:s.voice,existingNarrative:{why:P.narrative_why,problem:P.narrative_problem,solution:P.narrative_solution,cta:P.narrative_cta,failure:P.narrative_failure,success:P.narrative_success},perfectFields:G});x!=null&&x.narrative&&de(x.narrative)}catch(x){console.error("Failed to refine narrative:",x)}finally{_(!1),Ae()}}}),Oe=(x,f)=>{_e({why:"narrative_why",problem:"narrative_problem",solution:"narrative_solution",cta:"narrative_cta",failure:"narrative_failure",success:"narrative_success"}[x],f),de(i=>i?W(M({},i),{[x]:void 0}):null)},Ke=()=>ne(void 0,null,function*(){if(!m){alert("This feature is only available for admin accounts");return}const x=`=== COMPANY STRATEGY ===

Mission/Purpose: ${P.narrative_why||"(not set)"}

Challenge: ${P.narrative_problem||"(not set)"}

Approach: ${P.narrative_solution||"(not set)"}

Key Communication Phrases: ${P.narrative_cta||"(not set)"}

Potential Risks: ${P.narrative_failure||"(not set)"}

Success Metrics: ${P.narrative_success||"(not set)"}

Generated by Py Personnel Studio - ${new Date().toLocaleString()}`;try{yield navigator.clipboard.writeText(x),alert("âœ¨ All strategy fields copied to clipboard!")}catch(f){console.error("Failed to copy:",f),alert("Failed to copy to clipboard")}}),Qe=()=>ne(void 0,null,function*(){if(!m){alert("This feature is only available for admin accounts");return}if(d.length===0){alert("No team members to copy");return}let x=`=== TEAM ROSTER ===

`;d.forEach((f,B)=>{const i=Object.values(f.perfect_fields||{}).filter(Boolean).length;x+=`TEAM MEMBER ${B+1}: ${f.character_name||f.name||"Untitled"}
`,x+=`Status: ${f.is_muted?"INACTIVE":"ACTIVE"} | Defined Fields: ${i}/${is}
`,x+=`${"=".repeat(60)}

`,x+=`Role Label: ${f.name||"(not set)"}
`,x+=`Name: ${f.character_name||"(not set)"}
`,x+=`Role: ${f.role||"(not set)"}
`,x+=`Age Range: ${f.age_range||"(not set)"}
`,x+=`Work Mode: ${f.work_mode||"(not set)"}

`,x+=`About:
${f.about||"(not set)"}

`,x+=`Personality Type: ${f.personality||"(not set)"}

`,x+=`Persona:
${f.persona||"(not set)"}

`,f.backstory&&(x+=`Professional Background:
${f.backstory}

`),f.voice&&(x+=`Communication Style:
${f.voice}

`),f.emotional_range&&f.emotional_range.length>0&&(x+=`Behavioral Traits:
${f.emotional_range.join(`
`)}

`),f.personality_tags&&f.personality_tags.length>0&&(x+=`Skill Tags:
${f.personality_tags.join(`
`)}

`),x+=`
`}),x+=`
Generated by Py Personnel Studio - ${new Date().toLocaleString()}`;try{yield navigator.clipboard.writeText(x),alert(`âœ¨ All ${d.length} team member(s) copied to clipboard!`)}catch(f){console.error("Failed to copy:",f),alert("Failed to copy to clipboard")}}),Fe=()=>{if(((s==null?void 0:s.brand_type)||"organization")==="individual"&&d.length>=1){alert("Individual brands are limited to 1 team member (your personal brand profile). Switch to Organization brand type to add more team members.");return}const f={id:Zs(),name:"",character_name:"",role:"",about:"",personality:"",persona:"",backstory:"",voice:"",emotional_range:[],personality_tags:[],perfect_fields:{}},B=[...d,f];T(B),J(B.length-1)},es=()=>{if(d.length===0){te.current||(te.current=!0,Fe()),X(!0),o==null||o(!0);return}X(!0),o==null||o(!0)},Ue=()=>{d.length<=1||J(x=>(x-1+d.length)%d.length)},Je=()=>{d.length<=1||J(x=>(x+1)%d.length)},Le=(x,f,B)=>{const i=d.findIndex(L=>L.id===x);if(i===-1)return;const b={};switch(f){case"age_range":b.age_range=B;break;case"work_mode":b.work_mode=B;break;case"personality":b.personality=mr(B,d[i].personality);break;case"persona":b.persona=B;break;case"backstory":b.backstory=B;break;case"voice":b.voice=B;break;case"emotional_range":b.emotional_range=At(B);break;case"personality_tags":b.personality_tags=At(B);break;case"name":b.name=B;break;case"character_name":b.character_name=B;break;case"role":b.role=B;break;case"about":b.about=B;break}if(Object.keys(b).length===0)return;const q=M(M({},d[i]),b);y(i,b),u(L=>{const ue=L[x];if(!ue)return L;const he=M({},ue);if(delete he[f],Object.keys(he).length===0){const ze=L,{[x]:hs}=ze;return gt(ze,[ut(x)])}return W(M({},L),{[x]:he})}),ce(q).catch(L=>{console.error("Failed to save team member after applying suggestion:",L)})},Ge=(x,f)=>ne(void 0,null,function*(){const B=d.find(b=>b.id===x);if(!(!B||(B.perfect_fields||{})[f])){ae(b=>W(M({},b),{[x]:f}));try{const b=yield as.refineCharacterField(s,f,B,d,(l==null?void 0:l.preferred_ai_model)||"gemini-2.5-flash");if(!b)return;u(q=>W(M({},q),{[x]:W(M({},q[x]||{}),{[f]:b})}))}catch(b){console.error("Failed to refine character field:",b)}finally{ae(b=>W(M({},b),{[x]:null}))}}}),y=(x,f)=>{const B=[...d];B[x]=M(M({},B[x]),f),T(B)},ce=x=>ne(void 0,null,function*(){try{if(console.log("ðŸ” PersonnelStudioPage.saveTeamMember CALLED:",{id:x.id,name:x.name,character_name:x.character_name,hasCharacterName:"character_name"in x,allKeys:Object.keys(x)}),x.id&&x.id.startsWith("new-")){const f=yield Re.createCharacter(M({brand_id:s.brand_id},x)),B=d.findIndex(i=>i.id===x.id);if(B>=0){const i=[...d];i[B]=W(M({},i[B]),{id:f.id}),T(i)}}else yield Re.updateCharacter(x.id,x)}catch(f){throw console.error("Failed to save team member:",f),f}}),ie=x=>ne(void 0,null,function*(){const f=d[x];try{if(f.id&&!f.id.startsWith("new-")){const B=yield Re.toggleCharacterMute(f.id),i=[...d];i[x]=W(M({},i[x]),{is_muted:B.is_muted}),T(i),n({team_management:i})}}catch(B){console.error("Failed to toggle member activity:",B)}}),je=()=>ne(void 0,null,function*(){var f,B,i;if(((s==null?void 0:s.brand_type)||"organization")==="individual"&&d.length>=1){alert("Individual brands are limited to 1 team member (your personal brand profile). Switch to Organization brand type to add more team members.");return}t(!0),le("ai_generate_cast");try{const b={id:Zs(),name:"",character_name:"",role:"",perfect_fields:{}},q=[...d,b],L=yield Re.generateCastWithAI({brandName:s.brand_name,about:s.about,persona:s.persona,buyerProfile:s.buyer_profile},hr(q),w),ue=Ne((i=(B=(f=L==null?void 0:L.characters)!=null?f:L==null?void 0:L.rawCharacters)!=null?B:L==null?void 0:L.cast)!=null?i:L),he=ue[ue.length-1];if(!he)throw new Error("No character returned by AI");const ze=W(M({},he),{id:he.id||Zs()}),hs=[...d,ze];T(hs),J(hs.length-1),yield ce(ze)}catch(b){console.error("Failed to suggest team member:",b),alert("Failed to suggest next team member. Please try again.")}finally{t(!1),Ae()}}),v=()=>ne(void 0,null,function*(){$(!0),le("ai_train_cast");try{yield Re.request("/ai/train-team-members",{method:"POST",body:JSON.stringify({brandId:s.brand_id,characters:d.filter(x=>{const f=x.perfect_fields||{};return Object.values(f).filter(Boolean).length===is})})}),E(!0)}catch(x){console.error("Failed to train Py:",x),alert("Failed to train Py. You can still continue to events."),E(!0)}finally{$(!1),Ae()}}),I=d.some(x=>{const f=x.perfect_fields||{};return Object.values(f).filter(Boolean).length===is});d.some(x=>{const f=x.perfect_fields||{};return Object.values(f).filter(Boolean).length<is});const F=(ve=d[re])!=null?ve:null,z=["narrative_why","narrative_problem","narrative_solution","narrative_cta","narrative_failure","narrative_success"],ee=z.filter(x=>{var f;return(f=P[x])==null?void 0:f.trim()}).length,K=z.every(x=>G[x]);r.useEffect(()=>{K&&V(!1)},[K]);const me=d.length>0&&d.every(x=>{const f=x.perfect_fields||{};return Object.values(f).filter(Boolean).length===is});r.useEffect(()=>{me&&Q(!1)},[me]);const we=d.filter(x=>{const f=x.perfect_fields||{};return Object.values(f).filter(Boolean).length===is}).length;return d.length&&Math.round(we/d.length*100),r.useMemo(()=>[{id:"strategy",label:"Strategy",description:"Business strategy defined",complete:ee===z.length},{id:"team",label:"Team",description:`${we}/${Math.max(d.length,1)} members defined`,complete:d.length>0&&we===d.length},{id:"briefing",label:"Briefing",description:I?"Ready to brief Py":"Define team roles to unlock briefing",complete:A}],[d.length,ee,I,z.length,we,A]),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 space-y-10",children:[e.jsx(dt,{message:Ce,show:Se,modelInfo:xe}),e.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-primary-500/20 bg-gradient-to-br from-primary-600 via-purple-600 to-slate-900 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-screen bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),transparent_65%)]","aria-hidden":!0}),e.jsx("div",{className:"relative z-10 flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between p-6 sm:p-8",children:e.jsxs("div",{className:"space-y-5 max-w-2xl",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:[e.jsx(As,{className:"w-4 h-4"}),"Personnel studio"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold leading-tight",children:"Develop Your Organizational Structure"}),e.jsx("p",{className:"text-sm sm:text-base text-white/80 leading-relaxed",children:"Outline key roles, build your team, and prepare Py to assist with HR and operational tasks. Every detail here trains the personnel management system."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs sm:text-sm text-white/80",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(Te,{className:"w-3.5 h-3.5"}),"Organizational intelligence"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(ds,{className:"w-3.5 h-3.5"}),d.length||"No"," team members defined"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx($s,{className:"w-3.5 h-3.5"}),h?"Generatingâ€¦":"Changes saved"]})]})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`rounded-2xl border shadow-sm transition-all ${K?"border-green-400/50 bg-green-50/30":"border-slate-200/80 bg-white/80"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>V(!O),className:"p-1 text-slate-500 hover:text-primary-600 transition-colors",title:O?"Collapse":"Expand to edit",children:O?e.jsx(jt,{size:20}):e.jsx(Bs,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-primary-900",children:"Company Vision & Strategy"}),K&&e.jsx("span",{className:"text-xs text-green-600 font-medium bg-green-100 px-2 py-0.5 rounded-full",children:"Perfect"})]}),!O&&e.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:K?"Company strategy complete":"Click to expand and define your strategy"}),O&&e.jsx("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Define your company's core strategy using a proven business framework"})]})]}),O&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{onClick:()=>ne(void 0,null,function*(){if(K)return;const x={narrative_why:!0,narrative_problem:!0,narrative_solution:!0,narrative_cta:!0,narrative_failure:!0,narrative_success:!0};Ee(x);try{yield Re.updateBrand(s.brand_id,{narrative_perfect_fields:x}),n({narrative_perfect_fields:x}),le("success"),setTimeout(()=>Ae(),2e3)}catch(f){console.error("Failed to mark all perfect",f)}}),variant:"outline",size:"sm",className:`flex items-center text-sm ${K?"text-green-600 border-green-200 bg-green-50":""}`,disabled:K,title:"Mark all strategy fields as perfect",children:[e.jsx(xs,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:K?"All Perfect":"Mark All Perfect"}),e.jsx("span",{className:"sm:hidden",children:"All âœ“"})]}),m&&e.jsxs(N,{onClick:Ke,variant:"outline",size:"sm",className:"flex items-center text-sm",title:"Copy all strategy fields to clipboard (Admin only)",children:[e.jsx(Ze,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Copy All"})]}),e.jsxs(N,{onClick:Be,loading:h,className:"flex items-center text-sm",size:"sm",children:[e.jsx(ts,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Write for Me"}),e.jsx("span",{className:"sm:hidden",children:"AI Fill"})]}),De&&e.jsxs(N,{onClick:We,loading:j,className:"flex items-center text-sm bg-orange-500 hover:bg-orange-600",size:"sm",children:[e.jsx(Te,{size:16,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Refine"}),e.jsx("span",{className:"sm:hidden",children:"âœ¨"})]})]})]}),O&&e.jsxs("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 border-t border-slate-200/50 pt-4 sm:pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative ${G.narrative_why?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Mission/Purpose"}),e.jsx("button",{onClick:()=>$e("why"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_why?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_why?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_why?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_why,onChange:x=>_e("narrative_why",x.target.value),placeholder:"What is the core purpose or mission of your company?",maxLength:Ye.narrative_why,showCharCount:!0})]}),e.jsxs("div",{className:`relative ${G.narrative_problem?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Key Challenges"}),e.jsx("button",{onClick:()=>$e("problem"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_problem?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_problem?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_problem?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_problem,onChange:x=>_e("narrative_problem",x.target.value),placeholder:"What key challenges does your company or its clients face?",maxLength:Ye.narrative_problem,showCharCount:!0})]}),e.jsxs("div",{className:`relative ${G.narrative_solution?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Strategic Approach"}),e.jsx("button",{onClick:()=>$e("solution"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_solution?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_solution?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_solution?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_solution,onChange:x=>_e("narrative_solution",x.target.value),placeholder:"How does your company address these challenges or achieve its goals?",maxLength:Ye.narrative_solution,showCharCount:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative ${G.narrative_cta?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Key Communication Phrases"}),e.jsx("button",{onClick:()=>$e("cta"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_cta?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_cta?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_cta?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_cta,onChange:x=>_e("narrative_cta",x.target.value),placeholder:"e.g., 'Driving Innovation', 'Client-First Approach', 'Excellence in Execution'",maxLength:Ye.narrative_cta,showCharCount:!0})]}),e.jsxs("div",{className:`relative ${G.narrative_failure?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Operational Risks"}),e.jsx("button",{onClick:()=>$e("failure"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_failure?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_failure?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_failure?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_failure,onChange:x=>_e("narrative_failure",x.target.value),placeholder:"What are the potential risks or negative outcomes if company objectives are not met?",maxLength:Ye.narrative_failure,showCharCount:!0})]}),e.jsxs("div",{className:`relative ${G.narrative_success?"bg-green-50/30 rounded-lg p-2 -m-2":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Key Performance Indicators (KPIs)"}),e.jsx("button",{onClick:()=>$e("success"),className:`px-2 py-1 rounded text-xs font-medium transition-all ${G.narrative_success?"text-green-600 border border-green-400/50 bg-green-50 hover:bg-green-100":"text-slate-500 border border-slate-300 hover:border-slate-400"}`,type:"button",title:G.narrative_success?"Marked as perfect - AI will skip":"Mark as perfect",children:G.narrative_success?"âœ“ Perfect":"Mark"})]}),e.jsx(Pe,{value:P.narrative_success,onChange:x=>_e("narrative_success",x.target.value),placeholder:"What does success look like for your company? Define key metrics and outcomes.",maxLength:Ye.narrative_success,showCharCount:!0})]})]})]}),R&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-orange-600 flex items-center gap-2",children:[e.jsx(Te,{size:16}),"Py's Suggestions"]}),e.jsxs("div",{className:"space-y-2",children:[R.why&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Mission/Purpose"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.why})]}),e.jsx("button",{onClick:()=>Oe("why",R.why),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})}),R.problem&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Key Challenges"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.problem})]}),e.jsx("button",{onClick:()=>Oe("problem",R.problem),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})}),R.solution&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Strategic Approach"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.solution})]}),e.jsx("button",{onClick:()=>Oe("solution",R.solution),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})}),R.cta&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Key Communication Phrases"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.cta})]}),e.jsx("button",{onClick:()=>Oe("cta",R.cta),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})}),R.failure&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Operational Risks"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.failure})]}),e.jsx("button",{onClick:()=>Oe("failure",R.failure),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})}),R.success&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-orange-700 mb-1",children:"Key Performance Indicators (KPIs)"}),e.jsx("p",{className:"text-sm text-slate-700",children:R.success})]}),e.jsx("button",{onClick:()=>Oe("success",R.success),className:"shrink-0 p-2 hover:bg-orange-100 rounded-lg transition-colors",title:"Copy to field",children:e.jsx(Ze,{size:16,className:"text-orange-600"})})]})})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-primary-200/40",children:e.jsxs("span",{className:"text-xs text-slate-400 flex items-center",children:[e.jsx($s,{size:12,className:"mr-1"}),"Changes saved automatically"]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs(N,{onClick:es,className:"w-full flex items-center justify-center gap-2 py-4 text-base",children:[e.jsx(Te,{size:18}),"Enter Team Studio"]}),e.jsx("p",{className:"mt-2 text-center text-xs text-slate-500",children:"Define detailed team roles once your strategic foundations are in place."})]})]})]}),e.jsxs("div",{className:`rounded-2xl border shadow-sm transition-all ${me?"border-green-400/50 bg-green-50/30":"border-slate-200/80 bg-white/80"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>Q(!g),className:"p-1 text-slate-500 hover:text-primary-600 transition-colors",title:g?"Collapse":"Expand",children:g?e.jsx(jt,{size:20}):e.jsx(Bs,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-primary-900",children:"Team Structure"}),me&&e.jsx("span",{className:"text-xs text-green-600 font-medium bg-green-100 px-2 py-0.5 rounded-full",children:"Perfect"})]}),!g&&d.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:d.map((x,f)=>e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-xs text-slate-700 font-medium",children:x.character_name||x.name||`Team Member ${f+1}`}),e.jsx("button",{onClick:B=>{B.stopPropagation(),ie(f)},className:`p-0.5 rounded transition-colors ${x.is_muted?"text-slate-400 hover:text-slate-600":"text-primary-500 hover:text-primary-700"}`,title:x.is_muted?"Activate":"Deactivate",children:x.is_muted?e.jsx(js,{size:14}):e.jsx(xs,{size:14})})]},x.id))}),g&&e.jsx("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Define one team member role at a time. Mark every field as 'perfect' once it's complete, and Py will help refine any remaining areas."})]})]}),g&&m&&d.length>0&&e.jsxs(N,{onClick:Qe,variant:"outline",size:"sm",className:"flex items-center text-sm",title:"Copy all team members and their fields to clipboard (Admin only)",children:[e.jsx(Ze,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Copy All"})]})]}),g&&e.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 border-t border-slate-200/50 pt-4 sm:pt-6",children:e.jsxs("div",{className:"space-y-6",children:[C?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading your team members..."})]})}):e.jsx(e.Fragment,{children:F?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm text-slate-500",children:[e.jsxs("span",{children:["Team Member ",re+1," of ",d.length]}),e.jsx("span",{className:"font-medium text-primary-700",children:F.character_name&&F.character_name.trim().length>0?F.character_name:F.name||"Untitled Role"})]}),e.jsxs("div",{className:"mt-4 p-6 bg-white/50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:F.name||"Untitled Role"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ie(re),className:`p-2 rounded-lg transition-all ${F.is_muted?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-primary-50 text-primary-600 hover:bg-primary-100"}`,title:F.is_muted?"Include in operations":"Exclude from operations",children:F.is_muted?e.jsx(tt,{size:18}):e.jsx(Ot,{size:18})}),e.jsxs("span",{className:`text-sm px-3 py-1 rounded-full ${Object.values(F.perfect_fields||{}).filter(Boolean).length===is?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:[Object.values(F.perfect_fields||{}).filter(Boolean).length,"/",is," Perfect"]})]})]}),F.is_muted&&e.jsxs("div",{className:"mb-3 inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-full text-xs font-medium",children:[e.jsx(tt,{size:14}),"Excluded from operations"]}),F.character_name&&e.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",F.character_name]}),F.role&&e.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Role:"})," ",F.role]}),F.persona&&e.jsx("p",{className:"text-sm text-slate-700 mt-3 italic line-clamp-3",children:F.persona})]}),d.length>1&&e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{onClick:Ue,size:"sm",variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ns,{size:16}),"Previous"]}),e.jsxs(N,{onClick:Je,size:"sm",variant:"outline",className:"flex items-center gap-1",children:["Next",e.jsx(Ve,{size:16})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:d.map((x,f)=>{var b,q;const B=((b=x.character_name)==null?void 0:b.trim())||((q=x.name)==null?void 0:q.trim())||`Team Member ${f+1}`,i=f===re;return e.jsx("button",{onClick:()=>J(f),className:`px-3 py-1 rounded-full text-xs font-medium border transition-all ${i?"bg-primary-600 text-white border-primary-600 shadow":"border-primary-200 text-primary-700 hover:bg-primary-100"}`,"aria-label":`Switch to member ${B}`,children:B},x.id)})})]})]}):e.jsxs("div",{className:"border border-dashed border-primary-300/60 rounded-xl p-8 text-center bg-white/60",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"No team members yet"}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Draft your first team member profile or let Py suggest one tailored to your company's strategy."}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3",children:[e.jsxs(N,{onClick:Fe,variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(ds,{size:16,className:"mr-2"}),"Add Team Member"]}),e.jsxs(N,{onClick:je,loading:S,className:"w-full sm:w-auto",children:[e.jsx(Te,{size:16,className:"mr-2"}),"Draft with Py"]})]})]})}),!C&&e.jsxs(e.Fragment,{children:[((s==null?void 0:s.brand_type)||"organization")==="individual"&&d.length>=1?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Individual Brand:"})," You have your personal brand profile. To add more team members, switch to the ",e.jsx("strong",{children:"Organization"})," brand type in your Brand Profile settings."]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(N,{onClick:es,size:"lg",className:"w-full flex items-center justify-center gap-2 py-6 text-base",children:[e.jsx(Te,{size:20}),"Manage in Team Studio"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(N,{onClick:Fe,className:"w-full",variant:"outline",children:[e.jsx(ds,{size:16,className:"mr-2"}),d.length===0?"Add Team Member":"Add Another Team Member"]}),e.jsxs(N,{onClick:je,loading:S,className:"w-full",children:[e.jsx(Te,{size:16,className:"mr-2"}),d.length===0?"Draft First Team Member":"Suggest Next Team Member"]})]})]}),I&&!A&&e.jsxs(N,{onClick:v,loading:U,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(js,{size:16,className:"mr-2"}),U?"Training Andora...":"Characters Are Done"]}),A&&e.jsxs(N,{onClick:()=>ge("/dashboard/events"),className:"w-full bg-gradient-to-r from-primary-600 to-purple-600 hover:from-primary-700 hover:to-purple-700 animate-bounce",children:[e.jsx(ys,{size:16,className:"mr-2"}),"Continue to Events"]})]})]})})]}),F&&e.jsx(ar,{character:F,brandId:s.brand_id,isOpen:H,onClose:()=>{X(!1),o==null||o(!1)},onChange:x=>y(re,x),onSave:saveCharacter,onDelete:()=>{deleteCharacter(re),X(!1),o==null||o(!1)},onToggleMute:()=>toggleCharacterMute(re),onAIGenerate:()=>generateCharacterPersona(re),isGenerating:S,suggestions:p[F.id],onSuggestionApply:(x,f)=>Le(F.id,x,f),onFieldRefine:Ge,refiningField:(be=Y[F.id])!=null?be:null,characters:d,activeCharacterIndex:re,onCharacterChange:J,onPreviousCharacter:goToPreviousCharacter,onNextCharacter:goToNextCharacter,onAddCharacter:addCharacter,onSuggestCharacter:suggestNextCharacter,onAllDone:v,showAllDone:I&&!A,isTraining:U}),ye&&e.jsx(nr,{onComplete:oe})]})]})})},nn=Object.freeze(Object.defineProperty({__proto__:null,PersonnelStudioPage:pr},Symbol.toStringTag,{value:"Module"})),ur=({isOpen:s,onClose:n,selectedDate:a,event:c,brandId:h,userId:o,onSave:w,onDelete:k})=>{const[m,l]=r.useState({description:""});r.useEffect(()=>{c?l({description:c.description}):a&&l({description:""})},[c,a]);const d=u=>{if(u.preventDefault(),console.log("ðŸ“‹ EventModal handleSubmit called"),console.log("ðŸ“ Form data:",m),console.log("ðŸ“… Selected date:",a),console.log("ðŸ¢ Brand ID:",h),console.log("ðŸ‘¤ User ID:",o),m.description.trim()&&a){const S=W(M({},m),{title:m.description.split(`
`)[0]||"Event",event_date:a,brand_id:h,user_id:o});console.log("âœ… Calling onSave with:",S),w(S)}else console.warn("âš ï¸ Cannot save - missing description or date")},T=u=>{(u.ctrlKey||u.metaKey)&&u.key==="Enter"&&(u.preventDefault(),d(u))},p=u=>{if(!u)return"Select a date";const S=u.split("T")[0],t=new Date(S+"T12:00:00Z");return isNaN(t.getTime())?(console.warn("Invalid date:",u),"Invalid date"):t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})};return e.jsx(Ut,{isOpen:s,onClose:n,title:c?"Edit Entry":"New Entry",size:"md",children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-primary-50/50 p-3",children:[e.jsx(rs,{className:"h-5 w-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Date"}),e.jsx("p",{className:"text-sm font-medium text-primary-900",children:a?p(a):"Select a date"})]})]}),e.jsx(Pe,{label:"Notes",value:m.description,onChange:u=>l(S=>W(M({},S),{description:u.target.value})),onKeyDown:T,placeholder:"What's happening on this day? Add notes, reminders, or important details...",rows:8,maxLength:500,helperText:`${m.description.length}/500 â€¢ Press Ctrl/Cmd+Enter to save`,required:!0}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-0 pt-2",children:[c?e.jsxs(N,{type:"button",variant:"danger",onClick:k,size:"sm",className:"flex items-center gap-1 sm:gap-2 justify-center text-xs sm:text-sm",children:[e.jsx(Ms,{size:14,className:"sm:w-4 sm:h-4"}),"Delete"]}):e.jsx("div",{className:"hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 order-first sm:order-none",children:[e.jsx(N,{type:"button",variant:"ghost",onClick:n,size:"sm",className:"flex-1 sm:flex-initial text-xs sm:text-sm",children:"Cancel"}),e.jsxs(N,{type:"submit",className:"flex items-center gap-1 sm:gap-2 justify-center flex-1 sm:flex-initial text-xs sm:text-sm",size:"sm",children:[e.jsx($s,{size:14,className:"sm:w-4 sm:h-4"}),"Save"]})]})]})]})})},Ys=[{bg:"bg-blue-500/20",border:"border-blue-500/30",text:"text-blue-900",hover:"hover:bg-blue-500/30"},{bg:"bg-purple-500/20",border:"border-purple-500/30",text:"text-purple-900",hover:"hover:bg-purple-500/30"},{bg:"bg-pink-500/20",border:"border-pink-500/30",text:"text-pink-900",hover:"hover:bg-pink-500/30"},{bg:"bg-green-500/20",border:"border-green-500/30",text:"text-green-900",hover:"hover:bg-green-500/30"},{bg:"bg-yellow-500/20",border:"border-yellow-500/30",text:"text-yellow-900",hover:"hover:bg-yellow-500/30"},{bg:"bg-orange-500/20",border:"border-orange-500/30",text:"text-orange-900",hover:"hover:bg-orange-500/30"},{bg:"bg-red-500/20",border:"border-red-500/30",text:"text-red-900",hover:"hover:bg-red-500/30"},{bg:"bg-teal-500/20",border:"border-teal-500/30",text:"text-teal-900",hover:"hover:bg-teal-500/30"},{bg:"bg-indigo-500/20",border:"border-indigo-500/30",text:"text-indigo-900",hover:"hover:bg-indigo-500/30"},{bg:"bg-cyan-500/20",border:"border-cyan-500/30",text:"text-cyan-900",hover:"hover:bg-cyan-500/30"}],Rs=s=>{let n=0;for(let a=0;a<s.length;a++)n=(n<<5)-n+s.charCodeAt(a),n=n&n;return Ys[Math.abs(n)%Ys.length]},gr=({events:s,onDateClick:n,onEventClick:a,brandId:c,onSubplotSuggestionsReady:h})=>{console.log("ðŸ“… EventsCalendar rendered with events:",s),console.log("ðŸ“Š Total events count:",s.length),console.log("ðŸ“… Event dates:",s.map(O=>({title:O.title,date:O.event_date,dateType:typeof O.event_date})));const[o,w]=r.useState(new Date),[k,m]=r.useState(!1),[l,d]=r.useState(null);r.useState(!1),r.useState(!1),r.useState([]);const[T,p]=r.useState("calendar"),[u,S]=r.useState(!1),t=new Date(Date.UTC(o.getFullYear(),o.getMonth(),1)),U=new Date(Date.UTC(o.getFullYear(),o.getMonth()+1,0)),$=new Date(t);$.setUTCDate($.getUTCDate()-t.getUTCDay());const A=new Date(U);A.setUTCDate(A.getUTCDate()+(6-U.getUTCDay()));const E=[],C=new Date($);for(;C<=A;)E.push(new Date(C)),C.setUTCDate(C.getUTCDate()+1);const D=O=>{w(new Date(Date.UTC(o.getFullYear(),o.getMonth()+(O==="next"?1:-1),1)))},Y=O=>{const V=O.getUTCFullYear(),g=String(O.getUTCMonth()+1).padStart(2,"0"),Q=String(O.getUTCDate()).padStart(2,"0");return`${V}-${g}-${Q}`},ae=O=>{const V=Y(O),g=s.filter(Q=>{const te=Q.event_date?Q.event_date.split("T")[0]:"",ge=te===V;return Q.event_date&&Q.event_date.includes(V.split("-")[1])&&console.log(`ðŸ” Checking ${Q.title}: event.event_date="${Q.event_date}" â†’ extracted="${te}" vs dateString="${V}" â†’ ${ge?"âœ… MATCH":"âŒ NO MATCH"}`),ge});return g.length>0&&console.log(`ðŸ“† Found ${g.length} event(s) for ${V}:`,g),g},re=O=>O.getUTCMonth()===o.getMonth(),J=O=>{const V=new Date,g=new Date(Date.UTC(V.getFullYear(),V.getMonth(),V.getDate()));return Y(O)===Y(g)},H=["January","February","March","April","May","June","July","August","September","October","November","December"],X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ye=r.useMemo(()=>{const O=`${o.getUTCFullYear()}-${String(o.getUTCMonth()+1).padStart(2,"0")}`,V=s.filter(ge=>{var oe;return(oe=ge.event_date)==null?void 0:oe.startsWith(O)}),Q=new Date().toISOString().split("T")[0],te=s.filter(ge=>(ge.event_date||"").split("T")[0]>=Q).sort((ge,oe)=>(ge.event_date||"").localeCompare(oe.event_date||""));return{totalThisMonth:V.length,upcomingCount:te.length,nextEvent:te[0],colorDistribution:Ys.map((ge,oe)=>({color:ge,count:s.filter(Ne=>Math.abs(Rs(Ne.event_id)===ge?1:0)).length}))}},[s,o]),ke=r.useMemo(()=>{const O=`${o.getUTCFullYear()}-${String(o.getUTCMonth()+1).padStart(2,"0")}`;return s.filter(V=>{var g;return(g=V.event_date)==null?void 0:g.startsWith(O)}).sort((V,g)=>(V.event_date||"").localeCompare(g.event_date||""))},[s,o]);return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 glass-effect rounded-xl border border-primary-200/40 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D("prev"),className:"rounded-lg border border-slate-200 bg-white p-2 text-slate-600 transition hover:border-primary-300 hover:text-primary-600",children:e.jsx(ns,{size:18})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>S(!u),className:"min-w-[180px] rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-primary-900 transition hover:border-primary-300",children:[H[o.getMonth()]," ",o.getFullYear()]}),u&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-10 rounded-lg border border-slate-200 bg-white shadow-lg p-3 w-64",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:H.map((O,V)=>e.jsx("button",{onClick:()=>{w(new Date(Date.UTC(o.getFullYear(),V,1))),S(!1)},className:Xe("px-2 py-1 text-xs rounded transition",V===o.getMonth()?"bg-primary-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:O.slice(0,3)},O))}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:()=>w(new Date(Date.UTC(o.getFullYear()-1,o.getMonth(),1))),className:"px-3 py-1 text-xs bg-slate-100 rounded hover:bg-slate-200",children:o.getFullYear()-1}),e.jsx("span",{className:"text-sm font-semibold",children:o.getFullYear()}),e.jsx("button",{onClick:()=>w(new Date(Date.UTC(o.getFullYear()+1,o.getMonth(),1))),className:"px-3 py-1 text-xs bg-slate-100 rounded hover:bg-slate-200",children:o.getFullYear()+1})]})]})]}),e.jsx("button",{onClick:()=>D("next"),className:"rounded-lg border border-slate-200 bg-white p-2 text-slate-600 transition hover:border-primary-300 hover:text-primary-600",children:e.jsx(Ve,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-1 rounded-lg border border-slate-200 bg-white p-1",children:[e.jsxs("button",{onClick:()=>p("calendar"),className:Xe("flex items-center gap-2 px-3 py-1.5 rounded text-sm font-medium transition",T==="calendar"?"bg-primary-500 text-white":"text-slate-600 hover:bg-slate-100"),children:[e.jsx(rs,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]}),e.jsxs("button",{onClick:()=>p("daily"),className:Xe("flex items-center gap-2 px-3 py-1.5 rounded text-sm font-medium transition",T==="daily"?"bg-primary-500 text-white":"text-slate-600 hover:bg-slate-100"),children:[e.jsx(wa,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Daily"})]})]})]}),T==="calendar"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2 grid grid-cols-7 gap-1 text-center text-xs font-medium text-slate-500",children:X.map(O=>e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:O}),e.jsx("span",{className:"sm:hidden",children:O.slice(0,1)})]},O))}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:E.map((O,V)=>{const g=ae(O),Q=Y(O);return e.jsxs("div",{className:Xe("group relative min-h-[70px] sm:min-h-[90px] rounded-lg sm:rounded-2xl border border-transparent bg-white/70 p-1 sm:p-2 shadow-sm transition-all duration-200","hover:border-primary-400/40 hover:shadow-lg hover:shadow-primary-500/10",!re(O)&&"bg-slate-50 text-slate-400",J(O)&&"border-primary-500/40 bg-primary-500/10 shadow-primary-500/20"),onClick:()=>n(Q),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:Xe("flex h-5 w-5 sm:h-7 sm:w-7 items-center justify-center rounded-full text-[10px] sm:text-xs font-semibold transition",J(O)?"bg-primary-500 text-white shadow-primary-500/40 shadow-lg":"text-slate-500"),children:O.getUTCDate()}),g.length>0&&e.jsx("span",{className:"rounded-full bg-primary-500/10 px-1 sm:px-2 py-0.5 sm:py-1 text-[8px] sm:text-[10px] font-medium text-primary-600",children:g.length})]}),e.jsxs("div",{className:"mt-1 sm:mt-2 space-y-0.5 sm:space-y-1",children:[g.slice(0,2).map(te=>{const ge=Rs(te.event_id);return e.jsx("div",{className:Xe("rounded-md sm:rounded-xl border px-1 sm:px-2 py-0.5 sm:py-1 text-[9px] sm:text-xs font-medium transition","truncate bg-white/70",ge.bg,ge.border,ge.text,ge.hover),onClick:oe=>{oe.stopPropagation(),a(te)},title:te.title,children:te.title},te.event_id)}),g.length>2&&e.jsxs("button",{type:"button",className:"w-full rounded-md sm:rounded-xl bg-primary-500/10 px-1 sm:px-2 py-0.5 sm:py-1 text-[8px] sm:text-[11px] font-semibold text-primary-600 transition hover:bg-primary-500/20",onClick:te=>{te.stopPropagation(),d({date:Q,events:g}),m(!0)},children:["+",g.length-2]})]})]},V)})})]}),T==="daily"&&e.jsx("div",{className:"space-y-3",children:ke.length===0?e.jsxs("div",{className:"py-12 text-center text-slate-500",children:[e.jsx("p",{children:"No events this month"}),e.jsx("p",{className:"text-sm mt-1",children:"Click any date above to add an entry"})]}):ke.map(O=>{const V=Rs(O.event_id),g=O.event_date?new Date(O.event_date.split("T")[0]+"T12:00:00Z"):null;return e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-white/80 p-4 transition hover:border-primary-300 hover:shadow-sm cursor-pointer",onClick:()=>a(O),children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 shrink-0",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:g==null?void 0:g.getUTCDate()}),e.jsx("div",{className:"text-xs text-slate-500 uppercase",children:g==null?void 0:g.toLocaleDateString("en-US",{weekday:"short",timeZone:"UTC"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:Xe("w-2 h-2 rounded-full",V.bg.replace("/20",""))}),e.jsx("h3",{className:Xe("font-semibold text-sm",V.text),children:O.title})]}),O.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:O.description})]})]},O.event_id)})})]}),e.jsx("div",{className:"hidden lg:block w-64 shrink-0",children:e.jsx("div",{className:"sticky top-6 space-y-4",children:e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ka,{size:18,className:"text-primary-500"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Month Insights"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Events this month"}),e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:ye.totalThisMonth})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Upcoming events"}),e.jsx("div",{className:"text-lg font-semibold text-emerald-700",children:ye.upcomingCount})]}),ye.nextEvent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Next up"}),e.jsx("div",{className:"text-sm font-medium text-slate-700 line-clamp-2",children:ye.nextEvent.title}),e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:new Date(ye.nextEvent.event_date||"").toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"Event colors"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ys.map((O,V)=>e.jsx("div",{className:Xe("w-6 h-6 rounded-full",O.bg.replace("/20","")),title:`Color ${V+1}`},V))})]})]})]})})}),k&&l&&e.jsxs(Ut,{isOpen:k,onClose:()=>m(!1),title:`Events on ${new Date(l.date+"T12:00:00Z").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"})}`,size:"md",children:[e.jsx("div",{className:"space-y-2",children:l.events.map(O=>{const V=Rs(O.event_id);return e.jsxs("button",{onClick:()=>{m(!1),a(O)},className:Xe("w-full rounded-lg border px-3 py-2 text-left text-sm transition",V.bg,V.border,V.hover),children:[e.jsx("div",{className:Xe("font-medium",V.text),children:O.title}),O.description&&e.jsx("p",{className:"mt-1 text-xs text-slate-600 line-clamp-2",children:O.description})]},O.event_id)})}),e.jsx(N,{className:"mt-4 w-full",size:"sm",onClick:()=>{m(!1),n(l.date)},children:"Add Entry"})]})]})},$t="andora_events_onboarding_completed",fr=({events:s,brandId:n,userId:a,onEventAdd:c,onEventUpdate:h,onEventDelete:o})=>{const[w,k]=r.useState(null),[m,l]=r.useState(!1),[d,T]=r.useState(null),[p,u]=r.useState(!1),S=r.useMemo(()=>{const C=new Date,D=C.getMonth(),Y=C.getFullYear();return s.filter(ae=>{if(!ae.event_date)return!1;const re=new Date(ae.event_date);return re.getMonth()===D&&re.getFullYear()===Y}).length},[s]);r.useEffect(()=>{!localStorage.getItem($t)&&s.length===0&&setTimeout(()=>{u(!0)},300)},[s.length]);const t=C=>{k(C),T(null),l(!0),us()},U=C=>{T(C),k(C.event_date),l(!0),us()},$=C=>{console.log("ðŸ’¾ EventsPage handleEventSave called with:",C),console.log("ðŸ“ Editing existing event?",!!d),d?(console.log("âœï¸ Updating event:",d.event_id),h(d.event_id,C)):(console.log("âž• Adding new event"),c(C)),l(!1),T(null),k(null),us()},A=()=>{d&&(o(d.event_id),l(!1),T(null),k(null),us())},E=()=>{localStorage.setItem($t,"true"),u(!1),us()};return console.log("ðŸ—“ï¸ EventsPage rendered"),console.log("ðŸ“‹ Events prop received:",s),console.log("ðŸ“Š Events count:",s.length),e.jsxs(e.Fragment,{children:[p&&e.jsx(Pa,{onComplete:E}),e.jsxs("div",{className:"mx-auto max-w-6xl px-4 pb-10 pt-6 sm:px-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rs,{className:"h-6 w-6 text-primary-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900 sm:text-3xl",children:"Calendar & Journal"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:S>0?`${S} events this month`:"Track important dates and notes"})]})]}),e.jsxs(N,{onClick:()=>{k(new Date().toISOString().split("T")[0]),T(null),l(!0),us()},className:"inline-flex items-center gap-2",size:"sm",children:[e.jsx(Ps,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"New Entry"})]})]}),e.jsx(gr,{events:s,onDateClick:t,onEventClick:U,brandId:n}),e.jsx(ur,{isOpen:m,onClose:()=>{l(!1),us()},selectedDate:w,event:d,brandId:n,userId:a,onSave:$,onDelete:A})]})]})},ln=Object.freeze(Object.defineProperty({__proto__:null,EventsPage:fr},Symbol.toStringTag,{value:"Module"})),br=4,Vt=s=>({week:s,subplot:"",subplotPerfect:!1,custom_theme:""}),zt=s=>{const n={};for(let a=1;a<=br;a+=1)n[a]=Vt(a);return{month:s,theme:"",themePerfect:!1,themeNarrative:"",monthlyPlot:"",plotPerfect:!1,weekly:n}},Mt=s=>s?typeof s=="string"?{theme:s,narrative:""}:{theme:s.theme||"",narrative:s.explanation||s.description||""}:{theme:"",narrative:""},rt=(s,n)=>{if(n==="individual"){const a=!!(s.persona&&s.persona.trim()),c=!!(s.name&&s.name.trim());return a&&c}return s.perfect_fields?!!(s.perfect_fields.persona&&s.perfect_fields.name&&s.perfect_fields.role):!!s.isPerfect},yr=s=>{var o,w;const n=!!(s.vision&&s.mission&&s.persona&&s.buyer_profile&&s.products),a=((o=s.cast_management)==null?void 0:o.filter(k=>!k.is_muted))||[],c=a.length>0,h=a.every(k=>rt(k,s.brand_type));return s.brand_type==="individual"&&console.log("ðŸ” Season Prerequisites Debug (Individual Brand):",{brand_name:s.brand_name,brand_type:s.brand_type,hasCoreConfig:n,checks:{hasVision:!!s.vision,hasMission:!!s.mission,hasPersona:!!s.persona,hasBuyerProfile:!!s.buyer_profile,hasProducts:!!s.products},hasCast:c,totalCastCount:(w=s.cast_management)==null?void 0:w.length,unmutedCastCount:a.length,allCharactersPerfect:h,characterChecks:a.map(k=>({name:k.name,hasName:!!(k.name&&k.name.trim()),hasPersona:!!(k.persona&&k.persona.trim()),isPerfect:rt(k,s.brand_type),isMuted:k.is_muted})),finalResult:n&&c&&h}),n&&c&&h},jr=({brand:s,events:n,onBrandUpdate:a,onPageChange:c,preferredModel:h,canEdit:o=!0})=>{var de;const{isAdmin:w,authUser:k}=Ns(),[m,l]=r.useState(()=>{const j=new Date;return`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`}),[d,T]=r.useState(()=>{var pe,fe;const j=(pe=s.season_plans)==null?void 0:pe[m],_=zt(m),{theme:P,narrative:Z}=Mt((fe=s.monthly_themes)==null?void 0:fe[m]);if(!j)return W(M({},_),{theme:P||_.theme,themeNarrative:Z||_.themeNarrative});const se=W(M(M({},_),j),{weekly:M(M({},_.weekly),j.weekly)});return W(M({},se),{theme:se.theme||P,themeNarrative:se.themeNarrative||Z})}),[p,u]=r.useState(!1),[S,t]=r.useState(!1),[U,$]=r.useState(null),[A,E]=r.useState(null),[C,D]=r.useState(!1),[Y,ae]=r.useState(null),re=r.useRef(!1),J=r.useRef(0),H=r.useCallback((j,_)=>{const P=j.trim(),Z=_==null?void 0:_.trim();return P?Z?{theme:P,explanation:Z,description:Z}:P:""},[]),X=r.useRef(ct(j=>{console.log("ðŸ’¾ Saving season plan updates for",m),a({season_plans:W(M({},s.season_plans),{[m]:j}),monthly_themes:W(M({},s.monthly_themes),{[m]:H(j.theme,j.themeNarrative)})}),re.current=!1},1e3)).current,ye=r.useCallback(j=>{o&&(console.log("ðŸ’¾ Immediate save for",m),a({season_plans:W(M({},s.season_plans),{[m]:j}),monthly_themes:W(M({},s.monthly_themes),{[m]:H(j.theme,j.themeNarrative)})}))},[o,m,s.season_plans,s.monthly_themes,a,H]),ke=r.useMemo(()=>new Date(m+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"}),[m]);r.useEffect(()=>{var P,Z,se,pe,fe;if(!(Date.now()-J.current<2e3)){console.log("ðŸ“‚ðŸ“‚ðŸ“‚ LOADING CACHED DATA FROM DATABASE ðŸ“‚ðŸ“‚ðŸ“‚"),console.log("ðŸ” Month:",m);const He=(P=s.season_plans)==null?void 0:P[m],G=zt(m),{theme:Ee,narrative:Me}=Mt((Z=s.monthly_themes)==null?void 0:Z[m]),_e=He?W(M(M({},G),He),{weekly:M(M({},G.weekly),He.weekly)}):G,$e=W(M({},_e),{theme:_e.theme||Ee,themeNarrative:_e.themeNarrative||Me});(se=s.season_plans)!=null&&se[m]?(console.log("ðŸ’¾ Found existing plan in database:"),console.log("  - Theme:",((pe=_e.theme)==null?void 0:pe.substring(0,80))+"..."),console.log("  - Monthly Plot:",((fe=_e.monthlyPlot)==null?void 0:fe.substring(0,80))+"..."),console.log("  - Theme Perfect:",_e.themePerfect),console.log("  - Plot Perfect:",_e.plotPerfect),console.log('âš ï¸  This is OLD DATA - Click "Generate for Me" to use new multi-agent system!')):console.log("ðŸ†• No existing plan - starting fresh"),T($e)}},[s.season_plans,s.monthly_themes,m]),r.useEffect(()=>{if(!(p||S||U!==null))return;console.log("ðŸ”„ Starting auto-refresh polling (AI generation in progress)");const _=setInterval(()=>ne(void 0,null,function*(){try{const{apiClient:P}=yield it(()=>ne(void 0,null,function*(){const{apiClient:se}=yield import("./admin-B3cU-nTP.js").then(pe=>pe.d);return{apiClient:se}}),__vite__mapDeps([0,1,2,3])),Z=yield P.getBrand(s.brand_id);a(Z),console.log("âœ… Auto-refreshed brand data")}catch(P){console.error("âŒ Failed to auto-refresh brand data:",P)}}),3e3);return()=>{console.log("ðŸ›‘ Stopping auto-refresh polling"),clearInterval(_)}},[p,S,U,s.brand_id,a]);const O=r.useMemo(()=>{const[j,_]=m.split("-").map(Number),P=new Date(j,_-2,1),Z=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`,se=new Date(j,_,1),pe=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`;return{previous:n.filter(fe=>fe.event_date.startsWith(Z)),current:n.filter(fe=>fe.event_date.startsWith(m)),next:n.filter(fe=>fe.event_date.startsWith(pe)),all:n.filter(fe=>fe.event_date.startsWith(Z)||fe.event_date.startsWith(m)||fe.event_date.startsWith(pe))}},[n,m]),V=s.cast_management||[],g=r.useCallback((j,_=!1)=>{o&&(J.current=Date.now(),re.current=!0,T(P=>{const Z=W(M(M({},P),j),{weekly:j.weekly?M(M({},P.weekly),j.weekly):P.weekly});return _?ye(Z):X(Z),Z}))},[o,ye,X]),Q=r.useCallback((j,_)=>{o&&(console.log("ðŸ”„ Theme changing to:",j.substring(0,50)),J.current=Date.now(),re.current=!0,T(P=>{var pe;const Z=Object.keys(P.weekly).reduce((fe,He)=>{const G=Number(He);return fe[G]=W(M({},P.weekly[G]),{subplotPerfect:!1}),fe},{}),se=W(M({},P),{theme:j,themePerfect:!1,themeNarrative:((pe=_==null?void 0:_.explanation)==null?void 0:pe.trim())||"",monthlyPlot:"",plotPerfect:!1,weekly:Z});return X(se),se}))},[o,X]),te=r.useCallback(()=>{o&&(J.current=Date.now(),re.current=!0,T(j=>{const _=W(M({},j),{themePerfect:!j.themePerfect});return ye(_),_}))},[o,ye]),ge=r.useCallback(()=>{o&&(J.current=Date.now(),re.current=!0,T(j=>{const _=W(M({},j),{plotPerfect:!j.plotPerfect});return ye(_),_}))},[o,ye]),oe=r.useCallback((j,_,P=!1)=>{o&&(J.current=Date.now(),re.current=!0,T(Z=>{var fe;const se=W(M(M({},Z.weekly[j]),_),{subplotPerfect:_.subplotPerfect!==void 0?_.subplotPerfect:((fe=Z.weekly[j])==null?void 0:fe.subplotPerfect)||!1}),pe=W(M({},Z),{weekly:W(M({},Z.weekly),{[j]:se})});return P?ye(pe):X(pe),pe}))},[o,ye,X]),Ne=()=>ne(void 0,null,function*(){var j,_,P,Z,se,pe,fe,He,G,Ee,Me,_e,$e,Be,De,We,Oe,Ke,Qe,Fe,es,Ue,Je;if(o){u(!0),E(null);try{const Le=d.theme,{theme:Ge,explanation:y,weeks:ce}=yield as.generateTheme(s,m,O.all,h||(k==null?void 0:k.preferred_ai_model)||"gemini-2.5-flash",Le),ie=y||"";let je="";const v={};if(ce&&Object.keys(ce).length>0)console.log("âœ… Using pre-parsed weeks from backend:",Object.keys(ce)),je=((j=ie.split(/\n\n+/)[0])==null?void 0:j.trim())||""||`This month focuses on ${Ge.toLowerCase()}. The narrative arc spans four weeks, building from initial engagement through rising action to climax and resolution.`,Object.entries(ce).forEach(([F,z])=>{const ee=parseInt(F,10);if(ee>=1&&ee<=4&&z){const K=z.match(/^WEEK\s+\d+\s+-\s+([^:]+):/i),me=K?K[1].trim():`Week ${ee}`;v[ee]={theme:me,subplot:z.trim()}}}),console.log("ðŸ“¦ Extracted weekly data:",Object.keys(v).map(F=>`Week ${F}: ${v[parseInt(F)].theme}`));else if(console.log("âš ï¸ No pre-parsed weeks from backend, falling back to text parsing"),/\*\*WEEK\s+(\d+)\s+-\s+([^(]+)\s*\([^)]+\)\s*:\*\*/gi.test(ie)){console.log("ðŸ“– Detected inline week format with **WEEK N - TITLE**"),console.log("ðŸ“„ Full text length:",ie.length),je=((_=ie.split(/\*\*WEEK\s+\d+/i)[0])==null?void 0:_.trim())||"",je=((P=je.split(/\*\*Visual|Visual & Tonal|Content Sparks/i)[0])==null?void 0:P.trim())||je,console.log("ðŸ“ Monthly plot extracted:",je.substring(0,100)+"...");const ee=[...ie.matchAll(/\*\*WEEK\s+(\d+)\s+-\s+([^(]+?)\s*\(([^)]+)\)\s*:\*\*\s*((?:(?!\*\*WEEK|\*\*Visual|\*\*Content Sparks)[\s\S])*)/gi)];console.log(`ðŸ” Found ${ee.length} week matches`),ee.forEach((K,me)=>{const[we,ve,be,x,f]=K,B=parseInt(ve,10);console.log(`
ðŸ“Œ Week ${B}:`),console.log("  Title:",be.trim()),console.log("  Stage:",x.trim()),console.log("  Content preview:",f.trim().substring(0,100)+"..."),console.log("  Content length:",f.trim().length),B>=1&&B<=4&&(v[B]={theme:be.trim(),subplot:f.trim()})}),console.log(`
âœ… Final weekly data:`,Object.keys(v).map(K=>`Week ${K}: ${v[parseInt(K)].theme}`))}else{console.log("ðŸ“– Detected paragraph week format with (Week N)");const z=ie.split(/\n\n+/).filter(K=>K.trim()),ee=[];z.forEach(K=>{/\(Week\s+\d+\)/i.test(K)?ee.push(K):!je&&!K.match(/VISUAL CONTENT|visual content/i)&&(je=K.trim())}),ee.forEach(K=>{if(K&&!K.match(/VISUAL CONTENT|visual content/i)){const me=K.match(/^([A-Z\s]+)\s*\((?:Week\s+)?(\d+)\)\s*:\s*([\s\S]+)$/i);if(me){const[,we,ve,be]=me,x=parseInt(ve,10);x>=1&&x<=4&&(v[x]={theme:we.trim(),subplot:be.trim()})}else{const we=K.match(/Week\s+(\d+)/i);if(we){const ve=parseInt(we[1],10);if(ve>=1&&ve<=4){const be=K.indexOf(":"),x=K.substring(0,be>-1?be:50).replace(/Week\s+\d+/i,"").trim(),f=be>-1?K.substring(be+1).trim():K;v[ve]={theme:x||`Week ${ve}`,subplot:f}}}}}})}je||(je=`This month focuses on ${Ge.toLowerCase()}. The narrative arc spans four weeks, building from initial engagement through rising action to climax and resolution.`),console.log(`
ðŸ’¾ Saving to state:`),console.log("Theme:",Ge),console.log("Monthly Plot:",je.substring(0,100)+"..."),console.log("Week 1:",{theme:((Z=v[1])==null?void 0:Z.theme)||"(empty)",subplotLength:((pe=(se=v[1])==null?void 0:se.subplot)==null?void 0:pe.length)||0}),console.log("Week 2:",{theme:((fe=v[2])==null?void 0:fe.theme)||"(empty)",subplotLength:((G=(He=v[2])==null?void 0:He.subplot)==null?void 0:G.length)||0}),console.log("Week 3:",{theme:((Ee=v[3])==null?void 0:Ee.theme)||"(empty)",subplotLength:((_e=(Me=v[3])==null?void 0:Me.subplot)==null?void 0:_e.length)||0}),console.log("Week 4:",{theme:(($e=v[4])==null?void 0:$e.theme)||"(empty)",subplotLength:((De=(Be=v[4])==null?void 0:Be.subplot)==null?void 0:De.length)||0}),g({theme:Ge,themePerfect:!1,themeNarrative:y||"",monthlyPlot:je,plotPerfect:!1,weekly:{1:{week:1,custom_theme:((We=v[1])==null?void 0:We.theme)||"",subplot:((Oe=v[1])==null?void 0:Oe.subplot)||"",subplotPerfect:!1},2:{week:2,custom_theme:((Ke=v[2])==null?void 0:Ke.theme)||"",subplot:((Qe=v[2])==null?void 0:Qe.subplot)||"",subplotPerfect:!1},3:{week:3,custom_theme:((Fe=v[3])==null?void 0:Fe.theme)||"",subplot:((es=v[3])==null?void 0:es.subplot)||"",subplotPerfect:!1},4:{week:4,custom_theme:((Ue=v[4])==null?void 0:Ue.theme)||"",subplot:((Je=v[4])==null?void 0:Je.subplot)||"",subplotPerfect:!1}}},!0),console.log("âœ… State update triggered"),ae({theme:Ge,monthlyPlot:je,fullResponse:y||"",weeks:v}),D(!0)}catch(Le){console.error("Error generating theme:",Le),E("Unable to generate a theme. Please try again.")}finally{u(!1)}}}),Ce=()=>ne(void 0,null,function*(){if(!(!d.theme||!o)){t(!0),E(null);try{const{plot:j,fullPreview:_,weeks:P}=yield as.generateMonthlyPlot(s,m,d.theme,O.all,V,h||(k==null?void 0:k.preferred_ai_model)||"gemini-2.5-flash");g({monthlyPlot:(j==null?void 0:j.trim())||"",plotPerfect:!1}),console.log("ðŸ“… Weeks data received:",P),P?(console.log("ðŸ“… Processing weeks..."),Object.entries(P).forEach(([Z,se])=>{if(console.log(`ðŸ“… Week ${Z}:`,{hasContent:!!se,length:(se==null?void 0:se.length)||0,preview:se==null?void 0:se.substring(0,50)}),se&&se.trim()){const pe=Number(Z);console.log(`âœ… Updating week ${pe} with content`),oe(pe,{subplot:se.trim(),subplotPerfect:!1})}})):console.warn("âš ï¸ No weeks data in response"),_&&(ae({theme:d.theme,monthlyPlot:(j==null?void 0:j.trim())||"",fullResponse:_}),D(!0))}catch(j){console.error("Error generating plot:",j),E("Unable to generate a monthly plot. Adjust the theme or try again.")}finally{t(!1)}}}),xe=j=>ne(void 0,null,function*(){if(!o)return;const _=d.weekly[j];if(!(!d.theme||!d.monthlyPlot)){$(j),E(null);try{const P=j>1?d.weekly[j-1]:void 0,{subplot:Z,weekTheme:se}=yield as.generateWeeklySubplot(s,m,j,d.theme,d.monthlyPlot||"",O.all,P==null?void 0:P.subplot,_.custom_theme||"",V,void 0),pe={subplot:Z};se&&!_.custom_theme&&(pe.custom_theme=se),oe(j,pe)}catch(P){console.error("Error generating subplot:",P),E(`Unable to generate Week ${j}. Try adjusting the weekly focus.`)}finally{$(null)}}}),Se=()=>ne(void 0,null,function*(){if(!w){E("This feature is only available for admin accounts"),setTimeout(()=>E(null),3e3);return}let j=`=== SEASON PLAN - ${ke} ===

`;j+=`MONTHLY THEME:
${d.theme||"(not set)"}

`,d.themeNarrative&&(j+=`THEME NARRATIVE:
${d.themeNarrative}

`),j+=`MONTHLY PLOT:
${d.monthlyPlot||"(not set)"}

`,j+=`${"=".repeat(60)}
WEEKLY SUBPLOTS
${"=".repeat(60)}

`,[1,2,3,4].forEach(_=>{const P=d.weekly[_];P&&(j+=`WEEK ${_}${P.custom_theme?` - ${P.custom_theme}`:""}
`,j+=`Status: ${P.subplotPerfect?"Perfect âœ“":"In Progress"}
`,j+=`${"â”€".repeat(40)}
`,j+=`${P.subplot||"(not set)"}

`)}),j+=`
Generated by Py Season Planning - ${new Date().toLocaleString()}`;try{yield navigator.clipboard.writeText(j),E("âœ¨ Season plan copied to clipboard!"),setTimeout(()=>E(null),3e3)}catch(_){console.error("Failed to copy:",_),E("Failed to copy to clipboard"),setTimeout(()=>E(null),3e3)}});if(!yr(s)){const j=!!(s.vision&&s.mission&&s.persona&&s.buyer_profile&&s.products),_=((de=s.cast_management)==null?void 0:de.filter(se=>!se.is_muted))||[],P=_.length>0,Z=_.every(se=>rt(se,s.brand_type));return e.jsx("div",{className:"max-w-3xl mx-auto p-6 sm:p-10",children:e.jsx("div",{className:"rounded-2xl border border-accent-500/40 bg-accent-500/10 p-6 sm:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-5",children:[e.jsx(qe,{size:"lg",className:"shadow-xl ring-2 ring-accent-500/50"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-accent-300 font-semibold",children:"Season planning locked"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-primary-900 mt-1",children:"Let me gather the strategic context first"}),e.jsx("p",{className:"text-sm text-primary-900/80 mt-3 leading-relaxed",children:"I need your complete company foundation before we can build seasonal strategies. Here's what's needed:"}),e.jsxs("ul",{className:"text-sm text-primary-900/80 mt-3 space-y-2 list-disc list-inside",children:[!j&&e.jsxs("li",{children:["Complete your ",e.jsx("strong",{children:"Company Profile"})," (vision, mission, persona, buyer profile, and products)"]}),!P&&e.jsxs("li",{children:["Create at least one ",e.jsx("strong",{children:"Team Member"})," in your Personnel Studio"]}),P&&!Z&&e.jsxs("li",{children:["Mark all ",e.jsx("strong",{children:"unmuted team members as perfect"})," in the Personnel Studio (ensure name, role, and persona are complete). Muted members are excluded from this check."]})]})]})]})})})}const Ae=d.themePerfect&&d.plotPerfect&&[1,2,3,4].every(j=>{var _,P;return((_=d.weekly[j])==null?void 0:_.subplotPerfect)&&((P=d.weekly[j])==null?void 0:P.subplot)}),Ie=()=>p?"Crafting your monthly theme...":S?"Writing your monthly plot with character context...":U?`Generating week ${U} subplot...`:"",R=p||S||U!==null;return e.jsx("div",{className:"relative min-w-0 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 lg:py-8 space-y-6 sm:space-y-8 lg:space-y-10",children:[e.jsx(dt,{show:R,message:Ie()}),e.jsxs("section",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl border border-primary-500/20 bg-gradient-to-br from-primary-600 via-purple-600 to-slate-900 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-screen bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),transparent_65%)]","aria-hidden":!0}),e.jsx("div",{className:"relative z-10 flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-center lg:justify-between p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"space-y-3 sm:space-y-5 max-w-2xl min-w-0",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:[e.jsx(As,{className:"w-4 h-4"}),"Season planning"]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-semibold leading-tight break-words",children:"Architect the narrative arc"}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-white/80 leading-relaxed",children:"Shape monthly themes and weekly subplots that turn your brand story into structured, engaging content journeys."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm text-white/80",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(Te,{className:"w-3.5 h-3.5"}),"Strategic storytelling"]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx(rs,{className:"w-3.5 h-3.5"}),ke]}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1",children:[e.jsx($s,{className:"w-3.5 h-3.5"}),"Autosaved"]})]})]})})]}),!o&&e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-orange-200 bg-orange-50/50 p-3 sm:p-4 flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(Es,{size:18,className:"text-orange-600 shrink-0 sm:w-5 sm:h-5"}),e.jsx("p",{className:"text-xs sm:text-sm text-orange-900 break-words",children:"You currently have view-only access. Ask your workspace admin to grant editing rights to adjust the season plan."})]}),A&&e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-accent-500/30 bg-accent-500/10 p-3 sm:p-4 flex items-start gap-2 sm:gap-3 min-w-0",children:[e.jsx(qe,{size:"sm",className:"shadow-lg ring-2 ring-accent-500/40 shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-accent-600 font-semibold mb-1",children:"Py heads-up"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed break-words",children:A})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8 min-w-0",children:[e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/80 bg-white/80 backdrop-blur-sm shadow-sm p-3 sm:p-4 lg:p-6 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3 sm:mb-4 min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-semibold text-slate-900 truncate",children:"Select Planning Month"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[w&&e.jsxs(N,{onClick:Se,variant:"outline",size:"sm",className:"flex items-center text-sm",title:"Copy entire season plan to clipboard (Admin only)",children:[e.jsx(Ze,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Copy All"})]}),e.jsx(rs,{size:20,className:"text-primary-600"}),e.jsx("input",{type:"month",value:m,onChange:j=>l(j.target.value),className:"px-3 py-2 rounded-lg border border-slate-200 bg-white text-slate-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/80 bg-white/80 backdrop-blur-sm shadow-sm p-3 sm:p-4 lg:p-6 space-y-3 sm:space-y-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-primary-900",children:["Monthly Theme: ",ke]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Define the overarching theme and messaging strategy. I'll use this everywhere."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d.themeNarrative&&e.jsxs(N,{onClick:()=>{const j={};[1,2,3,4].forEach(_=>{const P=d.weekly[_];P&&P.subplot&&(j[_]={theme:P.custom_theme||"",subplot:P.subplot})}),ae({theme:d.theme,monthlyPlot:d.monthlyPlot||"",fullResponse:d.themeNarrative,weeks:Object.keys(j).length>0?j:void 0}),D(!0)},variant:"outline",size:"sm",className:"flex items-center text-sm",children:[e.jsx(Ft,{size:16,className:"mr-2"}),"View Preview"]}),e.jsxs(N,{onClick:Ne,loading:p,className:"flex items-center text-sm",size:"sm",disabled:!o,children:[e.jsx(ts,{size:16,className:"mr-2"}),"Generate for Me"]}),e.jsxs(N,{variant:d.themePerfect?"default":"outline",onClick:te,size:"sm",className:"flex items-center",disabled:!o,children:[e.jsx(Es,{size:16,className:"mr-2"}),d.themePerfect?"Marked Perfect":"Mark as Perfect"]})]})]}),e.jsx(Pe,{value:d.theme,onChange:j=>Q(j.target.value),placeholder:"Define the overarching theme and messaging strategy for this month...",rows:6,disabled:!o}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("span",{className:"text-xs text-slate-500",children:"Auto-saves as you type"})})]}),d.theme&&e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/80 bg-white/80 backdrop-blur-sm shadow-sm p-3 sm:p-4 lg:p-6 space-y-3 sm:space-y-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-primary-900",children:"Monthly Plot"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Transform your theme into a narrative arc that unlocks the weekly subplots."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(N,{onClick:Ce,loading:S,className:"flex items-center text-sm",size:"sm",disabled:!o,children:[e.jsx(ts,{size:16,className:"mr-2"}),"Generate for Me"]}),e.jsxs(N,{variant:d.plotPerfect?"default":"outline",onClick:ge,size:"sm",className:"flex items-center",disabled:!o,children:[e.jsx(Es,{size:16,className:"mr-2"}),d.plotPerfect?"Marked Perfect":"Mark as Perfect"]})]})]}),e.jsx(Pe,{value:d.monthlyPlot||"",onChange:j=>g({monthlyPlot:j.target.value,plotPerfect:!1}),placeholder:"Describe the suspenseful monthly overview I'll use to craft each week.",rows:5,disabled:!o}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx("span",{className:"text-xs text-slate-500",children:"Auto-saves as you type"})})]}),d.monthlyPlot&&e.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-200/80 bg-white/80 backdrop-blur-sm shadow-sm p-3 sm:p-4 lg:p-6 space-y-3 sm:space-y-4 min-w-0",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-slate-900",children:"Weekly Subplots"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Unlock each week sequentially. Mark a week as perfect to progress to the next."}),e.jsx("div",{className:"space-y-6",children:[1,2,3,4].map(j=>{var pe;const _=d.weekly[j]||Vt(j),Z=!(j===1?d.plotPerfect:(pe=d.weekly[j-1])==null?void 0:pe.subplotPerfect),se=U===j;return e.jsxs("div",{className:`border rounded-xl p-4 transition-all ${Z?"opacity-70 pointer-events-none border-slate-200 bg-slate-50/50":"border-slate-200 bg-white"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-primary-900",children:["Week ",j]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Focus the story for this week and I'll generate the rest for you."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{size:"sm",onClick:()=>xe(j),loading:se,className:"flex items-center text-xs",disabled:!o||Z,children:[e.jsx(ts,{size:14,className:"mr-1"}),"Generate for Me"]}),e.jsxs(N,{variant:_.subplotPerfect?"default":"outline",size:"sm",onClick:()=>oe(j,{subplotPerfect:!_.subplotPerfect},!0),className:"flex items-center text-xs",disabled:!o||Z,children:[e.jsx(Es,{size:14,className:"mr-1"}),_.subplotPerfect?"Perfect":"Mark Perfect"]})]})]}),e.jsx(ss,{label:"Theme for the Week (optional)",value:_.custom_theme||"",onChange:fe=>oe(j,{custom_theme:fe.target.value}),placeholder:"e.g. Customer wins with product-led innovation",disabled:!o||Z}),e.jsx(Pe,{label:"Weekly Subplot",value:_.subplot||"",onChange:fe=>oe(j,{subplot:fe.target.value}),placeholder:`Describe the story beat for week ${j}.`,rows:4,className:"mt-3",disabled:!o||Z})]},j)})})]}),Ae&&e.jsx("div",{className:"rounded-2xl border border-green-500/30 bg-green-500/10 p-6 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(st,{className:"w-8 h-8 text-green-400"})})}),e.jsx("h3",{className:"text-xl font-semibold text-green-300 mb-2",children:"Season Planning Complete! ðŸŽ‰"}),e.jsx("p",{className:"text-green-200 mb-6",children:"Your monthly theme, plot, and weekly subplots are ready. Time to create your detailed content calendar!"}),c&&e.jsx(N,{onClick:()=>c("monthly"),size:"lg",className:"bg-green-600 hover:bg-green-500",children:"Go to Content Calendar â†’"})]})}),C&&Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"rounded-2xl border border-primary-200 bg-white max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary-600 via-purple-600 to-slate-900 text-white p-6 flex items-start gap-4",children:[e.jsx(qe,{size:"lg",className:"ring-2 ring-white/30 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"Here's the month's scripting"}),e.jsxs("p",{className:"text-sm text-white/80 leading-relaxed",children:[Y.monthlyPlot.substring(0,150),"..."]})]}),e.jsx("button",{onClick:()=>D(!1),className:"text-white/80 hover:text-white transition p-1","aria-label":"Close preview",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-white",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 mb-2",children:"Monthly Theme"}),e.jsx("p",{className:"text-lg font-semibold text-primary-900",children:Y.theme})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 mb-2",children:"Monthly Plot"}),e.jsx("p",{className:"text-base text-slate-700 leading-relaxed",children:Y.monthlyPlot})]}),Y.weeks&&Object.keys(Y.weeks).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 mb-3",children:"Weekly Subplots"}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(j=>{var P;const _=(P=Y.weeks)==null?void 0:P[j];return!_||!_.subplot?null:e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[e.jsxs("h5",{className:"text-sm font-semibold text-primary-900 mb-2",children:["Week ",j,_.theme?`: ${_.theme}`:""]}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap",children:_.subplot})]},j)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 mb-3",children:"Full Narrative Breakdown"}),e.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 whitespace-pre-wrap bg-slate-50 rounded-lg p-4 border border-slate-200",children:Y.fullResponse})]})]}),e.jsxs("div",{className:"border-t border-slate-200 p-4 bg-slate-50 flex items-center justify-between gap-3",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>D(!1),children:"Close"}),e.jsxs(N,{size:"sm",onClick:()=>ne(void 0,null,function*(){try{let j="";Y.weeks&&Object.keys(Y.weeks).length>0&&(j=`

WEEKLY SUBPLOTS:
`,[1,2,3,4].forEach(_=>{var Z;const P=(Z=Y.weeks)==null?void 0:Z[_];P&&P.subplot&&(j+=`
WEEK ${_}${P.theme?` - ${P.theme}`:""}:
${P.subplot}
`)})),yield navigator.clipboard.writeText(`MONTHLY THEME: ${Y.theme}

MONTHLY PLOT:
${Y.monthlyPlot}`+j+`

FULL BREAKDOWN:
${Y.fullResponse}`),E("âœ¨ Copied to clipboard!"),setTimeout(()=>E(null),3e3)}catch(j){console.error("Failed to copy:",j),E("Failed to copy to clipboard")}}),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]})]})]})})]})]})})},on=Object.freeze(Object.defineProperty({__proto__:null,SeasonPage:jr},Symbol.toStringTag,{value:"Module"})),vr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Nr={LinkedIn:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300/60",hover:"hover:bg-blue-200"},Instagram:{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300/60",hover:"hover:bg-pink-200"},X:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300/60",hover:"hover:bg-cyan-200"},Facebook:{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300/60",hover:"hover:bg-indigo-200"},TikTok:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300/60",hover:"hover:bg-purple-200"},YouTube:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300/60",hover:"hover:bg-red-200"},Blog:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300/60",hover:"hover:bg-green-200"},Email:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300/60",hover:"hover:bg-amber-200"}},wr=s=>Nr[s]||{bg:"bg-slate-100",text:"text-slate-700",border:"border-slate-300/60",hover:"hover:bg-slate-200"},kr=({month:s,calendar:n,events:a,brand:c,onContentClick:h,onGenerateDate:o,canEdit:w,isGenerating:k=!1,glowingItems:m=new Set,generatingDate:l=null})=>{const[d,T]=s.split("-").map(Number),p=new Date(d,T-1,1),S=new Date(d,T,0).getDate(),t=p.getDay(),U=[];for(let C=0;C<t;C++)U.push({date:"",day:0,isCurrentMonth:!1});for(let C=1;C<=S;C++){const D=`${d}-${String(T).padStart(2,"0")}-${String(C).padStart(2,"0")}`;U.push({date:D,day:C,isCurrentMonth:!0})}const $=C=>n?n.items.filter(D=>D.date===C):[],A=C=>a.filter(D=>D.event_date===C),E=C=>{const D=new Date().toISOString().split("T")[0];return C===D};return e.jsxs("div",{className:"glass-effect rounded-xl border border-primary-500/20 overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-primary-500/5 border-b border-primary-500/20",children:vr.map(C=>e.jsxs("div",{className:"p-1.5 sm:p-2 md:p-3 text-center text-[10px] sm:text-xs md:text-sm font-semibold text-primary-600",children:[e.jsx("span",{className:"hidden sm:inline",children:C}),e.jsx("span",{className:"sm:hidden",children:C.slice(0,1)})]},C))}),e.jsx("div",{className:"grid grid-cols-7 divide-x divide-y divide-primary-500/10",children:U.map((C,D)=>{if(!C.isCurrentMonth)return e.jsx("div",{className:"h-32 bg-slate-50"},D);const Y=$(C.date),ae=A(C.date),re=E(C.date);return e.jsxs("div",{className:Xe("min-h-[80px] sm:min-h-[100px] md:h-32 p-1 sm:p-1.5 md:p-2 flex flex-col bg-white hover:bg-primary-50/30 transition-colors",re&&"bg-primary-100/20 ring-2 ring-primary-400/40 ring-inset"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5 sm:mb-1",children:[e.jsx("span",{className:Xe("text-xs sm:text-sm font-semibold",re?"text-primary-600":"text-slate-600"),children:C.day}),Y.length===0&&w&&e.jsx("button",{onClick:()=>o(C.date),disabled:k,className:Xe("p-0.5 sm:p-1 rounded transition-colors",k&&l===C.date?"text-blue-600 bg-blue-50":"hover:bg-primary-500/10 text-primary-500",k&&"cursor-not-allowed opacity-50"),title:"Generate content",children:k&&l===C.date?e.jsx(Hs,{size:12,className:"animate-spin sm:w-3.5 sm:h-3.5"}):e.jsx(Te,{size:12,className:"sm:w-3.5 sm:h-3.5"})})]}),ae.length>0&&e.jsxs("div",{className:"mb-0.5 sm:mb-1",children:[ae.slice(0,1).map(J=>e.jsxs("div",{className:"text-[9px] sm:text-xs px-1 sm:px-2 py-0.5 bg-amber-100 text-amber-700 rounded truncate border border-amber-300/40",title:J.title,children:[e.jsx("span",{className:"hidden sm:inline",children:"ðŸ“… "}),J.title]},J.event_id)),ae.length>1&&e.jsxs("div",{className:"text-[8px] sm:text-xs text-slate-500 mt-0.5 px-1",children:["+",ae.length-1]})]}),e.jsxs("div",{className:"flex-1 space-y-0.5 sm:space-y-1 overflow-y-auto",children:[Y.slice(0,3).map(J=>{const H=wr(J.channel),X=m.has(`${J.date}-${J.channel}`);return e.jsx("button",{onClick:()=>h(J),className:Xe("w-full text-left text-[9px] sm:text-xs px-1 sm:px-2 py-0.5 sm:py-1 rounded border transition-all relative",J.is_perfect?"bg-green-100 border-green-400/60 text-green-700 hover:bg-green-200 ring-1 ring-green-400/40":`${H.bg} ${H.border} ${H.text} ${H.hover}`,X&&"animate-magical-glow"),children:e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 truncate",children:[J.is_perfect&&e.jsx(lt,{size:8,className:"fill-current flex-shrink-0 sm:w-2.5 sm:h-2.5"}),e.jsxs("span",{className:"truncate font-medium",children:[J.channel,J.character_focus&&e.jsxs("span",{className:"text-[8px] sm:text-[10px] opacity-70",children:[" (",J.character_focus,")"]})]}),X&&e.jsx(Te,{size:8,className:"text-primary-500 animate-pulse flex-shrink-0 sm:w-2.5 sm:h-2.5"})]})},J.id)}),Y.length>3&&e.jsxs("button",{onClick:()=>h(Y[3]),className:"text-[9px] sm:text-xs text-slate-600 hover:text-slate-900 hover:bg-slate-100 px-1 sm:px-2 py-0.5 sm:py-1 rounded transition-colors w-full text-left font-medium",children:["+",Y.length-3]})]})]},D)})})]})},_r={awe:{emoji:"âœ¨",color:"bg-purple-100 text-purple-700 border-purple-200"},inspired:{emoji:"ðŸ’¡",color:"bg-amber-100 text-amber-700 border-amber-200"},touched:{emoji:"ðŸ’–",color:"bg-pink-100 text-pink-700 border-pink-200"},laughter:{emoji:"ðŸ˜„",color:"bg-yellow-100 text-yellow-700 border-yellow-200"},provoked:{emoji:"ðŸ”¥",color:"bg-orange-100 text-orange-700 border-orange-200"},excited:{emoji:"ðŸš€",color:"bg-blue-100 text-blue-700 border-blue-200"},confident:{emoji:"ðŸ’ª",color:"bg-green-100 text-green-700 border-green-200"},reassured:{emoji:"ðŸ¤",color:"bg-teal-100 text-teal-700 border-teal-200"},confused:{emoji:"ðŸ˜•",color:"bg-gray-100 text-gray-600 border-gray-200"},disconnected:{emoji:"ðŸ”Œ",color:"bg-slate-100 text-slate-600 border-slate-200"},bored:{emoji:"ðŸ˜",color:"bg-stone-100 text-stone-600 border-stone-200"},agitated:{emoji:"ðŸ˜¤",color:"bg-red-100 text-red-600 border-red-200"},skeptical:{emoji:"ðŸ¤¨",color:"bg-zinc-100 text-zinc-600 border-zinc-200"},indifferent:{emoji:"ðŸ˜¶",color:"bg-neutral-100 text-neutral-600 border-neutral-200"},overwhelmed:{emoji:"ðŸ˜µ",color:"bg-violet-100 text-violet-600 border-violet-200"}},qt=({isOpen:s,onClose:n,expandedBrief:a,observerFeedback:c,onSendToDraft:h,onSave:o})=>{const[w,k]=r.useState(a),[m,l]=r.useState(!1),[d,T]=r.useState(!1),[p,u]=r.useState(!1),[S,t]=r.useState(!1);if(r.useEffect(()=>{k(a),t(!1),u(!1)},[a]),r.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const U=()=>ne(void 0,null,function*(){try{yield navigator.clipboard.writeText(w),l(!0),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Failed to copy:",C)}}),$=()=>{h&&(h(w),n())},A=()=>ne(void 0,null,function*(){if(!o){n();return}try{T(!0),yield o(w),t(!1),u(!0),setTimeout(()=>u(!1),2e3)}catch(C){console.error("Failed to save expanded brief:",C),alert("Failed to save expanded brief. Please try again.")}finally{T(!1)}}),E=C=>C>=8?"text-green-600 bg-green-50":C>=6?"text-amber-600 bg-amber-50":"text-red-600 bg-red-50";return e.jsxs("div",{className:"fixed inset-0 z-[60] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),e.jsx("div",{className:"relative h-full overflow-y-auto flex items-center justify-center p-3 sm:p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-slate-200 z-10 px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900",children:"Expanded Story Brief"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:"Full creative direction for this content piece"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 sm:flex-initial",children:[o&&e.jsx(N,{size:"sm",onClick:A,disabled:d||!S,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:d?"Saving...":p?e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:12,className:"text-green-600 sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Saved"})]}):"Save"}),e.jsx(N,{variant:"outline",size:"sm",onClick:U,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:m?e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:12,className:"text-green-600 sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:12,className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Copy"})]})})]}),h&&e.jsxs(N,{size:"sm",onClick:$,className:"bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Send to Draft"}),e.jsx("span",{className:"sm:hidden",children:"To Draft"})]}),e.jsx("button",{onClick:n,className:"p-1.5 sm:p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Ks,{size:18,className:"sm:w-5 sm:h-5"})})]})]})}),c&&e.jsxs("div",{className:"border-b border-slate-100 px-3 sm:px-4 md:px-6 py-3 bg-gradient-to-r from-slate-50 to-white",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-slate-500",children:[e.jsx(Te,{size:14,className:"text-purple-500"}),e.jsx("span",{children:"Client Observer"})]}),e.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${E(c.score)}`,children:[c.score,"/10"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.emotions.map((C,D)=>{const Y=_r[C]||{emoji:"ðŸŽ¯",color:"bg-slate-100 text-slate-600 border-slate-200"};return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${Y.color}`,children:[e.jsx("span",{children:Y.emoji}),e.jsx("span",{className:"capitalize",children:C})]},D)})}),c.attempts>1&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[e.jsx(zs,{size:12}),e.jsxs("span",{children:[c.attempts," iterations"]})]})]}),c.reaction&&e.jsxs("p",{className:"mt-2 text-xs sm:text-sm text-slate-600 italic",children:['"',c.reaction,'"']})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 md:p-6",children:e.jsx(Pe,{value:w,onChange:C=>{k(C.target.value),t(!0),u(!1)},rows:25,className:"w-full text-sm leading-relaxed font-mono",placeholder:"Expanded story brief will appear here..."})})]})})]})},It=[{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash",category:"âš¡ Fast & Cheap",freeAccess:!0},{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash",category:"âš¡ Fast & Cheap",freeAccess:!0},{value:"gpt-4o-mini",label:"GPT-4o Mini",category:"âš¡ Fast & Cheap",freeAccess:!1},{value:"claude-haiku-4.5",label:"Claude Haiku 4.5",category:"âš¡ Fast & Cheap",freeAccess:!1},{value:"gpt-5-mini",label:"GPT-5 Mini",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"gpt-4.1",label:"GPT-4.1",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"gpt-4o",label:"GPT-4o",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"claude-sonnet-4",label:"Claude Sonnet 4",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"claude-3.7-sonnet",label:"Claude 3.7 Sonnet",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"deepseek-v3.2",label:"DeepSeek V3.2",category:"âš–ï¸ Balanced",freeAccess:!1},{value:"gpt-5.1-instant",label:"GPT-5.1 Instant âš¡",category:"ðŸš€ Premium",freeAccess:!1},{value:"claude-sonnet-4.5",label:"Claude Sonnet 4.5",category:"ðŸš€ Premium",freeAccess:!1},{value:"gpt-5",label:"GPT-5",category:"ðŸš€ Premium",freeAccess:!1}],vs=({value:s,onChange:n,className:a="",showForFreeUsers:c=!1})=>{const{authUser:h}=Ns(),o=!(h!=null&&h.plan)||h.plan==="free",w=o?It.filter(m=>m.freeAccess):It;if(o&&!c)return e.jsxs("div",{className:`flex items-center gap-2 text-xs text-slate-500 ${a}`,children:[e.jsx(vt,{size:14,className:"text-emerald-500"}),e.jsx("span",{children:"Gemini 2.5 Flash (FREE)"})]});const k=w.reduce((m,l)=>(m[l.category]||(m[l.category]=[]),m[l.category].push(l),m),{});return e.jsxs("div",{className:`flex items-center gap-2 ${a}`,children:[e.jsx(vt,{size:14,className:"text-slate-400"}),e.jsx("select",{value:s,onChange:m=>n(m.target.value),className:"text-xs px-2 py-1 rounded border border-slate-300 bg-white text-slate-700 focus:outline-none focus:border-primary-400 transition",children:Object.entries(k).map(([m,l])=>e.jsx("optgroup",{label:m,children:l.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))},m))})]})},Cr=r.lazy(()=>it(()=>import("./react-vendor-BnMxgzCM.js").then(s=>s.i),__vite__mapDeps([1,2,3]))),Sr={LinkedIn:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Instagram:{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300"},X:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"},Facebook:{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300"},TikTok:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},YouTube:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"},Blog:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},Email:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300"}},Tr=s=>Sr[s]||{bg:"bg-slate-100",text:"text-slate-700",border:"border-slate-300"},Pr=({isOpen:s,onClose:n,content:a,allContentForDay:c=[],allContent:h=[],brand:o,onContentUpdate:w,onRegenerate:k,preferredModel:m="claude-haiku-3.5",canEdit:l=!0,events:d=[],monthTheme:T,weekFocus:p,showNotification:u,hideNotification:S})=>{const[t,U]=r.useState(a),[$,A]=r.useState(""),[E,C]=r.useState([]),[D,Y]=r.useState([]),[ae,re]=r.useState(""),[J,H]=r.useState(!1),[X,ye]=r.useState(!1),[ke,O]=r.useState(!1),[V,g]=r.useState(!1),[Q,te]=r.useState(!1),[ge,oe]=r.useState(!1),[Ne,Ce]=r.useState(!1),[xe,Se]=r.useState([]),[le,Ae]=r.useState(!1),[Ie,R]=r.useState(!0),[de,j]=r.useState(m),[_,P]=r.useState("saved"),[Z,se]=r.useState(0),[pe,fe]=r.useState(null),[He,G]=r.useState(!1),Ee=r.useRef(null),Me=r.useRef(null),{authUser:_e}=Ns(),$e=!(_e!=null&&_e.plan)||_e.plan==="free",Be=(()=>{try{const i=JSON.parse(o.buyer_profile||"[]");return Array.isArray(i)&&i.length>0?i:[{name:"Primary Audience",profile:o.buyer_profile||""}]}catch(i){return[{name:"Primary Audience",profile:o.buyer_profile||""}]}})(),De=Be[Z]||Be[0];r.useEffect(()=>{a&&(U(a),A(a.user_revision||""),re(""),Se([]))},[a]),r.useEffect(()=>{console.log("ContentModal Debug State:",{canEdit:l,isExpanding:J,isRefining:X,streaming:t==null?void 0:t._streaming,hasDraft:!!$,hasRefineNotes:!!ae.trim(),modalOpen:s})},[l,J,X,t==null?void 0:t._streaming,$,ae,s]),r.useEffect(()=>{t&&(A(t.user_revision||""),re(""),g(!1),te(!1),fe(null))},[t==null?void 0:t.id]);const We=c.findIndex(i=>i.id===(t==null?void 0:t.id)),Oe=We>0,Ke=We<c.length-1,Qe=i=>{i==="prev"&&Oe?U(c[We-1]):i==="next"&&Ke&&U(c[We+1])},Fe=h?[...h].sort((i,b)=>i.date.localeCompare(b.date)):[];Fe.findIndex(i=>i.id===(t==null?void 0:t.id));const es=t==null?void 0:t.date,Ue=Fe.length>0?[...new Set(Fe.map(i=>i.date))].sort():[],Je=Ue,Le=Ue.findIndex(i=>i===es),Ge=Le>0,y=Le<Ue.length-1,ce=i=>{if(i==="prev"&&Ge){const b=Ue[Le-1],q=Fe.find(L=>L.date===b);q&&U(q)}else if(i==="next"&&y){const b=Ue[Le+1],q=Fe.find(L=>L.date===b);q&&U(q)}},ie=i=>{i!==$&&(C(b=>[...b.slice(-19),$]),Y([]),A(i))},je=()=>{if(E.length>0){const i=E[E.length-1];Y(b=>[...b,$]),A(i),C(b=>b.slice(0,-1))}},v=()=>{if(D.length>0){const i=D[D.length-1];C(b=>[...b,$]),A(i),Y(b=>b.slice(0,-1))}};if(r.useEffect(()=>{if(t){const i=c.find(b=>b.id===t.id);i&&U(i)}},[c,t==null?void 0:t.id]),r.useEffect(()=>{if(!(!l||!t))return Me.current&&clearTimeout(Me.current),$!==(t.user_revision||"")&&(P("unsaved"),Me.current=setTimeout(()=>{P("saving"),w(t.id,{user_revision:$}),setTimeout(()=>P("saved"),500)},2e3)),()=>{Me.current&&clearTimeout(Me.current)}},[$,t,l,w]),r.useEffect(()=>(s?(document.body.style.overflow="hidden",document.body.classList.add("modal-open")):(document.body.style.overflow="unset",document.body.classList.remove("modal-open")),()=>{document.body.style.overflow="unset",document.body.classList.remove("modal-open")}),[s]),!s||!t)return null;t.final_brief||t.expanded_brief||t.brief;const I=Array.isArray(o.cast_management)?o.cast_management:[],F=Tr(t.channel),z=Array.isArray(o.team_members)?o.team_members:[],ee=()=>ne(void 0,null,function*(){if(console.log("ðŸ”µ handleExpand clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming}),!(!t||!l||t._streaming)){H(!0),u==null||u("Expanding brief into rich creative concept...",de);try{const i=$.trim()?$.trim():void 0,b=De.profile||o.buyer_profile,q=yield as.expandBrief(t,W(M({},o),{buyer_profile:b}),de,i,I,p),L=q.expandedBrief,ue=q.observerFeedback;ue&&(fe(ue),console.log("âœ¨ Client Observer Feedback:",ue));let he=L;typeof L=="object"&&L!==null&&(he=me(L)),ie(he),w(t.id,{expanded_brief:he,final_brief:he,user_revision:he}),R(!0)}catch(i){console.error("Failed to expand:",i),alert("Failed to expand brief. Please try again.")}finally{H(!1),S==null||S()}}}),K=()=>ne(void 0,null,function*(){if(!t)return;const i=`
ðŸŽ£ HOOK
${t.story_hook||"N/A"}

ðŸ“‹ DIRECTIVES
${t.directives||"N/A"}

ðŸŽ­ CHARACTER
${t.character_focus||"N/A"}

ðŸŽ¬ MEDIA TYPE
${t.media_type||"N/A"}

ðŸŽ¨ TONE
${t.tone||"N/A"}

ðŸŽ¯ CALL TO ACTION
${t.call_to_action||"N/A"}
    `.trim();try{yield navigator.clipboard.writeText(i),te(!0),setTimeout(()=>te(!1),2e3)}catch(b){console.error("Failed to copy:",b)}}),me=i=>typeof i=="string"?i:[{key:"day",title:"ðŸ“… Day"},{key:"channel",title:"ðŸ“¢ Channel"},{key:"storyHook",title:"ðŸŽ£ Story Hook & Content Idea"},{key:"hook",title:"ðŸŽ£ Story Hook"},{key:"characterFocus",title:"ðŸŽ­ Character Focus"},{key:"character_focus",title:"ðŸŽ­ Character Focus"},{key:"emotionalBeat",title:"ðŸ’« Emotional Beat"},{key:"emotional_beat",title:"ðŸ’« Emotional Beat"},{key:"narrativePurpose",title:"ðŸ“– Narrative Purpose"},{key:"narrative_purpose",title:"ðŸ“– Narrative Purpose"},{key:"mediaType",title:"ðŸŽ¬ Media Type"},{key:"media_type",title:"ðŸŽ¬ Media Type"},{key:"callToAction",title:"ðŸŽ¯ Call To Action"},{key:"call_to_action",title:"ðŸŽ¯ Call To Action"},{key:"cta",title:"ðŸŽ¯ Call To Action"},{key:"directives",title:"ðŸ“‹ Content Directives"},{key:"brief",title:"ðŸ“ Creative Brief"},{key:"keyMessage",title:"ðŸ’¡ Key Message"},{key:"contentStructure",title:"ðŸ“‹ Content Structure"},{key:"successMetrics",title:"âœ¨ Success Metrics"}].filter(L=>{const ue=i[L.key];return ue&&(typeof ue=="string"||typeof ue=="number")}).map(L=>{const he=String(i[L.key]).replace(/\n/g,"<br>");return`<h3><strong>${L.title}</strong></h3><p>${he}</p>`}).join(""),we=()=>ne(void 0,null,function*(){if(console.log("âœ¨ handleRefine (Review) clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming,notes:ae}),!(!t||!l||!ae.trim()||t._streaming)){ye(!0);try{const i=`
ORIGINAL IDEA:
Hook: ${t.story_hook||"N/A"}
Directives: ${t.directives||"N/A"}
Character: ${t.character_focus||"N/A"}
Media Type: ${t.media_type||"N/A"}
CTA: ${t.call_to_action||"N/A"}
      `.trim(),b=ae.trim(),q=De.profile||o.buyer_profile,L=yield as.refineContent(W(M({},o),{buyer_profile:q}),i,b,t.date,I,de);ie(L),w(t.id,{expanded_brief:L,final_brief:L,user_revision:L,is_perfect:!1}),re("")}catch(i){console.error("Failed to refine:",i),alert("Failed to refine content. Please try again.")}finally{ye(!1)}}}),ve=()=>{if(console.log("â­ handleMarkPerfect clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming,draft:$}),!l||t._streaming)return;const i=!t.is_perfect;U(b=>b?W(M({},b),{is_perfect:i}):null),w(t.id,{is_perfect:i,user_revision:$,final_brief:$||t.final_brief||t.expanded_brief||t.brief})},be=()=>ne(void 0,null,function*(){if(!(!t||!l||!k)){O(!0);try{yield k(t.id)}catch(i){console.error("Failed to regenerate:",i),alert("Failed to regenerate content. Please try again.")}finally{O(!1)}}}),x=()=>{if(z.length===0){alert("No team members found. Add team members in Settings.");return}oe(!0)},f=()=>ne(void 0,null,function*(){if(t){if(xe.length===0){alert("Please select at least one team member.");return}try{u==null||u("Sending brief via email...",m);const i=z.filter(L=>xe.includes(L.id)).map(L=>L.email);if(i.length===0)throw new Error("No valid email addresses found");const b={title:t.title,channel:t.channel,date:t.date,storyHook:t.story_hook,characterFocus:t.character_focus,emotionalBeat:t.emotional_beat,narrativePurpose:t.narrative_purpose,mediaType:t.media_type,callToAction:t.call_to_action,brief:$||t.expanded_brief||t.brief||"",suggestedTime:t.suggested_posting_time},q=yield fetch("https://py.raysourcelabs.com/api/api/email/send-brief",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({teamMemberEmails:i,contentData:b,brandName:o.brand_name})});if(!q.ok){const L=yield q.json();throw new Error(L.error||"Failed to send email")}S==null||S(),alert(`âœ… Brief sent to ${i.length} team member(s)!`),oe(!1),Se([])}catch(i){console.error("Failed to send brief:",i),S==null||S(),alert(`âŒ Failed to send brief: ${i instanceof Error?i.message:"Unknown error"}`)}}}),B=i=>{A(i)};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-sm",onClick:n}),e.jsx("div",{className:"relative z-10 flex-1 overflow-y-auto",children:e.jsxs("div",{className:"min-h-full bg-white",children:[e.jsx("div",{className:"sticky top-0 bg-white/95 backdrop-blur-lg border-b border-slate-200 z-20 shadow-sm",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-slate-600 mb-2 sm:mb-3 overflow-x-auto",children:[e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:"Content Calendar"}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:new Date(t.date+"T12:00:00Z").toLocaleDateString("en-US",{month:"long",year:"numeric",timeZone:"UTC"})}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:new Date(t.date+"T12:00:00Z").toLocaleDateString("en-US",{weekday:"long",day:"numeric",timeZone:"UTC"})}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold border ${F.bg} ${F.text} ${F.border}`,children:t.channel})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-4 p-2 sm:p-3 bg-slate-50 rounded-lg mb-2 sm:mb-3",children:[h&&h.length>0&&Je&&Je.length>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>ce("prev"),disabled:!Ge,className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors ${Ge?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Previous day",children:[e.jsx(ns,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Prev Day"}),e.jsx("span",{className:"md:hidden",children:"Prev"})]}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 px-1 sm:px-2 whitespace-nowrap",children:["Day ",Le+1,"/",Je.length]}),e.jsxs("button",{onClick:()=>ce("next"),disabled:!y,className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors ${y?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Next day",children:[e.jsx("span",{className:"hidden md:inline",children:"Next Day"}),e.jsx("span",{className:"md:hidden",children:"Next"}),e.jsx(Ve,{size:14,className:"sm:w-4 sm:h-4"})]})]}),c&&c.length>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:border-l border-slate-200 sm:pl-4",children:[e.jsx("button",{onClick:()=>Qe("prev"),disabled:!Oe,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${Oe?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Previous channel",children:e.jsx(ns,{size:16,className:"sm:w-[18px] sm:h-[18px]"})}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 px-1 sm:px-2 whitespace-nowrap",children:[We+1,"/",c.length]}),e.jsx("button",{onClick:()=>Qe("next"),disabled:!Ke,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${Ke?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Next channel",children:e.jsx(Ve,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 mb-1 sm:mb-2",children:t.suggested_posting_time&&e.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs text-slate-500",children:[e.jsx(Ss,{size:12,className:"sm:w-3.5 sm:h-3.5"}),t.suggested_posting_time]})}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 mb-1",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 flex-wrap w-full sm:w-auto justify-end",children:[l&&!$e&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(vs,{value:de,onChange:i=>j(i),className:"text-xs"})}),l&&Be.length>1&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("select",{value:Z,onChange:i=>se(Number(i.target.value)),className:"text-xs px-2 py-1.5 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Select target audience",children:Be.map((i,b)=>e.jsx("option",{value:b,children:i.name||`Audience ${b+1}`},b))})}),l&&k&&e.jsxs(N,{variant:"outline",size:"sm",onClick:be,loading:ke,disabled:ke,className:"flex items-center gap-1 sm:gap-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 text-xs sm:text-sm",title:Be.length>1?`Regenerate original idea for ${De.name} using ${de}`:`Regenerate original idea using ${de}`,children:[e.jsx(zs,{size:14,className:ke?"animate-spin":""}),e.jsx("span",{className:"hidden sm:inline",children:"Regenerate Idea"}),e.jsx("span",{className:"sm:hidden",children:"Regen"})]}),l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(gs,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]}),e.jsxs(N,{variant:t.is_perfect?"default":"outline",size:"sm",onClick:ve,disabled:!l||t._streaming,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(lt,{size:14,className:t.is_perfect?"fill-current":""}),e.jsx("span",{className:"hidden sm:inline",children:t.is_perfect?"Perfect":"Mark Perfect"}),e.jsx("span",{className:"sm:hidden",children:"â˜…"})]}),e.jsx("button",{onClick:n,className:"p-1.5 sm:p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Ks,{size:18,className:"sm:w-5 sm:h-5"})})]})]})]})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 md:py-8 space-y-4 sm:space-y-6 md:space-y-8",children:[!l&&e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"ðŸ‘€ View-only access"}),(t.story_hook||t.character_focus||t.directives||t.media_type||t.call_to_action)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"ðŸ’¡ Original Idea"}),e.jsx(N,{variant:"outline",size:"sm",onClick:K,className:"flex items-center gap-2",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:14,className:"text-green-600"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:14}),"Copy"]})})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 via-pink-50 to-purple-50 border-2 border-orange-200 rounded-2xl space-y-4",children:[t.story_hook&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1.5",children:"ðŸŽ£ Hook"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:t.story_hook})]}),t.directives&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1.5",children:"ðŸ“‹ Directives"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap",children:t.directives})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4 pt-2 border-t border-orange-200/50",children:[t.character_focus&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ­ Character"}),e.jsx("p",{className:"text-sm text-slate-700",children:t.character_focus})]}),t.media_type&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¬ Media Type"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium uppercase tracking-wide",children:t.media_type})]}),t.tone&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¨ Tone"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:t.tone})]}),t.call_to_action&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¯ CTA"}),e.jsx("p",{className:"text-sm text-slate-700",children:t.call_to_action})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Full Creative Execution"}),!$e&&e.jsx(vs,{value:de,onChange:j})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Ae(!le),className:"flex items-center gap-2",title:le?"Exit Fullscreen":"Fullscreen",children:le?e.jsx(bs,{size:14}):e.jsx(Lt,{size:14})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>R(!Ie),disabled:!l,className:"flex items-center gap-2",title:"Toggle Rich Text Editor",children:[e.jsx(Ws,{size:14}),Ie?"Plain":"Rich"]}),!t.expanded_brief&&!t.final_brief?e.jsxs(N,{size:"sm",onClick:ee,loading:J,disabled:!l||t._streaming,className:"flex items-center gap-2 bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white",title:`Expand brief into full content using ${de}`,children:[e.jsx(Rt,{size:14}),"Expand Brief"]}):null,e.jsx(N,{variant:"outline",size:"sm",onClick:je,disabled:!l||E.length===0,className:"flex items-center gap-2",title:"Undo",children:e.jsx(Bt,{size:14})}),e.jsx(N,{variant:"outline",size:"sm",onClick:v,disabled:!l||D.length===0,className:"flex items-center gap-2",title:"Redo",children:e.jsx(Wt,{size:14})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>ne(void 0,null,function*(){if($){const i=document.createElement("div");i.innerHTML=$;const b=i.textContent||i.innerText||$;yield navigator.clipboard.writeText(b),g(!0),setTimeout(()=>g(!1),2e3)}}),disabled:!$,className:"flex items-center gap-2",children:[V?e.jsx(xs,{size:14,className:"text-green-600"}):e.jsx(Ze,{size:14}),V?"Copied!":"Copy"]}),(t.expanded_brief||t.final_brief)&&e.jsxs(N,{variant:"primary",size:"sm",onClick:ee,loading:J,disabled:!l||t._streaming,className:"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white",title:`Regenerate expanded brief using ${de}`,children:[e.jsx(zs,{size:14,className:J?"animate-spin":""}),"Regenerate Expansion"]})]})]}),Ie?e.jsxs("div",{className:`${le?"fixed inset-0 z-[90] bg-white flex flex-col overflow-hidden":""}`,children:[le&&e.jsxs("div",{className:"flex items-center justify-between gap-3 px-8 py-4 border-b border-slate-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Full Creative Execution"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_==="saved"?"bg-green-100 text-green-700":_==="saving"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:_==="saved"?"âœ“ Saved":_==="saving"?"â³ Saving...":"âš  Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[e.jsx(gs,{size:14}),"Send Brief"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Ae(!1),className:"flex items-center gap-2",children:[e.jsx(bs,{size:14}),"Exit Fullscreen"]})]})]}),e.jsx("div",{className:`${le?"flex-1 overflow-y-auto px-8 py-6":""}`,children:e.jsx("div",{className:`${le?"max-w-4xl mx-auto":""}`,children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"min-h-[300px] flex items-center justify-center bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading editor..."})]})}),children:e.jsx(Cr,{ref:Ee,value:$,onChange:i=>{t.is_perfect?G(!0):ie(i)},readOnly:!l||t._streaming,theme:"snow",className:`${le?"h-auto":"min-h-[300px]"}`,placeholder:"Click 'Expand Brief' to generate the full script/article/copy, or type your own content here...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","blockquote","code-block"],["clean"]]}})})})})]}):e.jsxs("div",{className:`${le?"fixed inset-0 z-[90] bg-white flex flex-col overflow-hidden":""}`,children:[le&&e.jsxs("div",{className:"flex items-center justify-between gap-3 px-8 py-4 border-b border-slate-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Full Creative Execution"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_==="saved"?"bg-green-100 text-green-700":_==="saving"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:_==="saved"?"âœ“ Saved":_==="saving"?"â³ Saving...":"âš  Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[e.jsx(gs,{size:14}),"Send Brief"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Ae(!1),className:"flex items-center gap-2",children:[e.jsx(bs,{size:14}),"Exit Fullscreen"]})]})]}),e.jsx("div",{className:`${le?"flex-1 overflow-y-auto px-8 py-6":""}`,children:e.jsx("div",{className:`${le?"max-w-4xl mx-auto":""}`,children:e.jsx(Pe,{value:$,onChange:i=>{t.is_perfect?G(!0):ie(i.target.value)},placeholder:"Click 'Expand Brief' to generate the full script/article/copy, or type your own prompt/notes here first to guide Andora's writing...",disabled:!l||t._streaming,rows:le?30:12,className:`text-sm leading-relaxed font-mono ${le?"w-full min-h-screen":""}`})})})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 via-pink-50 to-purple-50 border-2 border-orange-200 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Review"})]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Andora will review your notes below and expand them into a full creative brief in the draft field above"}),e.jsx(Pe,{value:ae,onChange:i=>re(i.target.value),placeholder:"Write your review notes here - ideas, directions, tweaks you want. Andora will contextualize this with the original brief and create an expanded version...",disabled:!l||t._streaming,rows:3,className:"bg-white/80 text-sm"}),e.jsxs(N,{onClick:we,loading:X,disabled:!l||!ae.trim()||t._streaming,className:"w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white",children:[e.jsx(ts,{size:16,className:"mr-2"}),X?"Andora is reviewing...":"Review"]})]}),z.length>0&&e.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-200 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Team Comments"})]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Leave notes for your team about this brief"}),e.jsx(Pe,{value:t.comments||"",onChange:i=>{l&&w(t.id,{comments:i.target.value})},placeholder:"Add comments for your team here...",disabled:!l||t._streaming,rows:3,className:"bg-white/80 text-sm"})]})]})]})}),ge&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>oe(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Send Brief to Team"}),e.jsx("div",{className:"space-y-2 mb-6 max-h-64 overflow-y-auto",children:z.map(i=>e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:xe.includes(i.id),onChange:b=>{b.target.checked?Se([...xe,i.id]):Se(xe.filter(q=>q!==i.id))},className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:i.name}),e.jsx("p",{className:"text-xs text-slate-500",children:i.email})]})]},i.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>oe(!1),className:"flex-1",children:"Cancel"}),e.jsxs(N,{onClick:f,disabled:xe.length===0,className:"flex-1",children:["Send to ",xe.length," member(s)"]})]})]})]}),e.jsx(qt,{isOpen:Ne,onClose:()=>Ce(!1),expandedBrief:(t==null?void 0:t.expanded_brief)||(t==null?void 0:t.final_brief)||"",observerFeedback:pe,onSendToDraft:B}),He&&e.jsxs("div",{className:"fixed inset-0 z-[101] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>G(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"This content is marked as perfect."}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Editing this content will mark it as imperfect. Are you sure you want to continue?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>G(!1),className:"flex-1",children:"Cancel"}),e.jsx(N,{onClick:()=>{G(!1),w(t.id,{is_perfect:!1})},className:"flex-1",children:"Edit Anyway"})]})]})]})]})},Ar=r.lazy(()=>it(()=>import("./react-vendor-BnMxgzCM.js").then(s=>s.i),__vite__mapDeps([1,2,3]))),$r={LinkedIn:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Instagram:{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300"},X:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"},Facebook:{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300"},TikTok:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},YouTube:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"},Blog:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},Email:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300"}},zr=s=>$r[s]||{bg:"bg-slate-100",text:"text-slate-700",border:"border-slate-300"},Mr=({isOpen:s,onClose:n,content:a,allContentForDay:c=[],allContent:h=[],brand:o,onContentUpdate:w,onRegenerate:k,preferredModel:m="claude-haiku-3.5",canEdit:l=!0,events:d=[],monthTheme:T,weekFocus:p,showNotification:u,hideNotification:S})=>{const[t,U]=r.useState(a),[$,A]=r.useState(""),[E,C]=r.useState([]),[D,Y]=r.useState([]),[ae,re]=r.useState(""),[J,H]=r.useState(!1),[X,ye]=r.useState(!1),[ke,O]=r.useState(!1),[V,g]=r.useState(!1),[Q,te]=r.useState(!1),[ge,oe]=r.useState(!1),[Ne,Ce]=r.useState(!1),[xe,Se]=r.useState([]),[le,Ae]=r.useState(!1),[Ie,R]=r.useState(!0),[de,j]=r.useState(m),[_,P]=r.useState("saved"),[Z,se]=r.useState(0),[pe,fe]=r.useState(null),[He,G]=r.useState(!1),Ee=r.useRef(null),Me=r.useRef(null),{authUser:_e}=Ns(),$e=!(_e!=null&&_e.plan)||_e.plan==="free",Be=(()=>{try{const i=JSON.parse(o.buyer_profile||"[]");return Array.isArray(i)&&i.length>0?i:[{name:"Primary Audience",profile:o.buyer_profile||""}]}catch(i){return[{name:"Primary Audience",profile:o.buyer_profile||""}]}})(),De=Be[Z]||Be[0];r.useEffect(()=>{a&&(U(a),A(a.user_revision||""),re(""),Se([]))},[a]),r.useEffect(()=>{console.log("ContentSidebar Debug State:",{canEdit:l,isExpanding:J,isRefining:X,streaming:t==null?void 0:t._streaming,hasDraft:!!$,hasRefineNotes:!!ae.trim(),modalOpen:s})},[l,J,X,t==null?void 0:t._streaming,$,ae,s]),r.useEffect(()=>{t&&(A(t.user_revision||""),re(""),g(!1),te(!1),fe(null))},[t==null?void 0:t.id]);const We=c.findIndex(i=>i.id===(t==null?void 0:t.id)),Oe=We>0,Ke=We<c.length-1,Qe=i=>{i==="prev"&&Oe?U(c[We-1]):i==="next"&&Ke&&U(c[We+1])},Fe=h?[...h].sort((i,b)=>i.date.localeCompare(b.date)):[];Fe.findIndex(i=>i.id===(t==null?void 0:t.id));const es=t==null?void 0:t.date,Ue=Fe.length>0?[...new Set(Fe.map(i=>i.date))].sort():[],Je=Ue,Le=Ue.findIndex(i=>i===es),Ge=Le>0,y=Le<Ue.length-1,ce=i=>{if(i==="prev"&&Ge){const b=Ue[Le-1],q=Fe.find(L=>L.date===b);q&&U(q)}else if(i==="next"&&y){const b=Ue[Le+1],q=Fe.find(L=>L.date===b);q&&U(q)}},ie=i=>{i!==$&&(C(b=>[...b.slice(-19),$]),Y([]),A(i))},je=()=>{if(E.length>0){const i=E[E.length-1];Y(b=>[...b,$]),A(i),C(b=>b.slice(0,-1))}},v=()=>{if(D.length>0){const i=D[D.length-1];C(b=>[...b,$]),A(i),Y(b=>b.slice(0,-1))}};if(r.useEffect(()=>{if(t){const i=c.find(b=>b.id===t.id);i&&U(i)}},[c,t==null?void 0:t.id]),r.useEffect(()=>{if(!(!l||!t))return Me.current&&clearTimeout(Me.current),$!==(t.user_revision||"")&&(P("unsaved"),Me.current=setTimeout(()=>{P("saving"),w(t.id,{user_revision:$}),setTimeout(()=>P("saved"),500)},2e3)),()=>{Me.current&&clearTimeout(Me.current)}},[$,t,l,w]),!s||!t)return null;t.final_brief||t.expanded_brief||t.brief;const I=Array.isArray(o.cast_management)?o.cast_management:[],F=zr(t.channel),z=Array.isArray(o.team_members)?o.team_members:[],ee=()=>ne(void 0,null,function*(){if(console.log("ðŸ”µ handleExpand clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming}),!(!t||!l||t._streaming)){H(!0),u==null||u("Expanding brief into rich creative concept...",de);try{const i=$.trim()?$.trim():void 0,b=De.profile||o.buyer_profile,q=yield as.expandBrief(t,W(M({},o),{buyer_profile:b}),de,i,I,p),L=q.expandedBrief,ue=q.observerFeedback;ue&&(fe(ue),console.log("âœ¨ Client Observer Feedback:",ue));let he=L;typeof L=="object"&&L!==null&&(he=me(L)),ie(he),w(t.id,{expanded_brief:he,final_brief:he,user_revision:he}),R(!0)}catch(i){console.error("Failed to expand:",i),alert("Failed to expand brief. Please try again.")}finally{H(!1),S==null||S()}}}),K=()=>ne(void 0,null,function*(){if(!t)return;const i=`
ðŸŽ£ HOOK
${t.story_hook||"N/A"}

ðŸ“‹ DIRECTIVES
${t.directives||"N/A"}

ðŸŽ­ CHARACTER
${t.character_focus||"N/A"}

ðŸŽ¬ MEDIA TYPE
${t.media_type||"N/A"}

ðŸŽ¨ TONE
${t.tone||"N/A"}

ðŸŽ¯ CALL TO ACTION
${t.call_to_action||"N/A"}
    `.trim();try{yield navigator.clipboard.writeText(i),te(!0),setTimeout(()=>te(!1),2e3)}catch(b){console.error("Failed to copy:",b)}}),me=i=>typeof i=="string"?i:[{key:"day",title:"ðŸ“… Day"},{key:"channel",title:"ðŸ“¢ Channel"},{key:"storyHook",title:"ðŸŽ£ Story Hook & Content Idea"},{key:"hook",title:"ðŸŽ£ Story Hook"},{key:"characterFocus",title:"ðŸŽ­ Character Focus"},{key:"character_focus",title:"ðŸŽ­ Character Focus"},{key:"emotionalBeat",title:"ðŸ’« Emotional Beat"},{key:"emotional_beat",title:"ðŸ’« Emotional Beat"},{key:"narrativePurpose",title:"ðŸ“– Narrative Purpose"},{key:"narrative_purpose",title:"ðŸ“– Narrative Purpose"},{key:"mediaType",title:"ðŸŽ¬ Media Type"},{key:"media_type",title:"ðŸŽ¬ Media Type"},{key:"callToAction",title:"ðŸŽ¯ Call To Action"},{key:"call_to_action",title:"ðŸŽ¯ Call To Action"},{key:"cta",title:"ðŸŽ¯ Call To Action"},{key:"directives",title:"ðŸ“‹ Content Directives"},{key:"brief",title:"ðŸ“ Creative Brief"},{key:"keyMessage",title:"ðŸ’¡ Key Message"},{key:"contentStructure",title:"ðŸ“‹ Content Structure"},{key:"successMetrics",title:"âœ¨ Success Metrics"}].filter(L=>{const ue=i[L.key];return ue&&(typeof ue=="string"||typeof ue=="number")}).map(L=>{const he=String(i[L.key]).replace(/\n/g,"<br>");return`<h3><strong>${L.title}</strong></h3><p>${he}</p>`}).join(""),we=()=>ne(void 0,null,function*(){if(console.log("âœ¨ handleRefine (Review) clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming,notes:ae}),!(!t||!l||!ae.trim()||t._streaming)){ye(!0);try{const i=`
ORIGINAL IDEA:
Hook: ${t.story_hook||"N/A"}
Directives: ${t.directives||"N/A"}
Character: ${t.character_focus||"N/A"}
Media Type: ${t.media_type||"N/A"}
CTA: ${t.call_to_action||"N/A"}
      `.trim(),b=ae.trim(),q=De.profile||o.buyer_profile,L=yield as.refineContent(W(M({},o),{buyer_profile:q}),i,b,t.date,I,de);ie(L),w(t.id,{expanded_brief:L,final_brief:L,user_revision:L,is_perfect:!1}),re("")}catch(i){console.error("Failed to refine:",i),alert("Failed to refine content. Please try again.")}finally{ye(!1)}}}),ve=()=>{if(console.log("â­ handleMarkPerfect clicked!",{canEdit:l,streaming:t==null?void 0:t._streaming,draft:$}),!l||t._streaming)return;const i=!t.is_perfect;U(b=>b?W(M({},b),{is_perfect:i}):null),w(t.id,{is_perfect:i,user_revision:$,final_brief:$||t.final_brief||t.expanded_brief||t.brief})},be=()=>ne(void 0,null,function*(){if(!(!t||!l||!k)){O(!0);try{yield k(t.id)}catch(i){console.error("Failed to regenerate:",i),alert("Failed to regenerate content. Please try again.")}finally{O(!1)}}}),x=()=>{if(z.length===0){alert("No team members found. Add team members in Settings.");return}oe(!0)},f=()=>ne(void 0,null,function*(){if(t){if(xe.length===0){alert("Please select at least one team member.");return}try{u==null||u("Sending brief via email...",m);const i=z.filter(L=>xe.includes(L.id)).map(L=>L.email);if(i.length===0)throw new Error("No valid email addresses found");const b={title:t.title,channel:t.channel,date:t.date,storyHook:t.story_hook,characterFocus:t.character_focus,emotionalBeat:t.emotional_beat,narrativePurpose:t.narrative_purpose,mediaType:t.media_type,callToAction:t.call_to_action,brief:$||t.expanded_brief||t.brief||"",suggestedTime:t.suggested_posting_time},q=yield fetch("https://py.raysourcelabs.com/api/api/email/send-brief",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({teamMemberEmails:i,contentData:b,brandName:o.brand_name})});if(!q.ok){const L=yield q.json();throw new Error(L.error||"Failed to send email")}S==null||S(),alert(`âœ… Brief sent to ${i.length} team member(s)!`),oe(!1),Se([])}catch(i){console.error("Failed to send brief:",i),S==null||S(),alert(`âŒ Failed to send brief: ${i instanceof Error?i.message:"Unknown error"}`)}}}),B=i=>{A(i)};return e.jsxs("div",{className:`fixed inset-y-0 right-0 z-50 w-full max-w-2xl bg-white shadow-2xl transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"sticky top-0 bg-white/95 backdrop-blur-lg border-b border-slate-200 z-20 shadow-sm flex-shrink-0",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-slate-600 mb-2 sm:mb-3 overflow-x-auto",children:[e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:"Content Calendar"}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:new Date(t.date+"T12:00:00Z").toLocaleDateString("en-US",{month:"long",year:"numeric",timeZone:"UTC"})}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"hover:text-slate-900 cursor-default",children:new Date(t.date+"T12:00:00Z").toLocaleDateString("en-US",{weekday:"long",day:"numeric",timeZone:"UTC"})}),e.jsx(Ve,{size:14,className:"text-slate-400"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold border ${F.bg} ${F.text} ${F.border}`,children:t.channel})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-4 p-2 sm:p-3 bg-slate-50 rounded-lg mb-2 sm:mb-3",children:[h&&h.length>0&&Je&&Je.length>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>ce("prev"),disabled:!Ge,className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors ${Ge?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Previous day",children:[e.jsx(ns,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Prev Day"}),e.jsx("span",{className:"md:hidden",children:"Prev"})]}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 px-1 sm:px-2 whitespace-nowrap",children:["Day ",Le+1,"/",Je.length]}),e.jsxs("button",{onClick:()=>ce("next"),disabled:!y,className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors ${y?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Next day",children:[e.jsx("span",{className:"hidden md:inline",children:"Next Day"}),e.jsx("span",{className:"md:hidden",children:"Next"}),e.jsx(Ve,{size:14,className:"sm:w-4 sm:h-4"})]})]}),c&&c.length>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:border-l border-slate-200 sm:pl-4",children:[e.jsx("button",{onClick:()=>Qe("prev"),disabled:!Oe,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${Oe?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Previous channel",children:e.jsx(ns,{size:16,className:"sm:w-[18px] sm:h-[18px]"})}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 px-1 sm:px-2 whitespace-nowrap",children:[We+1,"/",c.length]}),e.jsx("button",{onClick:()=>Qe("next"),disabled:!Ke,className:`p-1.5 sm:p-2 rounded-lg transition-colors ${Ke?"hover:bg-white text-slate-700 shadow-sm":"text-slate-300 cursor-not-allowed"}`,title:"Next channel",children:e.jsx(Ve,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 mb-1 sm:mb-2",children:t.suggested_posting_time&&e.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs text-slate-500",children:[e.jsx(Ss,{size:12,className:"sm:w-3.5 sm:h-3.5"}),t.suggested_posting_time]})}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 mb-1",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 flex-wrap w-full sm:w-auto justify-end",children:[!$e&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(vs,{value:de,onChange:i=>j(i),className:"text-xs"})}),Be.length>1&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("select",{value:Z,onChange:i=>se(Number(i.target.value)),className:"text-xs px-2 py-1.5 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Select target audience",children:Be.map((i,b)=>e.jsx("option",{value:b,children:i.name||`Audience ${b+1}`},b))})}),l&&k&&e.jsxs(N,{variant:"outline",size:"sm",onClick:be,loading:ke,disabled:ke,className:"flex items-center gap-1 sm:gap-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 text-xs sm:text-sm",title:Be.length>1?`Regenerate original idea for ${De.name} using ${de}`:`Regenerate original idea using ${de}`,children:[e.jsx(zs,{size:14,className:ke?"animate-spin":""}),e.jsx("span",{className:"hidden sm:inline",children:"Regenerate Idea"}),e.jsx("span",{className:"sm:hidden",children:"Regen"})]}),l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(gs,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]}),e.jsxs(N,{variant:t.is_perfect?"default":"outline",size:"sm",onClick:ve,disabled:!l||t._streaming,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(lt,{size:14,className:t.is_perfect?"fill-current":""}),e.jsx("span",{className:"hidden sm:inline",children:t.is_perfect?"Perfect":"Mark Perfect"}),e.jsx("span",{className:"sm:hidden",children:"â˜…"})]}),e.jsx("button",{onClick:n,className:"p-1.5 sm:p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Ks,{size:18,className:"sm:w-5 sm:h-5"})})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 md:py-8 space-y-4 sm:space-y-6 md:space-y-8",children:[!l&&e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"ðŸ‘€ View-only access"}),(t.story_hook||t.character_focus||t.directives||t.media_type||t.call_to_action)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"ðŸ’¡ Original Idea"}),e.jsx(N,{variant:"outline",size:"sm",onClick:K,className:"flex items-center gap-2",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:14,className:"text-green-600"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:14}),"Copy"]})})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 via-pink-50 to-purple-50 border-2 border-orange-200 rounded-2xl space-y-4",children:[t.story_hook&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1.5",children:"ðŸŽ£ Hook"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:t.story_hook})]}),t.directives&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1.5",children:"ðŸ“‹ Directives"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap",children:t.directives})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4 pt-2 border-t border-orange-200/50",children:[t.character_focus&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ­ Character"}),e.jsx("p",{className:"text-sm text-slate-700",children:t.character_focus})]}),t.media_type&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¬ Media Type"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium uppercase tracking-wide",children:t.media_type})]}),t.tone&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¨ Tone"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:t.tone})]}),t.call_to_action&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-600 mb-1",children:"ðŸŽ¯ CTA"}),e.jsx("p",{className:"text-sm text-slate-700",children:t.call_to_action})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Full Creative Execution"}),!$e&&e.jsx(vs,{value:de,onChange:j})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Ae(!le),className:"flex items-center gap-2",title:le?"Exit Fullscreen":"Fullscreen",children:le?e.jsx(bs,{size:14}):e.jsx(Lt,{size:14})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>R(!Ie),disabled:!l,className:"flex items-center gap-2",title:"Toggle Rich Text Editor",children:[e.jsx(Ws,{size:14}),Ie?"Plain":"Rich"]}),!t.expanded_brief&&!t.final_brief?e.jsxs(N,{size:"sm",onClick:ee,loading:J,disabled:!l||t._streaming,className:"flex items-center gap-2 bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white",title:`Expand brief into full content using ${de}`,children:[e.jsx(Rt,{size:14}),"Expand Brief"]}):null,e.jsx(N,{variant:"outline",size:"sm",onClick:je,disabled:!l||E.length===0,className:"flex items-center gap-2",title:"Undo",children:e.jsx(Bt,{size:14})}),e.jsx(N,{variant:"outline",size:"sm",onClick:v,disabled:!l||D.length===0,className:"flex items-center gap-2",title:"Redo",children:e.jsx(Wt,{size:14})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>ne(void 0,null,function*(){if($){const i=document.createElement("div");i.innerHTML=$;const b=i.textContent||i.innerText||$;yield navigator.clipboard.writeText(b),g(!0),setTimeout(()=>g(!1),2e3)}}),disabled:!$,className:"flex items-center gap-2",children:[V?e.jsx(xs,{size:14,className:"text-green-600"}):e.jsx(Ze,{size:14}),V?"Copied!":"Copy"]}),(t.expanded_brief||t.final_brief)&&e.jsxs(N,{variant:"primary",size:"sm",onClick:ee,loading:J,disabled:!l||t._streaming,className:"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white",title:`Regenerate expanded brief using ${de}`,children:[e.jsx(zs,{size:14,className:J?"animate-spin":""}),"Regenerate Expansion"]})]})]}),Ie?e.jsxs("div",{className:`${le?"fixed inset-0 z-[90] bg-white flex flex-col overflow-hidden":""}`,children:[le&&e.jsxs("div",{className:"flex items-center justify-between gap-3 px-8 py-4 border-b border-slate-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Full Creative Execution"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_==="saved"?"bg-green-100 text-green-700":_==="saving"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:_==="saved"?"âœ“ Saved":_==="saving"?"â³ Saving...":"âš  Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[e.jsx(gs,{size:14}),"Send Brief"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Ae(!1),className:"flex items-center gap-2",children:[e.jsx(bs,{size:14}),"Exit Fullscreen"]})]})]}),e.jsx("div",{className:`${le?"flex-1 overflow-y-auto px-8 py-6":""}`,children:e.jsx("div",{className:`${le?"max-w-4xl mx-auto":""}`,children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"min-h-[300px] flex items-center justify-center bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading editor..."})]})}),children:e.jsx(Ar,{ref:Ee,value:$,onChange:i=>{t.is_perfect?G(!0):ie(i)},readOnly:!l||t._streaming,theme:"snow",className:`${le?"h-auto":"min-h-[300px]"}`,placeholder:"Click 'Expand Brief' to generate the full script/article/copy, or type your own content here...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","blockquote","code-block"],["clean"]]}})})})})]}):e.jsxs("div",{className:`${le?"fixed inset-0 z-[90] bg-white flex flex-col overflow-hidden":""}`,children:[le&&e.jsxs("div",{className:"flex items-center justify-between gap-3 px-8 py-4 border-b border-slate-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Full Creative Execution"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_==="saved"?"bg-green-100 text-green-700":_==="saving"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:_==="saved"?"âœ“ Saved":_==="saving"?"â³ Saving...":"âš  Unsaved"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&z.length>0&&e.jsxs(N,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[e.jsx(gs,{size:14}),"Send Brief"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Ae(!1),className:"flex items-center gap-2",children:[e.jsx(bs,{size:14}),"Exit Fullscreen"]})]})]}),e.jsx("div",{className:`${le?"flex-1 overflow-y-auto px-8 py-6":""}`,children:e.jsx("div",{className:`${le?"max-w-4xl mx-auto":""}`,children:e.jsx(Pe,{value:$,onChange:i=>{t.is_perfect?G(!0):ie(i.target.value)},placeholder:"Click 'Expand Brief' to generate the full script/article/copy, or type your own prompt/notes here first to guide Andora's writing...",disabled:!l||t._streaming,rows:le?30:12,className:`text-sm leading-relaxed font-mono ${le?"w-full min-h-screen":""}`})})})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 via-pink-50 to-purple-50 border-2 border-orange-200 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Review"})]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Andora will review your notes below and expand them into a full creative brief in the draft field above"}),e.jsx(Pe,{value:ae,onChange:i=>re(i.target.value),placeholder:"Write your review notes here - ideas, directions, tweaks you want. Andora will contextualize this with the original brief and create an expanded version...",disabled:!l||t._streaming,rows:3,className:"bg-white/80 text-sm"}),e.jsxs(N,{onClick:we,loading:X,disabled:!l||!ae.trim()||t._streaming,className:"w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white",children:[e.jsx(ts,{size:16,className:"mr-2"}),X?"Andora is reviewing...":"Review"]})]}),z.length>0&&e.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-200 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Team Comments"})]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Leave notes for your team about this brief"}),e.jsx(Pe,{value:t.comments||"",onChange:i=>{l&&w(t.id,{comments:i.target.value})},placeholder:"Add comments for your team here...",disabled:!l||t._streaming,rows:3,className:"bg-white/80 text-sm"})]})]})})]}),ge&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>oe(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Send Brief to Team"}),e.jsx("div",{className:"space-y-2 mb-6 max-h-64 overflow-y-auto",children:z.map(i=>e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:xe.includes(i.id),onChange:b=>{b.target.checked?Se([...xe,i.id]):Se(xe.filter(q=>q!==i.id))},className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:i.name}),e.jsx("p",{className:"text-xs text-slate-500",children:i.email})]})]},i.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>oe(!1),className:"flex-1",children:"Cancel"}),e.jsxs(N,{onClick:f,disabled:xe.length===0,className:"flex-1",children:["Send to ",xe.length," member(s)"]})]})]})]}),e.jsx(qt,{isOpen:Ne,onClose:()=>Ce(!1),expandedBrief:(t==null?void 0:t.expanded_brief)||(t==null?void 0:t.final_brief)||"",observerFeedback:pe,onSendToDraft:B}),He&&e.jsxs("div",{className:"fixed inset-0 z-[101] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>G(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"This content is marked as perfect."}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Editing this content will mark it as imperfect. Are you sure you want to continue?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>G(!1),className:"flex-1",children:"Cancel"}),e.jsx(N,{onClick:()=>{G(!1),w(t.id,{is_perfect:!1})},className:"flex-1",children:"Edit Anyway"})]})]})]})]})},Xs={dashboard:[{id:"dashboard-welcome",target:'[data-tour="brand-overview"]',title:"Welcome to Your Dashboard",content:"This is your command center. See brand health, recent activity, and quick actions all in one place.",placement:"bottom",spotlightPadding:16},{id:"dashboard-quick-actions",target:'[data-tour="quick-actions"]',title:"Quick Actions",content:"Jump to any section of your brand workspace with these quick action buttons.",placement:"top",spotlightPadding:12}],config:[{id:"config-brand-identity",target:'[data-tour="brand-identity"]',title:"Brand Identity",content:"Define your brand's core identity: name, tagline, industry, and personality. This guides all AI-generated content.",placement:"right",spotlightPadding:20},{id:"config-channels",target:'[data-tour="channels"]',title:"Content Channels",content:"Select which platforms you publish on. Andora will tailor content for each channel's unique format.",placement:"left",spotlightPadding:16},{id:"config-posting-schedule",target:'[data-tour="posting-schedule"]',title:"Posting Schedule",content:"Set which channels you post to on each day of the week. This controls your content calendar generation.",placement:"top",spotlightPadding:16}],plot:[{id:"plot-narrative",target:'[data-tour="narrative"]',title:"Brand Narrative",content:"Your brand's story foundation. This narrative guides character development and content themes.",placement:"bottom",spotlightPadding:20},{id:"plot-characters",target:'[data-tour="characters"]',title:"Brand Characters",content:"Create AI personas that embody different aspects of your brand. Each character has a unique voice and perspective.",placement:"top",spotlightPadding:16},{id:"plot-generate-cast",target:'[data-tour="generate-cast"]',title:"Generate Characters",content:"Let AI create a full cast of brand characters based on your narrative. You can refine them later.",placement:"left",spotlightPadding:12}],events:[{id:"events-calendar",target:'[data-tour="events-calendar"]',title:"Events Calendar",content:"Add important dates, product launches, holidays, and campaigns. Events automatically influence content generation.",placement:"bottom",spotlightPadding:16},{id:"events-add",target:'[data-tour="add-event"]',title:"Add Events",content:"Click here to add new events. Include dates, descriptions, and importance levels to guide content.",placement:"left",spotlightPadding:12}],season:[{id:"season-overview",target:'[data-tour="season-overview"]',title:"Seasonal Planning",content:"Plan your content strategy by month. Set themes, plot arcs, and weekly subplots for cohesive storytelling.",placement:"bottom",spotlightPadding:20},{id:"season-themes",target:'[data-tour="monthly-themes"]',title:"Monthly Themes",content:"Each month gets a core theme or message. This creates consistency across all your content.",placement:"right",spotlightPadding:16},{id:"season-subplots",target:'[data-tour="weekly-subplots"]',title:"Weekly Subplots",content:"Break down monthly themes into weekly story arcs. Each week advances your brand narrative.",placement:"top",spotlightPadding:16}],monthly:[{id:"monthly-calendar",target:'[data-tour="calendar-grid"]',title:"Your Content Calendar",content:"This is your monthly content at a glance. Each day shows planned posts across all your channels.",placement:"bottom",spotlightPadding:20},{id:"monthly-generate-week",target:'[data-tour="generate-week"]',title:"Generate Content for a Week",content:"Click here to let me generate content for a specific week. I will consider your themes, events, and characters.",placement:"top",spotlightPadding:16},{id:"monthly-generate-month",target:'[data-tour="generate-month"]',title:"Generate Content for a Full Month",content:"Click here to let me generate content for the entire month. I will skip any content that you have marked as perfect.",placement:"top",spotlightPadding:16},{id:"monthly-embed-events",target:'[data-tour="embed-events"]',title:"Embed Your Events",content:"If you have any events that are not yet part of your story, you can embed them here. I will weave them into your weekly subplots.",placement:"top",spotlightPadding:16},{id:"monthly-model-switcher",target:'[data-tour="model-switcher"]',title:"Select Your AI Model",content:"You can choose which AI model I should use. Some are better for creative tasks, while others are faster and more cost-effective.",placement:"left",spotlightPadding:12}]},Qs="andora-guided-tour-progress",Ir=s=>{const[n,a]=r.useState(!1),[c,h]=r.useState(0),[o,w]=r.useState({});r.useEffect(()=>{try{const t=localStorage.getItem(Qs);t&&w(JSON.parse(t))}catch(t){console.error("Failed to load tour progress:",t)}},[]);const k=r.useCallback(t=>{try{localStorage.setItem(Qs,JSON.stringify(t)),w(t)}catch(U){console.error("Failed to save tour progress:",U)}},[]);r.useEffect(()=>{const t=o[s];if(Xs[s]&&Xs[s].length>0&&!(t!=null&&t.completed)&&!(t!=null&&t.dismissed)){const $=setTimeout(()=>{a(!0),h((t==null?void 0:t.currentStep)||0)},500);return()=>clearTimeout($)}},[s,o]);const m=Xs[s]||[],l=m[c],d=r.useCallback(()=>{if(c<m.length-1){const t=c+1;h(t);const U=W(M({},o),{[s]:{completed:!1,currentStep:t,dismissed:!1}});k(U)}else{const t=W(M({},o),{[s]:{completed:!0,currentStep:0,dismissed:!1}});k(t),a(!1)}},[c,m.length,s,o,k]),T=r.useCallback(()=>{if(c>0){const t=c-1;h(t);const U=W(M({},o),{[s]:{completed:!1,currentStep:t,dismissed:!1}});k(U)}},[c,s,o,k]),p=r.useCallback(()=>{const t=W(M({},o),{[s]:{completed:!1,currentStep:0,dismissed:!0}});k(t),a(!1)},[s,o,k]),u=r.useCallback(()=>{h(0),a(!0);const t=W(M({},o),{[s]:{completed:!1,currentStep:0,dismissed:!1}});k(t)},[s,o,k]),S=r.useCallback(()=>{localStorage.removeItem(Qs),w({}),a(!1)},[]);return{isActive:n,currentStep:l,currentStepIndex:c,totalSteps:m.length,nextStep:d,previousStep:T,skipTour:p,restartTour:u,resetAllProgress:S,hasSteps:m.length>0,isFirstStep:c===0,isLastStep:c===m.length-1}},Er=({isActive:s,currentStep:n,currentStepIndex:a,totalSteps:c,nextStep:h,previousStep:o,skipTour:w})=>{var k,m;return!s||!n?null:e.jsxs("div",{className:"fixed inset-0 z-[10000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{className:"absolute",style:{top:n.target?(k=document.querySelector(n.target))==null?void 0:k.getBoundingClientRect().top:"50%",left:n.target?(m=document.querySelector(n.target))==null?void 0:m.getBoundingClientRect().left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("div",{className:"relative rounded-lg bg-white p-6 shadow-2xl",style:{width:"300px"},children:[e.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-1 text-slate-500 hover:text-slate-700",children:e.jsx(Ks,{size:18})}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:n.content}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-slate-500",children:[a+1," / ",c]}),e.jsxs("div",{className:"flex gap-2",children:[a>0&&e.jsxs(N,{onClick:o,variant:"outline",size:"sm",children:[e.jsx(fs,{size:16,className:"mr-1"}),"Prev"]}),e.jsxs(N,{onClick:h,size:"sm",children:[a===c-1?"Finish":"Next",e.jsx(ys,{size:16,className:"ml-1"})]})]})]})]})})]})},Dr=({brand:s,calendar:n,month:a,monthTheme:c,events:h=[],weeklySubplots:o={}})=>{const[w,k]=a.split("-"),m=new Date(parseInt(w),parseInt(k)-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"});let l="";l+="â•".repeat(80)+`
`,l+=`${s.name.toUpperCase()} - CONTENT CALENDAR
`,l+=`${m}
`,l+="â•".repeat(80)+`

`,l+=`*BRAND OVERVIEW*
`,l+="â”€".repeat(80)+`
`,l+=`Tagline: _"${s.tagline}"_
`,s.industry&&(l+=`Industry: ${s.industry}
`),s.vision&&(l+=`Vision: ${s.vision}
`),l+=`
`,c&&(l+=`*MONTHLY THEME*
`,l+="â”€".repeat(80)+`
`,l+=`${c}

`);const d=Object.entries(o);d.length>0&&(l+=`*WEEKLY SUBPLOTS*
`,l+="â”€".repeat(80)+`
`,d.sort(([p],[u])=>parseInt(p)-parseInt(u)).forEach(([p,u])=>{const S=u.perfect?" â˜…":"";l+=`
Week ${p}${S}:
`,l+=`${u.subplot}
`}),l+=`
`),h.length>0&&(l+=`*SCHEDULED EVENTS*
`,l+="â”€".repeat(80)+`
`,h.forEach(p=>{const u=new Date(p.date+"T12:00:00Z").toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),S=p.embedded_in_subplot?" [Embedded]":"";l+=`â€¢ ${u}: ${p.title}${S}
`,p.description&&(l+=`  ${p.description}
`)}),l+=`
`),l+=`*CONTENT CALENDAR*
`,l+="â•".repeat(80)+`

`;const T={};return n.items.forEach(p=>{const u=new Date(p.date+"T12:00:00Z"),S=Math.ceil(u.getUTCDate()/7);T[S]||(T[S]=[]),T[S].push(p)}),Object.entries(T).sort(([p],[u])=>parseInt(p)-parseInt(u)).forEach(([p,u])=>{l+=`â”Œ${"â”€".repeat(78)}â”
`,l+=`â”‚ WEEK ${p}${" ".repeat(72-p.length)}â”‚
`,l+=`â””${"â”€".repeat(78)}â”˜

`,u.sort((t,U)=>t.date.localeCompare(U.date)).forEach(t=>{const U=new Date(t.date+"T12:00:00Z"),$=U.toLocaleDateString("en-US",{weekday:"long",timeZone:"UTC"}),A=U.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),E=t.is_perfect?" â˜…":"",C=Or(t.channel);l+=`â”Œâ”€ ${$}, ${A} ${C} ${t.channel}${E}
`,l+=`â”‚
`,l+=`â”‚ *${t.title}*
`,l+=`â”‚
`,(t.character_name||t.format_style)&&(l+="â”‚ ",t.character_name&&(l+=`Character: _${t.character_name}_`),t.character_name&&t.format_style&&(l+=" | "),t.format_style&&(l+=`Format: _${t.format_style}_`),l+=`
â”‚
`),t.suggested_posting_time&&(l+=`â”‚ â° ${t.suggested_posting_time}
â”‚
`),t.brief&&(l+=`â”‚ BRIEF:
`,t.brief.split(`
`).forEach(ae=>{ae.trim()&&(l+=`â”‚ ${ae}
`)}),l+=`â”‚
`);const D=t.user_revision||t.final_brief||t.expanded_brief;D&&(l+=`â”‚ CONTENT:
`,D.replace(/<h[1-6][^>]*>/gi,`
â”‚ *`).replace(/<\/h[1-6]>/gi,`*
â”‚
`).replace(/<strong[^>]*>/gi,"*").replace(/<\/strong>/gi,"*").replace(/<em[^>]*>/gi,"_").replace(/<\/em>/gi,"_").replace(/<p[^>]*>/gi,`
â”‚ `).replace(/<\/p>/gi,`
`).replace(/<br\s*\/?>/gi,`
â”‚ `).replace(/<li[^>]*>/gi,`
â”‚ â€¢ `).replace(/<\/li>/gi,"").replace(/<ul[^>]*>|<\/ul>/gi,`
`).replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').split(`
`).forEach(re=>{re.trim()&&Fr(re.replace(/^â”‚\s*/,""),75).forEach(H=>{l+=`â”‚ ${H}
`})}),l+=`â”‚
`),t.hashtags&&t.hashtags.length>0&&(l+=`â”‚ ${t.hashtags.join(" ")}
â”‚
`),t.comments&&(l+=`â”‚ ðŸ’¬ TEAM NOTES:
`,t.comments.split(`
`).forEach(ae=>{ae.trim()&&(l+=`â”‚    ${ae}
`)}),l+=`â”‚
`),l+=`â””${"â”€".repeat(78)}

`})}),l+="â•".repeat(80)+`
`,l+=`Generated by Andora - ${new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}
`,l+="â•".repeat(80)+`
`,l},Or=s=>({instagram:"ðŸ“¸",facebook:"ðŸ“˜",twitter:"ðŸ¦",linkedin:"ðŸ’¼",tiktok:"ðŸŽµ",youtube:"ðŸ“º",blog:"ðŸ“",email:"âœ‰ï¸",website:"ðŸŒ"})[s.toLowerCase()]||"ðŸ“¢",Fr=(s,n)=>{const a=s.split(" "),c=[];let h="";return a.forEach(o=>{(h+o).length>n?(h&&c.push(h.trim()),h=o+" "):h+=o+" "}),h.trim()&&c.push(h.trim()),c},Lr=(s,n)=>{const a=new Blob([s],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(a),h=document.createElement("a");h.href=c,h.download=n,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c)},Rr=({brand:s,events:n,onBrandUpdate:a,preferredModel:c,canEdit:h=!0})=>{const[o,w]=mt(c||"gemini-2.5-flash"),k=cs.useCallback(v=>{typeof w=="function"&&w(v)},[w]),{message:m,modelInfo:l,isVisible:d,showNotification:T,hideNotification:p,updateMessage:u,action:S}=Yt(),[t,U]=r.useState(()=>{const v=new Date;return`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}`}),[$,A]=r.useState(null),[E,C]=r.useState(!1),[D,Y]=r.useState(!1),[ae,re]=r.useState(null),[J,H]=r.useState(null),[X,ye]=r.useState({current:0,total:0}),[ke,O]=r.useState(!1),[V,g]=r.useState(!1),[Q,te]=r.useState(!1),[ge,oe]=r.useState(new Set),[Ne,Ce]=r.useState([]),[xe,Se]=r.useState(!1),[le,Ae]=r.useState(!1),[Ie,R]=r.useState(null),de=r.useRef(null),j=s.monthly_calendars[t],_=r.useMemo(()=>!j||h?j:W(M({},j),{items:j.items.filter(v=>v.is_perfect)}),[j,h]);r.useEffect(()=>{const v=I=>{de.current&&!de.current.contains(I.target)&&O(!1)};return ke&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[ke]),r.useEffect(()=>{if(_&&_.items&&_.items.some(I=>I._streaming)){console.log("ðŸ§¹ Cleaning up stuck _streaming flags...");const I=_.items.map(F=>{if(F._streaming){const z=M({},F);return delete z._streaming,z}return F});a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:{month:t,items:I}})})}},[t,_]);const P=new Date(t+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"}),Z=r.useMemo(()=>n.filter(v=>v.event_date.startsWith(t)),[n,t]),se=r.useMemo(()=>{var ve;const[v,I]=t.split("-").map(Number),F=new Date(v,I,0).getDate(),z=((ve=s.channels)==null?void 0:ve.length)||0,ee=F*z,K=(_==null?void 0:_.items)||[],me=K.length,we=K.filter(be=>be.is_perfect).length;return{totalSlots:ee,created:me,perfect:we}},[t,s.channels,_]);r.useEffect(()=>{const v=()=>ne(void 0,null,function*(){try{const[I,F]=t.split("-"),z=yield Re.getUnembeddedEvents(s.brand_id,I,F);Ce(z||[])}catch(I){console.error("Failed to fetch unembedded events:",I),Ce([])}});s.brand_id&&v()},[t,s.brand_id,n]);const pe=v=>{const[I,F]=t.split("-").map(Number),z=new Date(I,F-1);v==="prev"?z.setMonth(z.getMonth()-1):z.setMonth(z.getMonth()+1);const ee=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`;U(ee)},fe=v=>{A(v),C(!0)},He=(v,I)=>{if(!h)return;const F=s.monthly_calendars[t];if(!F)return;const z=F.items.map(ee=>ee.id===v?M(M({},ee),I):ee);a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:W(M({},F),{items:z})})}),($==null?void 0:$.id)===v&&A(M(M({},$),I))},G=v=>ne(void 0,null,function*(){if(!h)return;const I=s.monthly_calendars[t];if(!I)return;const F=I.items.find(z=>z.id===v);if(F){T("ai_regenerate_content",o);try{const z=$e(F.date),ee=yield as.generateContentCalendarEntry(s,F.date,W(M({},z),{preferredChannels:[F.channel]}),o),K=W(M({},ee),{id:v}),me=I.items.map(we=>we.id===v?K:we);a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:W(M({},I),{items:me})})}),A(K)}catch(z){throw console.error("Failed to regenerate content:",z),z}finally{p()}}}),Ee=()=>{const[v,I]=t.split("-").map(Number),z=new Date(v,I,0).getDate(),ee=[];return[{start:1,end:7},{start:8,end:14},{start:15,end:21},{start:22,end:28},{start:29,end:z}].forEach((me,we)=>{const ve=we+1,be=[];for(let x=me.start;x<=Math.min(me.end,z);x++){const f=`${v}-${String(I).padStart(2,"0")}-${String(x).padStart(2,"0")}`;be.push(f)}be.length>0&&ee.push({week:ve,dates:be,startDay:me.start,endDay:Math.min(me.end,z)})}),ee},Me=v=>{const[I,F,z]=v.split("-").map(Number);return z>=1&&z<=7?1:z>=8&&z<=14?2:z>=15&&z<=21?3:z>=22&&z<=28?4:z>=29?5:1},_e=()=>{const v=s.monthly_calendars[t];return v?v.items.filter(I=>I.is_perfect).map(I=>({date:I.date,channel:I.channel,title:I.title,brief:I.brief||I.final_brief,character_focus:I.character_focus,story_hook:I.story_hook})):[]},$e=v=>{var me,we;const I=(me=s.monthly_themes)==null?void 0:me[t],F=typeof I=="string"?I:(I==null?void 0:I.theme)||"",z=(we=s.season_plans)==null?void 0:we[t];let ee="";if(v&&(z!=null&&z.weekly)){const ve=Me(v),be=z.weekly[ve];ee=(be==null?void 0:be.subplot)||(be==null?void 0:be.custom_theme)||""}const K=_e();return{monthTheme:F||(z==null?void 0:z.theme)||`${s.brand_name} updates for ${P}`,weekFocus:ee,monthlyPlot:(z==null?void 0:z.monthlyPlot)||"",preferredChannels:s.channels||["LinkedIn"],events:Z,characters:s.cast_management||[],perfectContent:K}},Be=v=>ne(void 0,null,function*(){var I;if(!(!h||D)){Y(!0),re(v),H("day"),T("ai_generate_content_day",o);try{const F=$e(v),z=new Date(v+"T12:00:00Z"),ee=s.timezone||"UTC",K=z.toLocaleDateString("en-US",{weekday:"long",timeZone:ee}).toLowerCase(),me=(I=s.channel_schedule)==null?void 0:I[K];if(!me||me.length===0){console.log(`â­ï¸ Skipping ${v} (${K}) - no channels scheduled`),p(),Y(!1),re(null),H(null);return}const we=[];for(const ve of me)try{const be=yield as.generateContentCalendarEntry(s,v,W(M({},F),{preferredChannels:[ve]}),o);we.push(be)}catch(be){console.error(`Failed to generate content for ${ve}:`,be)}if(we.length>0){const ve=s.monthly_calendars[t]||{month:t,items:[]},x=[...ve.items.filter(f=>f.date!==v),...we];a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:W(M({},ve),{items:x})})})}}catch(F){console.error("Failed to generate content:",F),alert("Failed to generate content. Please try again.")}finally{p(),Y(!1),re(null),H(null)}}}),De=(v,I)=>ne(void 0,null,function*(){if(!h||D)return;const F=s.id||s.brand_id;console.log("ðŸŽ¬ Generate Week Called (STREAMING):",{weekNum:v,dates:I,brandId:F}),T("ai_generate_content_week",o),Y(!0),te(!1),H("week");try{const z=s.monthly_calendars[t]||{month:t,items:[]},ee={},K=[];if(I.forEach(b=>{const q=new Date(b+"T12:00:00Z"),L=s.timezone||"UTC",ue=q.toLocaleDateString("en-US",{weekday:"long",timeZone:L}).toLowerCase();let he=[];s.channel_schedule?he=s.channel_schedule[ue]||[]:he=s.channels||["LinkedIn"],he.length>0?(ee[b]=he,K.push(b)):console.log(`â­ï¸ Skipping ${b} (${ue}) - no channels scheduled`)}),K.length===0){alert("No channels scheduled for any days in this week. Please configure your Channel Posting Schedule in Brand Profile.");return}I=K;const me=z.items.filter(b=>I.includes(b.date)).map(b=>({date:b.date,channel:b.channel,is_perfect:b.is_perfect,story_hook:b.story_hook||b.title})),we={brandId:F,dates:I,channels:ee,existingContent:me,model:o};console.log("ðŸ“¡ Connecting to SSE stream...");const ve=yield fetch("https://py.raysourcelabs.com/api/content/generate-week-stream",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(we)});if(!ve.ok)throw new Error("Failed to start streaming");if(!ve.body)throw new Error("No response body");const be=ve.body.getReader(),x=new TextDecoder;let f="";const B=[],i=new Set;for(;;){const{done:b,value:q}=yield be.read();if(b)break;if(Q){be.cancel(),console.log("ðŸ›‘ Stream cancelled by user");break}f+=x.decode(q,{stream:!0});const L=f.split(`
`);f=L.pop()||"";for(const ue of L)if(!(!ue.trim()||ue.startsWith(":"))){if(ue.startsWith("event:")){const he=ue.slice(6).trim();continue}if(ue.startsWith("data:"))try{const he=JSON.parse(ue.slice(5).trim());if(he.message&&u(he.message,he.model||o),he.entry){const ze=he.entry,hs=`content-${ze.date}-${ze.channel}-${Date.now()}-${B.length}`,ws=`${ze.date}-${ze.channel}`;i.add(ws);const Jt={id:hs,date:ze.date,channel:ze.channel,title:ze.title||"...",brief:ze.brief||"...",final_brief:ze.brief||"...",story_hook:ze.story_hook||"...",directives:ze.directives||"",character_focus:ze.character_focus||"",media_type:ze.media_type||"",call_to_action:ze.call_to_action||"",is_perfect:!1,_streaming:!0};B.push(Jt);const Zt=new Set(I),Xt=[...z.items.filter(ks=>!Zt.has(ks.date)||ks.is_perfect),...B];a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:{month:t,items:Xt}})}),oe(ks=>new Set(ks).add(ws)),ye({current:B.length,total:B.length+1}),setTimeout(()=>{oe(ps=>{const _s=new Set(ps);return _s.delete(ws),_s});const Qt=(s.monthly_calendars[t]||{month:t,items:[]}).items.map(ps=>{if(`${ps.date}-${ps.channel}`===ws&&ps._streaming){const _s=M({},ps);return delete _s._streaming,_s}return ps});a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:{month:t,items:Qt}})})},1500)}he.totalEntries&&(console.log(`âœ… Stream complete: ${he.totalEntries} entries generated`),u(`Generated ${he.totalEntries} content entries`,o))}catch(he){console.warn("Failed to parse SSE data:",ue)}}}}catch(z){console.error("Failed to generate week:",z),alert("Failed to generate week content. Please try again.")}finally{p(),Y(!1),te(!1),re(null),H(null),ye({current:0,total:0});const z=s.monthly_calendars[t];if(z&&z.items.some(ee=>ee._streaming)){const ee=z.items.map(K=>{if(K._streaming){const me=M({},K);return delete me._streaming,me}return K});a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:{month:t,items:ee}})})}setTimeout(()=>{oe(new Set)},2e3)}}),We=()=>{te(!0)},Oe=()=>ne(void 0,null,function*(){var F;if(!h||D)return;const v=Ee();if(v.length===0)return;const I=v.flatMap(z=>z.dates);Y(!0),H("month"),te(!1),ye({current:0,total:I.length}),u(`Generating content for ${I.length} days in ${P}...`,o);try{const z=s.monthly_calendars[t]||{month:t,items:[]},ee=[];for(let K=0;K<I.length;K++){if(Q){console.log("Generation stopped by user");break}const me=I[K];re(me),ye({current:K+1,total:I.length});const we=new Date(me+"T12:00:00Z"),ve=we.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"});u(`Generating content for ${ve}...`,o);const be=$e(me),x=z.items.filter(q=>q.date===me);if(x.some(q=>q.is_perfect)&&x.every(q=>q.is_perfect))continue;const B=s.timezone||"UTC",i=we.toLocaleDateString("en-US",{weekday:"long",timeZone:B}).toLowerCase(),b=(F=s.channel_schedule)==null?void 0:F[i];if(!b||b.length===0){console.log(`â­ï¸ Skipping ${me} (${i}) - no channels scheduled`);continue}for(const q of b){if(Q)break;const L=x.find(ue=>ue.channel===q);if(!(L!=null&&L.is_perfect))try{const ue=yield as.generateContentCalendarEntry(s,me,W(M({},be),{preferredChannels:[q]}),o);ee.push(ue),oe(he=>new Set(he).add(ue.id)),setTimeout(()=>{oe(he=>{const ze=new Set(he);return ze.delete(ue.id),ze})},1500)}catch(ue){console.error(`Failed to generate content for ${q} on ${me}:`,ue)}}}if(ee.length>0){const me=[...z.items.filter(we=>we.is_perfect),...ee];a({monthly_calendars:W(M({},s.monthly_calendars),{[t]:{month:t,items:me}})})}}catch(z){console.error("Failed to generate month:",z),alert("Failed to generate month content. Please try again.")}finally{p(),Y(!1),te(!1),re(null),H(null),ye({current:0,total:0}),oe(new Set)}}),Ke=(v,I=!1)=>ne(void 0,null,function*(){Se(!0),u(`Embedding events into Week ${v}...`,o);try{const[F,z]=t.split("-"),ee=yield Re.embedEventsIntoWeek(s.brand_id,F,z,v,I);if(ee.needsConfirmation&&!I){R(v),Ae(!0),p();return}const K=yield Re.getUnembeddedEvents(s.brand_id,F,z);if(Ce(K||[]),u(`Successfully embedded ${ee.eventsEmbedded} event(s) into Week ${v}`,o,{label:"Undo",onClick:()=>Qe(v)}),ee.shouldRegenerateContent&&confirm(`Week ${v} subplot has been updated. Would you like to regenerate imperfect content for this week?`)){const ve=Ee().find(be=>be.week===v);ve&&(yield De(v,ve.dates))}}catch(F){console.error("Failed to embed events:",F),p(),alert("Failed to embed events. Please try again.")}finally{Se(!1),Ae(!1),R(null)}}),Qe=v=>ne(void 0,null,function*(){try{const[I,F]=t.split("-");yield Re.undoEmbedEvents(s.brand_id,I,F,v);const z=yield Re.getUnembeddedEvents(s.brand_id,I,F);Ce(z||[]),p(),alert(`Successfully restored subplot for week ${v}`)}catch(I){console.error("Failed to undo embed events:",I),alert("Failed to undo embed events. Please try again.")}}),es=(()=>{const v={},I=Ee();return Ne.forEach(F=>{const z=F.start_date||F.event_date;if(!z)return;const ee=I.find(K=>K.dates.some(me=>me===z));ee&&(v[ee.week]=(v[ee.week]||0)+1)}),v})(),Ue=()=>{var v,I;try{const[F,z]=t.split("-"),ee=(v=s.season_plans)==null?void 0:v[t],K=(ee==null?void 0:ee.weekly)||{},me=Dr({brand:s,calendar:_,month:t,monthTheme:(I=s.monthly_themes)==null?void 0:I[t],events:Z,weeklySubplots:K}),we=new Date(parseInt(F),parseInt(z)-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"}).replace(/\s+/g,"_"),ve=`${s.name.replace(/\s+/g,"_")}_${we}_Calendar.txt`;Lr(me,ve)}catch(F){console.error("Export failed:",F),alert("Failed to export calendar. Please try again.")}},{isActive:Je,currentStep:Le,currentStepIndex:Ge,totalSteps:y,nextStep:ce,previousStep:ie,skipTour:je}=Ir("monthly");return e.jsxs("div",{className:"max-w-6xl mx-auto p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[e.jsx(Er,{isActive:Je,currentStep:Le,currentStepIndex:Ge,totalSteps:y,nextStep:ce,previousStep:ie,skipTour:je}),e.jsx(dt,{message:m,show:d,modelInfo:l,progress:D&&X.total>0?X:null,onStop:D?We:void 0,action:S}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(rs,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold shimmer-text",children:"Monthly Content Calendar"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 mt-1 text-xs sm:text-sm",children:[e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-semibold text-primary-600",children:se.created}),e.jsxs("span",{className:"text-slate-400",children:["/",se.totalSlots]}),e.jsx("span",{className:"text-slate-500 ml-1",children:"slots created"})]}),e.jsx("span",{className:"text-slate-400",children:"â€¢"}),e.jsxs("span",{className:"text-slate-600",children:[e.jsx("span",{className:"font-semibold text-green-600",children:se.perfect}),e.jsxs("span",{className:"text-slate-400",children:["/",se.created]}),e.jsx("span",{className:"text-slate-500 ml-1",children:"perfect"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap w-full sm:w-auto",children:[e.jsx("div",{"data-tour":"model-switcher",children:e.jsx(vs,{value:o,onChange:k})}),D&&e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 bg-primary-50 border border-primary-200 rounded-lg",children:[e.jsx(Hs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-primary-600 animate-spin"}),e.jsxs("span",{className:"text-xs sm:text-sm text-primary-700",children:[J==="month"&&`Generating month... (${X.current}/${X.total})`,J==="week"&&`Generating week... (${X.current}/${X.total})`,J==="day"&&"Generating content...",!J&&"Generating content..."]})]})]})]}),h&&e.jsxs("div",{className:"glass-effect rounded-xl p-3 sm:p-4 border border-primary-500/20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-dark-900",children:"Story Scene Generation"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",ref:de,"data-tour":"generate-week",children:[e.jsxs(N,{onClick:()=>O(!ke),disabled:D,size:"sm",variant:"outline",className:"flex items-center gap-1 sm:gap-2 w-full sm:w-auto text-xs sm:text-sm",children:[e.jsx(Te,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Week"}),e.jsx("span",{className:"sm:hidden",children:"Week"}),e.jsx(Bs,{size:12,className:`sm:w-3.5 sm:h-3.5 transition-transform ${ke?"rotate-180":""}`})]}),ke&&e.jsx("div",{className:"absolute right-0 mt-2 w-64 sm:w-72 bg-white rounded-lg shadow-lg border border-slate-200 z-10",children:Ee().map(v=>{const[I,F]=t.split("-").map(Number),z=new Date(I,F-1,1).toLocaleDateString("en-US",{month:"short"}),ee=`Week ${v.week} (${z} ${v.startDay}-${v.endDay})`;return e.jsx("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-primary-50 first:rounded-t-lg last:rounded-b-lg transition-colors",children:e.jsxs("button",{onClick:()=>{De(v.week,v.dates),O(!1)},className:"flex-1 text-left text-sm",children:[ee," ",e.jsxs("span",{className:"text-xs text-slate-500",children:["(",v.dates.length," days)"]})]})},v.week)})})]}),Ne.length>0&&e.jsxs("div",{className:"relative flex-1 sm:flex-initial","data-tour":"embed-events",children:[e.jsxs(N,{onClick:()=>g(!V),disabled:xe,size:"sm",variant:"outline",className:"flex items-center gap-1 sm:gap-2 w-full sm:w-auto text-xs sm:text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 border-orange-200",children:[e.jsxs("span",{className:"font-semibold",children:["ðŸ“Œ ",Ne.length]}),e.jsx("span",{className:"hidden sm:inline",children:"Embed Events"}),e.jsx("span",{className:"sm:hidden",children:"Embed"}),e.jsx(Bs,{size:12,className:`sm:w-3.5 sm:h-3.5 transition-transform ${V?"rotate-180":""}`})]}),V&&e.jsx("div",{className:"absolute right-0 mt-2 w-64 sm:w-72 bg-white rounded-lg shadow-lg border border-slate-200 z-10",children:Ee().map(v=>{const I=es[v.week]||0;if(I===0)return null;const[F,z]=t.split("-").map(Number),ee=new Date(F,z-1,1).toLocaleDateString("en-US",{month:"short"}),K=`Week ${v.week} (${ee} ${v.startDay}-${v.endDay})`;return e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-orange-50 first:rounded-t-lg last:rounded-b-lg transition-colors",children:[e.jsx("button",{onClick:()=>{Ke(v.week),g(!1)},className:"flex-1 text-left text-sm",children:K}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:["ðŸ“Œ ",I]})]},v.week)})})]}),e.jsx("div",{"data-tour":"generate-month",children:e.jsxs(N,{onClick:Oe,disabled:D,size:"sm",className:"flex items-center gap-1 sm:gap-2 bg-gradient-to-r from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 text-white flex-1 sm:flex-initial text-xs sm:text-sm",children:[e.jsx(ts,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Full Month"}),e.jsx("span",{className:"sm:hidden",children:"Full Month"})]})}),e.jsxs(N,{onClick:Ue,disabled:!_||_.items.length===0,size:"sm",variant:"outline",className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm border-primary-300 hover:bg-primary-50",title:"Export calendar to formatted text file",children:[e.jsx(_a,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Andora will skip perfect briefs and regenerate the rest. Each day is a story scene with character-driven narrative."})]}),e.jsx("div",{className:"glass-effect rounded-xl p-3 sm:p-4 border border-primary-500/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>pe("prev"),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(ns,{size:14,className:"sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-semibold text-dark-900 text-center",children:P}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>pe("next"),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(Ve,{size:14,className:"sm:w-4 sm:h-4"})]})]})}),e.jsx("div",{"data-tour":"calendar-grid",className:`transition-all duration-300 ${E?"lg:pr-96":""}`,children:e.jsx(kr,{month:t,calendar:_,events:Z,brand:s,onContentClick:fe,onGenerateDate:Be,canEdit:h,isGenerating:D,generatingDate:ae,glowingItems:ge})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Mr,{isOpen:E,onClose:()=>{C(!1),A(null)},content:$,allContentForDay:$?_==null?void 0:_.items.filter(v=>v.date===$.date):[],allContent:(_==null?void 0:_.items)||[],brand:s,onContentUpdate:He,onRegenerate:G,preferredModel:o,canEdit:h,events:Z,monthTheme:s.monthly_themes[t],weekFocus:$?$e($.date).weekFocus:void 0,showNotification:T,hideNotification:p})}),e.jsx("div",{className:"lg:hidden",children:e.jsx(Pr,{isOpen:E,onClose:()=>{C(!1),A(null)},content:$,allContentForDay:$?_==null?void 0:_.items.filter(v=>v.date===$.date):[],allContent:(_==null?void 0:_.items)||[],brand:s,onContentUpdate:He,onRegenerate:G,preferredModel:o,canEdit:h,events:Z,monthTheme:s.monthly_themes[t],weekFocus:$?$e($.date).weekFocus:void 0,showNotification:T,hideNotification:p})}),le&&Ie!==null&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md shadow-2xl",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:["Week ",Ie," is Perfect"]}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"This week's subplot is marked as perfect. Embedding new events will update it and mark it as imperfect. Do you want to proceed anyway?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(N,{variant:"outline",onClick:()=>{Ae(!1),R(null),Se(!1)},children:"Cancel"}),e.jsx(N,{onClick:()=>{Ie!==null&&Ke(Ie,!0)},className:"bg-orange-500 hover:bg-orange-600 text-white",children:"Reflow Anyway"})]})]})})]})},cn=Object.freeze(Object.defineProperty({__proto__:null,MonthlyPage:Rr},Symbol.toStringTag,{value:"Module"})),Br=({brand:s})=>{var T;const[n,a]=mt("gemini-2.5-flash"),[c,h]=r.useState([{id:"welcome",role:"assistant",content:`Hello! I'm Andora, your storytelling companion for ${s.brand_name}. I have complete awareness of your brand narrative, character cast, and strategic context. How can I help bring your story to life today?`,timestamp:new Date}]),[o,w]=r.useState(""),[k,m]=r.useState(!1),l=()=>ne(void 0,null,function*(){if(!o.trim()||k)return;const p={id:`user-${Date.now()}`,role:"user",content:o.trim(),timestamp:new Date};h(u=>[...u,p]),w(""),m(!0);try{const u=yield as.chatResponse(o.trim(),s,s.cast_management||[],n),S={id:`assistant-${Date.now()}`,role:"assistant",content:u,timestamp:new Date};h(t=>[...t,S])}catch(u){console.error("Error getting AI response:",u);const S={id:`error-${Date.now()}`,role:"assistant",content:"I apologize, but I encountered a temporary glitch in my neural pathways. Please try again, and I'll be right back to help you craft amazing content!",timestamp:new Date};h(t=>[...t,S])}finally{m(!1)}}),d=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),l())};return e.jsxs("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 space-y-3 sm:space-y-4 md:space-y-6 relative floating-particles min-w-0 overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx(qe,{size:"lg",className:"shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold shimmer-text truncate",children:"Chat with Andora"}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mt-1",children:[e.jsx(Te,{className:"w-3 h-3 sm:w-4 sm:h-4 text-primary-400 shrink-0"}),e.jsxs("p",{className:"text-slate-500 text-xs sm:text-sm lg:text-base truncate",children:["Your storytelling companion for ",s.brand_name]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",children:e.jsx(vs,{value:n,onChange:a})})]}),e.jsxs("div",{className:"neural-glow p-4 rounded-lg border border-primary-500/30",children:[e.jsx("h3",{className:"font-medium text-primary-300 mb-2",children:"My Knowledge Base:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4 text-sm text-slate-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Brand Story:"})," Complete narrative framework"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Characters:"})," ",((T=s.cast_management)==null?void 0:T.length)||0," cast members"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Channels:"})," ",s.channels.join(", ")]})]})]}),e.jsxs("div",{className:"glass-effect rounded-lg h-[500px] sm:h-[600px] flex flex-col border border-primary-500/20",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4",children:[c.map(p=>e.jsxs("div",{className:`flex items-start space-x-2 sm:space-x-3 ${p.role==="user"?"flex-row-reverse space-x-reverse":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:p.role==="user"?e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-r from-primary-600 to-purple-600 flex items-center justify-center",children:e.jsx(Dt,{size:16,className:"text-white"})}):e.jsx(qe,{size:"sm"})}),e.jsxs("div",{className:`flex-1 max-w-[85%] sm:max-w-[70%] ${p.role==="user"?"text-right":"text-left"}`,children:[e.jsx("div",{className:`inline-block px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-sm sm:text-base ${p.role==="user"?"bg-gradient-to-r from-primary-600 to-purple-600 text-white":"conversation-bubble text-slate-600"}`,children:e.jsx("p",{className:"whitespace-pre-wrap",children:p.content})}),e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:p.timestamp.toLocaleTimeString()})]})]},p.id)),k&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(qe,{size:"sm",animate:!0}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"inline-block px-3 sm:px-4 py-2 sm:py-3 conversation-bubble",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-accent-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]})]}),e.jsxs("div",{className:"border-t border-primary-200/60 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx(Pe,{value:o,onChange:p=>w(p.target.value),onKeyDown:d,placeholder:"Ask me about content strategy, character development, seasonal themes, or anything about your brand story...",rows:2,className:"flex-1 resize-none text-sm",disabled:k}),e.jsxs(N,{onClick:l,disabled:!o.trim()||k,className:"flex items-center self-end sm:self-end",size:"sm",children:[e.jsx(gs,{size:16,className:"mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2 flex items-center justify-center sm:justify-start",children:[e.jsx(Te,{size:12,className:"mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Press Enter to send â€¢ Shift+Enter for new line"}),e.jsx("span",{className:"sm:hidden",children:"Enter to send â€¢ Shift+Enter for new line"})]})]})]})]})},dn=Object.freeze(Object.defineProperty({__proto__:null,ChatPage:Br},Symbol.toStringTag,{value:"Module"})),Wr=({brand:s})=>{var k,m,l,d;const[n,a]=cs.useState(!0),c=(m=(k=s==null?void 0:s.cast_management)==null?void 0:k.length)!=null?m:0,h=Object.keys((s==null?void 0:s.monthly_themes)||{}).length,o=(d=(l=s==null?void 0:s.channels)==null?void 0:l.length)!=null?d:0,w=Object.keys((s==null?void 0:s.season_plans)||{}).length;return Object.keys((s==null?void 0:s.weekly_subplots)||{}).length,Object.keys((s==null?void 0:s.monthly_calendars)||{}).length,cs.useEffect(()=>{const T=setTimeout(()=>a(!1),300);return()=>clearTimeout(T)},[]),n?e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-10",children:e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-2 border-primary-600 border-t-transparent"}),e.jsx("p",{className:"text-slate-600",children:"Preparing your control center..."})]})})}):e.jsxs("div",{className:"mx-auto max-w-7xl space-y-10 px-6 py-10",children:[e.jsx("section",{className:"overflow-hidden rounded-3xl border border-primary-500/10 bg-gradient-to-br from-primary-500/10 via-white to-transparent p-8 shadow-xl",children:e.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-primary-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-primary-600",children:[e.jsx(As,{className:"h-4 w-4"})," Narrative Control Center"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-900 sm:text-4xl",children:s?`Welcome back to ${s.brand_name}`:"Your story studio is ready"}),e.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600 sm:text-base",children:s?"Track momentum, align your cast, and keep every beat connected. Scroll down to see the strongest opportunities right now.":"Create a brand to unlock character creation, content arcs, and event-driven planning in one intuitive dashboard."})]})]}),e.jsxs("div",{className:"grid w-full gap-4 sm:grid-cols-2 lg:max-w-lg",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 px-5 py-4 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Characters"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(ds,{className:"h-5 w-5 text-primary-500"}),e.jsx("span",{className:"text-2xl font-bold text-primary-900",children:c})]})]}),e.jsxs("div",{className:"rounded-2xl border border-primary-500/20 bg-primary-500/10 px-5 py-4 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:"Monthly Themes"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(rs,{className:"h-5 w-5 text-primary-500"}),e.jsx("span",{className:"text-2xl font-bold text-primary-900",children:h})]})]}),e.jsxs("div",{className:"rounded-2xl border border-emerald-500/20 bg-emerald-50/80 px-5 py-4 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-600",children:"Channels"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(Et,{className:"h-5 w-5 text-emerald-500"}),e.jsx("span",{className:"text-2xl font-bold text-emerald-700",children:o})]})]}),e.jsxs("div",{className:"rounded-2xl border border-indigo-500/20 bg-indigo-500/10 px-5 py-4 shadow-sm",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-600",children:"Season Plans"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx(Ca,{className:"h-5 w-5 text-indigo-500"}),e.jsx("span",{className:"text-2xl font-bold text-indigo-700",children:w})]})]})]})]})}),e.jsxs("section",{className:"space-y-6",children:[s&&(()=>{var $;const T=new Date,p=[0,1,2].map(A=>{const E=new Date(T);return E.setDate(T.getDate()+A),E}),u=`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}`,S=($=s.monthly_calendars)==null?void 0:$[u];s.cast_management;const t=A=>{const E=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`;return(S==null?void 0:S.items.filter(C=>C.date===E))||[]},U=A=>A===0?"Today":A===1?"Tomorrow":p[A].toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return e.jsxs("div",{className:"rounded-3xl border border-primary-200/40 bg-gradient-to-br from-purple-500/10 via-white to-transparent p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"This Week's Content"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Character assignments for your upcoming briefs"})]}),e.jsx(rs,{className:"h-5 w-5 text-purple-500"})]}),e.jsx("div",{className:"mt-5 space-y-3",children:p.map((A,E)=>{const C=t(A),D=C.map(Y=>Y.character_focus).filter(Boolean).slice(0,3);return e.jsx("div",{className:"rounded-2xl border border-purple-200/40 bg-white/80 px-5 py-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600",children:U(E)}),e.jsx("p",{className:"mt-1 text-sm text-slate-900",children:C.length>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-semibold",children:C.length})," brief",C.length===1?"":"s"]}):e.jsx("span",{className:"text-slate-500",children:"No briefs scheduled"})}),D.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:D.map((Y,ae)=>e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-purple-100 px-2 py-0.5 text-xs font-medium text-purple-700 border border-purple-200",children:[e.jsx(ds,{className:"h-3 w-3"}),Y]},ae))})]})})},E)})}),S&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("a",{href:"/monthly",className:"inline-flex items-center gap-2 text-sm font-medium text-purple-600 hover:text-purple-700 transition-colors",children:["View full calendar",e.jsx(ys,{className:"h-4 w-4"})]})})]})})(),e.jsxs("div",{className:"rounded-3xl border border-slate-200/70 bg-white/90 p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Focus Routes"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Deep dive into the workspace area that will have the biggest impact today."})]}),e.jsx(ys,{className:"h-5 w-5 text-slate-400"})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("a",{href:"/events",className:"block rounded-2xl border border-primary-500/20 bg-primary-500/5 px-5 py-4 transition hover:border-primary-500/40 hover:bg-primary-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-primary-800",children:"Events & Moments"}),e.jsx("span",{className:"text-xs text-primary-600",children:"Sync your timeline"})]}),e.jsx("p",{className:"mt-2 text-sm text-primary-700",children:"Keep upcoming launches visible so subplot ideas and calendars stay relevant."})]}),e.jsxs("a",{href:"/monthly",className:"block rounded-2xl border border-emerald-500/20 bg-emerald-50/80 px-5 py-4 transition hover:border-emerald-500/40",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:"Monthly Planning"}),e.jsx("span",{className:"text-xs text-emerald-600",children:h>0?`${h} theme${h===1?"":"s"} defined`:"Set your arc"})]}),e.jsx("p",{className:"mt-2 text-sm text-emerald-700",children:"Align your narrative pillars with actionable prompts for the next content cycle."})]}),e.jsxs("a",{href:"/plot",className:"block rounded-2xl border border-indigo-500/20 bg-indigo-500/10 px-5 py-4 transition hover:border-indigo-500/40",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-800",children:"Plot Builder"}),e.jsx("span",{className:"text-xs text-indigo-600",children:"Craft story beats"})]}),e.jsx("p",{className:"mt-2 text-sm text-indigo-700",children:"Use AI-assisted arcs to keep every initiative grounded in character perspective."})]}),e.jsxs("a",{href:"/chat",className:"block rounded-2xl border border-slate-200/80 bg-slate-50 px-5 py-4 transition hover:border-slate-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Andora Copilot"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Collaborate faster"})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Brief Andora on upcoming pushes, draft scripts, or refine pitches in real-time."})]})]})]}),!s&&e.jsxs("div",{className:"rounded-3xl border border-dashed border-primary-300 bg-white/80 p-6 text-center shadow-inner",children:[e.jsx(Te,{className:"mx-auto h-8 w-8 text-primary-500"}),e.jsx("h2",{className:"mt-4 text-xl font-semibold text-slate-900",children:"Build your first brand"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Define your mission, capture your cast, and unlock guided storytelling experiences tailored to you."})]})]})]})},mn=Object.freeze(Object.defineProperty({__proto__:null,DashboardPage:Wr},Symbol.toStringTag,{value:"Module"})),Ur=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"404 - Not Found"}),e.jsx("p",{className:"mt-4 text-lg",children:"The page you are looking for does not exist."})]}),xn=Object.freeze(Object.defineProperty({__proto__:null,NotFoundPage:Ur},Symbol.toStringTag,{value:"Module"}));export{sn as B,Xr as C,mn as D,ln as E,Zr as H,cn as M,xn as N,Qr as P,tn as S,an as T,Ns as a,en as b,rn as c,nn as d,on as e,dn as f,Jr as u};
